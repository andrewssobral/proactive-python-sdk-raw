<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="description" content="ProActive Parallel Suite is an innovative Open Source solution (OW2) for acceleration and orchestration of applications, seamlessly integrated with the management of high-performance Clouds (Private and Public with bursting capabilities). ProActive platform features High-Performance Workflows and Application Parallelization, together with enterprise Scheduling and Orchestration coupled with the dynamic management of private Heterogeneous Grids and Clouds. With a ProActive platform, our users tackle at once the acceleration and orchestration of all demanding enterprise applications, and the management of their own Enterprise Cloud.">
<meta name="keywords" content="proactive, activeeon, documentation, manual, help, doc">
<meta name="author" content="The Activeeon team">
<title>ProActive Workflows &amp; Scheduling&#8201;&#8212;&#8201;Admin Guide</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #4d70cf; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #e87224; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #db6517; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #1c3067; text-rendering: optimizeLegibility; margin-top: 0.2em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d70cf; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #4d70cf; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #4d70cf; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #4d70cf; }

blockquote, blockquote p { line-height: 1.6; color: #4d70cf; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: 0.875em; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: 0.875em; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.125em; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; line-height: inherit; }

pre, pre > code { line-height: 1.6; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

.keyseq { color: #555555; }

kbd { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #1c3067; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #4d70cf; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #4d70cf; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #4d70cf; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #1c3067; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
/* we hide the toc content as it will be overwritten by tocbot javascript library */
#toc > ul { margin-left: 0.125em; visibility: hidden; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #4d70cf; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 3px; border-radius: 3px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #1c3067; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #172753; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

.imageblock > .title { text-align: inherit; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: #1c3067; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #4d70cf; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 3px; border-radius: 3px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 3px; border-radius: 3px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #4d70cf; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: none; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #dddddd; -webkit-border-radius: 3px; border-radius: 3px; word-wrap: break-word; padding: 0.75em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: none; background-color: inherit; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.75em; -webkit-border-radius: 3px; border-radius: 3px; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #4d70cf; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #4d70cf; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #4d70cf; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #4d70cf; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: #4d70cf; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.125em; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #b65413; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://trydev2.activeeon.com/doc/highlight/styles/idea.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>ProActive Workflows &amp; Scheduling&#8201;&#8212;&#8201;Admin Guide</h1>
<div class="details">
<span id="author" class="author">The Activeeon team</span><br>
<span id="email" class="email"><a href="mailto:contact@activeeon.com">contact@activeeon.com</a></span><br>
<span id="revnumber">version unspecified</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">PWS Admin Guide</div>
<ul class="sectlevel1">
<li><a href="ProActiveAdminGuide.html#_all_documentation_links">All documentation links</a></li>
<li><a href="ProActiveAdminGuide.html#_overview">1. Overview</a></li>
<li><a href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">2. Get Started</a></li>
<li><a href="ProActiveAdminGuide.html#_proactive_scheduler_configuration">3. ProActive Scheduler configuration</a></li>
<li><a href="ProActiveAdminGuide.html#_user_authentication">4. User Authentication</a></li>
<li><a href="ProActiveAdminGuide.html#_user_permissions">5. User Permissions</a></li>
<li><a href="ProActiveAdminGuide.html#_deploy_proactive_nodes">6. Deploy ProActive Nodes</a></li>
<li><a href="ProActiveAdminGuide.html#_control_the_resource_usage">7. Control the resource usage</a></li>
<li><a href="ProActiveAdminGuide.html#_available_network_protocols">8. Available Network Protocols</a></li>
<li><a href="ProActiveAdminGuide.html#_task_termination_behavior">9. Task Termination Behavior</a></li>
<li><a href="ProActiveAdminGuide.html#_monitor_the_cluster_state">10. Monitor the cluster state</a></li>
<li><a href="ProActiveAdminGuide.html#_run_as_me_admin">11. Run Computation with a user&#8217;s system account</a></li>
<li><a href="ProActiveAdminGuide.html#_web_applications">12. Configure Web applications</a></li>
<li><a href="ProActiveAdminGuide.html#_script_engines">13. Configure script engines</a></li>
<li><a href="ProActiveAdminGuide.html#_scheduling_policies">14. Extending ProActive Scheduling Policy</a></li>
<li><a href="ProActiveAdminGuide.html#_addons">15. Addons</a></li>
<li><a href="ProActiveAdminGuide.html#_scheduler_start_tuning">16. Scheduler start tuning</a></li>
<li><a href="ProActiveAdminGuide.html#_add_custom_third_party_libraries_to_proactive_server_and_nodes_classpath">17. Add custom third-party libraries to ProActive server and Nodes classpath</a></li>
<li><a href="ProActiveAdminGuide.html#_performance_tuning">18. Performance tuning</a></li>
<li><a href="ProActiveAdminGuide.html#_nodes_and_task_recovery">19. Nodes and Task Recovery</a></li>
<li><a href="ProActiveAdminGuide.html#_troubleshooting_2">20. Troubleshooting</a></li>
<li><a href="ProActiveAdminGuide.html#_reference">21. Reference</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<script>
var header = document.getElementById('header').innerHTML
var newHeader = header.replace("</h1>", "</h1><h4>Version " + localStorage.getItem('conf_version') + ' - ' + localStorage.getItem('conf_date') + "</h4>");
document.getElementById('header').innerHTML = newHeader
</script>
</div>
</div>
<div class="sect1">
<h2 id="_all_documentation_links"><a class="anchor" href="ProActiveAdminGuide.html#_all_documentation_links"></a><a class="link" href="ProActiveAdminGuide.html#_all_documentation_links">All documentation links</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="all_doc_pws"><a class="anchor" href="ProActiveAdminGuide.html#all_doc_pws"></a><a class="link" href="ProActiveAdminGuide.html#all_doc_pws">ProActive Workflows &amp; Scheduling (PWS)</a></h3>
<div class="ulist">
<ul>
<li>
<p><h4 id="_all_doc_pws_user_guide" style="display:inline;font-size:1em""><a href="../user/ProActiveUserGuide.html#_all_doc_pws_user_guide">PWS User Guide</a></h4>
&nbsp;(Workflows, Workload automation, Jobs, Tasks, Catalog, Resource Management, Big Data/ETL, …​)</p>
</li>
<li><p><h4 id="all_doc_pws_modules" style="display:inline;font-size:1em"">PWS Modules</h4></p>

<ul>
<li><p><h5 id="_all_doc_jp_user_guide" style="display:inline;font-size:1em""><a href="../JobPlanner/JobPlannerUserGuide.html#_all_doc_jp_user_guide">Job Planner</a></h5>
&nbsp;(Time-based Scheduling)</p>
</li>
<li><p><h5 id="_all_doc_peo_user_guide" style="display:inline;font-size:1em""><a href="../PEO/PEOUserGuide.html#_all_doc_peo_user_guide">Event Orchestration</a></h5>
&nbsp;(Event-based Scheduling)</p>
</li>
<li><p><h5 id="_all_doc_pca_user_guide" style="display:inline;font-size:1em""><a href="../PSA/PSAUserGuide.html#_all_doc_pca_user_guide">Service Automation</a></h5>
&nbsp;(PaaS On-Demand, Service deployment and management)</p>
</li>
</ul>
</li>
<li><p><h4 id="_all_doc_pws_admin_guide" style="display:inline;font-size:1em""><a href="ProActiveAdminGuide.html#_all_doc_pws_admin_guide">PWS Admin Guide</a></h4>
&nbsp;(Installation, Infrastructure &amp; Nodes setup, Agents,…​)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_proactive_machine_learning_paio"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_machine_learning_paio"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_machine_learning_paio">ProActive AI Orchestration (PAIO)</a></h3>
<div class="ulist">
<ul>
<li><p><h4 id="_all_doc_paio_user_guide" style="display:inline;font-size:1em"><a href="../PAIO/PAIOUserGuide.html#_all_doc_paio_user_guide">PAIO User Guide</a></h4>
&nbsp;(a complete Data Science and Machine Learning platform, with Studio & MLOps)</p>
</li>
</ul>
</div>
<div class="paragraph">
<h3 id="_all_doc_api_doc"><a class="anchor" href="ProActiveAdminGuide.html#_all_doc_api_doc"></a><a class="link" href="ProActiveAdminGuide.html#_all_doc_api_doc">API documentation</a></h3>
<p><strong>
<a class="restUrl" href="https://trydev2.activeeon.com/rest" target="_blank">Scheduler REST</a>&nbsp;&nbsp;&nbsp;
<a href="../user/ProActiveUserGuide.html#_scheduler_graphql_api">Scheduler GraphQL</a>  
<a href="../user/ProActiveUserGuide.html#_scheduler_command_line">Scheduler CLI</a>  
<a href="../javadoc/index.html%3Forg%252Fow2%252Fproactive%252Fscheduler%252Frest%252FSchedulerClient.html">Scheduler Java</a>  
<a href="../javadoc/index.html%3Forg%252Fow2%252Fproactive%252Fscheduler%252Fcommon%252Fjob%252FTaskFlowJob.html">Workflow Creation Java</a>  
<a href="https://github.com/ow2-proactive/proactive-python-client#proactive-scheduler-client">Python Client</a>  
<a href="../PAIO/PAIOUserGuide.html#_proactive_jupyter_kernel">Jupyter Kernel</a>
<a href="https://www.activeeon.com/public_content/documentation/csharp-client/">.NET Client</a>
</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="ProActiveAdminGuide.html#_overview"></a><a class="link" href="ProActiveAdminGuide.html#_overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>ProActive Scheduler</strong> is a comprehensive Open Source <strong>job scheduler and Orchestrator</strong>, also featuring <strong>Workflows</strong> and <strong>Resource Management</strong>. The user specifies the computation in terms of a series of computation
 steps along with their execution and data dependencies. The Scheduler executes this computation on a cluster
 of computation resources, each step on the best-fit resource and in parallel wherever its possible.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/architecture.png" alt="architecture">
</div>
</div>
<div class="paragraph">
<p>On the top left there is the <strong>Studio</strong> interface which allows you to build Workflows.
It can be interactively configured to address specific domains, for instance Finance, Big Data, IoT, Artificial Intelligence (AI). See for instance the Documentation of <strong>ProActive AI Orchestration</strong> <a href="../PAIO/PAIOUserGuide.html" target="_blank" rel="noopener">here</a>, and try it online <a href="https://try.activeeon.com/studio#presets/1" target="_blank" rel="noopener">here</a>. In the middle there is the <strong>Scheduler</strong> which enables an enterprise to orchestrate and automate Multi-users, Multi-application Jobs.
Finally, at the bottom right is the <strong>Resource manager</strong> interface which manages and automates resource provisioning
on any Public Cloud, on any virtualization software, on any container system, and on any Physical Machine of any OS.
All the components you see come with fully Open and modern REST APIs.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/workflow-execution.png" alt="workflow execution">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Workflow Execution Portal</strong>, which is the main portal of ProActive Workflows &amp; Scheduling and the entry point for end-users to submit workflows manually, monitor their executions and access job outputs, results, services endpoints, etc.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/automation-dashboard-catalog.png" alt="automation dashboard catalog">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Catalog Portal</strong>, where one can store Workflows, Calendars, Scripts, etc.
Powerful versioning together with full access control (RBAC) is supported, and users can share easily Workflows and templates between teams, and various environments (Dev, Test, Staging and Prod).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/job-planner.png" alt="job planner">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Job Planner Portal</strong>, allowing to automate and schedule recurring Jobs.
From left to right, you can define and use <strong>Calendar Definitions</strong> , associate <strong>Workflows</strong> to calendars, visualize the <strong>execution planning</strong> for the future, as well as actual executions of the past.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/calendar_planning_gantt.png" alt="calendar planning gantt">
</div>
</div>
<div class="paragraph">
<p>The Gantt screenshot above shows the <strong>Gantt View</strong> of Job Planner, featuring past job history, current Job being executed, and future Jobs that will be submitted, all in a comprehensive interactive view.
You easily see the potential differences between Planned Submission Time and Actual Start Time of the Jobs, get estimations of the Finished Time, visualize the Job that stayed PENDING for some time (in Yellow) and the Jobs that had issues and got KILLED, CANCELLED, or FAILED (in red).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/health-dashboard1.png" alt="health dashboard1">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/health-dashboard2.png" alt="health dashboard2">
</div>
</div>
<div class="paragraph">
<p>The screenshots above show the <strong>Health Dashboard Portal</strong>, which is a part of the Analytics service, that displays global statistics and current state of the ProActive server. Using this portal, users can monitor the status of critical resources, detect issues, and take proactive measures to ensure the efficient operation of workflows and services.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/job-analytics.png" alt="job analytics">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Job Analytics Portal</strong>, which is a ProActive component, part of the Analytics service, that provides an overview of executed workflows along with their input variables and results.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/automation-dashboard-cloud-watch.PNG" alt="automation dashboard cloud watch">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Event Orchestration Portal</strong>, where a user can manage and benefit from <strong>Event Orchestration</strong> - smart monitoring system. This ProActive component detects complex events and then triggers user-specified actions according to predefined set of rules.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/cloud-automation-on-demand-paas.png" alt="cloud automation on demand paas">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Service Automation Portal</strong> which is actually a PaaS automation tool. It allows you to easily manage any On-Demand Services with full Life-Cycle Management (create, deploy, suspend, resume and terminate).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/scalable-elastic-resources.png" alt="scalable elastic resources">
</div>
</div>
<div class="paragraph">
<p>The screenshots above taken from the <strong>Resource Manager Portal</strong> shows that you can configure ProActive Scheduler to <strong>dynamically scale up and down</strong> the infrastructure being used (e.g. the number of VMs you buy on Clouds) according to the actual workload to execute.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/notifications.png" alt="notifications">
</div>
</div>
<div class="paragraph">
<p>The screenshot above shows the <strong>Notifications Portal</strong>, which is a ProActive component that allows a user or a group of users to subscribe to different types of notifications (web, email, sms or a third-party notification) when certain event(s) occur (e.g., job In-Error state, job in Finished state, scheduler in Paused state, etc.).</p>
</div>
<div class="paragraph">
<p>The administration guide covers cluster setup and cluster administration. Cluster setup includes two main steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The installation and configuration of the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>.</p>
</li>
<li>
<p>The set up of <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_glossary"><a class="anchor" href="ProActiveAdminGuide.html#_glossary"></a><a class="link" href="ProActiveAdminGuide.html#_glossary">1.1. Glossary</a></h3>
<div class="paragraph">
<p>The following terms are used throughout the documentation:</p>
</div>
<div id="_glossary_proactive_workflows_scheduling" class="dlist">
<dl>
<dt class="hdlist1">ProActive Workflows &amp; Scheduling</dt>
<dd>
<p>The full distribution of ProActive for Workflows &amp; Scheduling, it contains the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>
 server, the
REST &amp; Web interfaces, the command line tools. It is the commercial product name.</p>
</dd>
</dl>
</div>
<div id="_glossary_proactive_scheduler" class="dlist">
<dl>
<dt class="hdlist1">ProActive Scheduler</dt>
<dd>
<p>Can refer to any of the following:</p>
<div class="ulist">
<ul>
<li>
<p>A complete set of ProActive components.</p>
</li>
<li>
<p>An archive that contains a released version of ProActive components, for example <code>activeeon_enterprise-pca_server-OS-ARCH-VERSION.zip</code>.</p>
</li>
<li>
<p>A set of server-side ProActive components installed and running on a <a href="ProActiveAdminGuide.html#_glossary_server_host"><strong>Server Host</strong></a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="_glossary_resource_manager" class="dlist">
<dl>
<dt class="hdlist1">Resource Manager</dt>
<dd>
<p>ProActive component that manages <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> running on <a href="ProActiveAdminGuide.html#_glossary_compute_host"><strong>Compute Hosts</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_scheduler" class="dlist">
<dl>
<dt class="hdlist1">Scheduler</dt>
<dd>
<p>ProActive component that accepts <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a> from users, orders the constituent <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Tasks</strong></a> according to priority and resource availability, and eventually executes them on the resources (<a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a>) provided by the <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please note the difference between <strong>Scheduler</strong> and <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>.
</td>
</tr>
</table>
</div>
<div id="_glossary_rest_api" class="dlist">
<dl>
<dt class="hdlist1">REST API</dt>
<dd>
<p>ProActive component that provides RESTful API for the <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>, the <a href="ProActiveAdminGuide.html#_glossary_scheduler"><strong>Scheduler</strong></a> and the <a href="ProActiveAdminGuide.html#_glossary_catalog"><strong>Catalog</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_rm_web_interface" class="dlist">
<dl>
<dt class="hdlist1">Resource Manager Portal</dt>
<dd>
<p>ProActive component that provides a web interface to the <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>. Also called Resource Manager portal.</p>
</dd>
</dl>
</div>
<div id="_glossary_scheduler_web_interface" class="dlist">
<dl>
<dt class="hdlist1">Scheduler Portal</dt>
<dd>
<p>ProActive component that provides a web interface to the <a href="ProActiveAdminGuide.html#_glossary_scheduler"><strong>Scheduler</strong></a>. Also called Scheduler portal.</p>
</dd>
</dl>
</div>
<div id="_glossary_workflow_studio" class="dlist">
<dl>
<dt class="hdlist1">Workflow Studio</dt>
<dd>
<p>ProActive component that provides a web interface for designing <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_automation_dashboard" class="dlist">
<dl>
<dt class="hdlist1">Automation Dashboard</dt>
<dd>
<p>Centralized interface for the following web portals: <a href="ProActiveAdminGuide.html#_glossary_workflow_automation_portal"><strong>Workflow Execution</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_catalog_portal"><strong>Catalog</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_analytics_portal"><strong>Analytics</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_job_planner_portal"><strong>Job Planner</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_service_automation_portal"><strong>Service Automation</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_event_orchestration_portal"><strong>Event Orchestration</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_notification_portal"><strong>Notifications</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_analytics" class="dlist">
<dl>
<dt class="hdlist1">Analytics</dt>
<dd>
<p>Web interface and ProActive component, responsible to gather monitoring information for <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a></p>
</dd>
</dl>
</div>
<div id="_glossary_job_analytics" class="dlist">
<dl>
<dt class="hdlist1">Job Analytics</dt>
<dd>
<p>ProActive component, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics"><strong>Analytics</strong></a> service, that provides an overview of executed workflows along with their input variables and results.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_gantt" class="dlist">
<dl>
<dt class="hdlist1">Job Gantt</dt>
<dd>
<p>ProActive component, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics"><strong>Analytics</strong></a> service, that builds a <em>Gantt diagram</em> of past <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a> executions.</p>
</dd>
</dl>
</div>
<div id="_glossary_node_gantt" class="dlist">
<dl>
<dt class="hdlist1">Node Gantt</dt>
<dd>
<p>ProActive component, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics"><strong>Analytics</strong></a> service, that provides an overview of <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> usage over time.</p>
</dd>
</dl>
</div>
<div id="_glossary_health_dashboard" class="dlist">
<dl>
<dt class="hdlist1">Health Dashboard</dt>
<dd>
<p>Web interface, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics"><strong>Analytics</strong></a> service, that displays global statistics and current state of the ProActive server.</p>
</dd>
</dl>
</div>
<div id="_glossary_analytics_portal" class="dlist">
<dl>
<dt class="hdlist1">Job Analytics portal</dt>
<dd>
<p>Web interface of the <a href="ProActiveAdminGuide.html#_glossary_job_analytics"><strong>Analytics</strong></a> component.</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_service" class="dlist">
<dl>
<dt class="hdlist1">Notification Service</dt>
<dd>
<p>ProActive component that allows a user or a group of users to subscribe to different types of notifications (web, email, sms or a third-party notification) when certain event(s) occur (e.g., job In-Error state, job in Finished state, scheduler in Paused state, etc.).</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_portal" class="dlist">
<dl>
<dt class="hdlist1">Notification portal</dt>
<dd>
<p>Web interface to visualize notifications generated by the <a href="ProActiveAdminGuide.html#_glossary_notification_service"><strong>Notification Service</strong></a> and manage subscriptions.</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_subscription" class="dlist">
<dl>
<dt class="hdlist1">Notification Subscription</dt>
<dd>
<p>In <a href="ProActiveAdminGuide.html#_glossary_notification_service"><strong>Notification Service</strong></a>, a subscription is a <em>per-user</em> configuration to receive notifications for a particular type of events.</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_third_party" class="dlist">
<dl>
<dt class="hdlist1">Third Party Notification</dt>
<dd>
<p>A <a href="ProActiveAdminGuide.html#_glossary_notification_methods"><strong>Notification Method</strong></a> which executes a script when the notification is triggered.</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_methods" class="dlist">
<dl>
<dt class="hdlist1">Notification Method</dt>
<dd>
<p>Element of a <a href="ProActiveAdminGuide.html#_glossary_notification_subscription"><strong>Notification Subscription</strong></a> which defines how a user is notified (portal, email, third-party, etc.).</p>
</dd>
</dl>
</div>
<div id="_glossary_notification_channel" class="dlist">
<dl>
<dt class="hdlist1">Notification Channel</dt>
<dd>
<p>In the <a href="ProActiveAdminGuide.html#_glossary_notification_service"><strong>Notification Service</strong></a>, a channel is a notification container that can be notified and displays notifications to groups of users</p>
</dd>
</dl>
</div>
<div id="_glossary_cloud_automation_service" class="dlist">
<dl>
<dt class="hdlist1">Service Automation</dt>
<dd>
<p>ProActive component that allows a user to easily manage any On-Demand Services (PaaS, IaaS and MaaS) with full Life-Cycle Management (create, deploy, pause, resume and terminate).</p>
</dd>
</dl>
</div>
<div id="_glossary_service_automation_portal" class="dlist">
<dl>
<dt class="hdlist1">Service Automation portal</dt>
<dd>
<p>Web interface of the <a href="ProActiveAdminGuide.html#_glossary_cloud_automation_service"><strong>Service Automation</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_workflow_automation_portal" class="dlist">
<dl>
<dt class="hdlist1">Workflow Execution portal</dt>
<dd>
<p>Web interface, is the main portal of ProActive Workflows &amp; Scheduling and the entry point for end-users to submit workflows manually, monitor their executions and access job outputs, results, services endpoints, etc.</p>
</dd>
</dl>
</div>
<div id="_glossary_catalog" class="dlist">
<dl>
<dt class="hdlist1">Catalog</dt>
<dd>
<p>ProActive component that provides storage and versioning of <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> and other ProActive Objects. It is also possible to query the Catalog for specific <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> through a REST API and also with Graphql API.</p>
</dd>
</dl>
</div>
<div id="_glossary_catalog_portal" class="dlist">
<dl>
<dt class="hdlist1">Catalog portal</dt>
<dd>
<p>Web interface of the <a href="ProActiveAdminGuide.html#_glossary_catalog"><strong>Catalog</strong></a> component.</p>
</dd>
</dl>
</div>
<div id="_glossary_cloud_watch" class="dlist">
<dl>
<dt class="hdlist1">Event Orchestration</dt>
<dd>
<p>ProActive component that monitors a system, according to predefined set of rules, detects complex events and then triggers user-specified actions.</p>
</dd>
</dl>
</div>
<div id="_glossary_event_orchestration_portal" class="dlist">
<dl>
<dt class="hdlist1">Event Orchestration portal</dt>
<dd>
<p>Web interface of the <a href="ProActiveAdminGuide.html#_glossary_cloud_watch"><strong>Event Orchestration</strong></a> component.</p>
</dd>
</dl>
</div>
<div id="_glossary_scheduling_api" class="dlist">
<dl>
<dt class="hdlist1">Scheduling API</dt>
<dd>
<p>ProActive component that offers a GraphQL endpoint for getting information about a ProActive Scheduler instance.</p>
</dd>
</dl>
</div>
<div id="_glossary_connector_iaas" class="dlist">
<dl>
<dt class="hdlist1">Connector IaaS</dt>
<dd>
<p>ProActive component that enables to do CRUD operations on different infrastructures on public or private Cloud (AWS EC2, Openstack, VMWare, Kubernetes, etc).</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner" class="dlist">
<dl>
<dt class="hdlist1">Job Planner</dt>
<dd>
<p>ProActive component providing advanced scheduling options for <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner_portal" class="dlist">
<dl>
<dt class="hdlist1">Job Planner portal</dt>
<dd>
<p>Web interface to manage the <a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a> service.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner_calendar_definition_portal" class="dlist">
<dl>
<dt class="hdlist1">Calendar Definition portal</dt>
<dd>
<p>Web interface, component of the <a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a> that allows to create <a href="ProActiveAdminGuide.html#_glossary_calendars_definition"><strong>Calendar Definitions</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner_calendar_asssociation" class="dlist">
<dl>
<dt class="hdlist1">Calendar Association portal</dt>
<dd>
<p>Web interface, component of the <a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a> that defines <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> associated to <a href="ProActiveAdminGuide.html#_glossary_calendars_definition"><strong>Calendar Definitions</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner_execution_planning" class="dlist">
<dl>
<dt class="hdlist1">Execution Planning portal</dt>
<dd>
<p>Web interface, component of the <a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a> that allows to see future executions per calendar.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_planner_gantt_chart" class="dlist">
<dl>
<dt class="hdlist1">Job Planner Gantt portal</dt>
<dd>
<p>Web interface, component of the <a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a> that allows to see past and future executions on a Gantt diagram.</p>
</dd>
</dl>
</div>
<div id="_glossary_workflow_bucket" class="dlist">
<dl>
<dt class="hdlist1">Bucket</dt>
<dd>
<p>ProActive notion used with the <a href="ProActiveAdminGuide.html#_glossary_catalog"><strong>Catalog</strong></a> to refer to a specific collection of ProActive Objects and in particular ProActive Workflows.</p>
</dd>
</dl>
</div>
<div id="_glossary_server_host" class="dlist">
<dl>
<dt class="hdlist1">Server Host</dt>
<dd>
<p>The machine on which <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> is installed.</p>
</dd>
<dt class="hdlist1"><code>SCHEDULER_ADDRESS</code></dt>
<dd>
<p>The IP address of the <a href="ProActiveAdminGuide.html#_glossary_server_host"><strong>Server Host</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_proactive_node" class="dlist">
<dl>
<dt class="hdlist1">ProActive Node</dt>
<dd>
<p>One <strong>ProActive Node</strong> can execute one <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Task</strong></a> at a time. This concept is often tied to the number of cores
available on a <a href="ProActiveAdminGuide.html#_glossary_compute_host"><strong>Compute Host</strong></a>. We assume a task consumes one core (more is possible, see
<a href="../user/ProActiveUserGuide.html#_multi_node_task">multi-nodes tasks</a>), so on a 4 cores machines you might want to run 4 ProActive Nodes.
One (by default) or more ProActive Nodes can be executed in a Java process on the <a href="ProActiveAdminGuide.html#_glossary_compute_host"><strong>Compute Hosts</strong></a> and
will communicate with the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> to execute tasks. We distinguish two types of <strong>ProActive Nodes</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Server</strong> ProActive Nodes: Nodes that are running in the same host as ProActive server;</p>
</li>
<li>
<p><strong>Remote</strong> ProActive Nodes: Nodes that are running on machines other than ProActive Server.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="_glossary_compute_host" class="dlist">
<dl>
<dt class="hdlist1">Compute Host</dt>
<dd>
<p>Any machine which is meant to provide computational resources to be managed by the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>. One or more <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> need to be running on the machine for it to be managed by the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Examples of <strong>Compute Hosts</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All machines of a cluster managed by <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>, except <a href="ProActiveAdminGuide.html#_glossary_server_host"><strong>Server Host</strong></a>.</p>
</li>
<li>
<p>All desktop machines in an organisation that have <a href="ProActiveAdminGuide.html#_glossary_proactive_agent"><strong>ProActive Agents</strong></a> installed.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div id="_glossary_node_source" class="dlist">
<dl>
<dt class="hdlist1">Node Source</dt>
<dd>
<p>A set of <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> deployed using the same deployment mechanism and sharing the same access policy.</p>
</dd>
</dl>
</div>
<div id="_glossary_node_source_infrastructure" class="dlist">
<dl>
<dt class="hdlist1">Node Source Infrastructure</dt>
<dd>
<p>The configuration attached to a <a href="ProActiveAdminGuide.html#_glossary_node_source"><strong>Node Source</strong></a> which defines the deployment mechanism used to deploy <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_node_source_policy" class="dlist">
<dl>
<dt class="hdlist1">Node Source Policy</dt>
<dd>
<p>The configuration attached to a <a href="ProActiveAdminGuide.html#_glossary_node_source"><strong>Node Source</strong></a> which defines the <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> acquisition and access policies.</p>
</dd>
</dl>
</div>
<div id="_glossary_scheduling_policy" class="dlist">
<dl>
<dt class="hdlist1">Scheduling Policy</dt>
<dd>
<p>The policy used by the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> to determine how <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Tasks</strong></a> are scheduled.</p>
</dd>
<dt class="hdlist1"><code>PROACTIVE_HOME</code></dt>
<dd>
<p>The path to the extracted archive of <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> release, either on the <a href="ProActiveAdminGuide.html#_glossary_server_host"><strong>Server Host</strong></a> or on a <a href="ProActiveAdminGuide.html#_glossary_compute_host"><strong>Compute Host</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_workflow" class="dlist">
<dl>
<dt class="hdlist1">Workflow</dt>
<dd>
<p>User-defined representation of a distributed computation. Consists of the definitions of one or more <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Tasks</strong></a> and their dependencies.</p>
</dd>
</dl>
</div>
<div id="_glossary_workflow_revision" class="dlist">
<dl>
<dt class="hdlist1">Workflow Revision</dt>
<dd>
<p>ProActive concept that reflects the changes made on a <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflow</strong></a> during it development. Generally speaking, the term <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflow</strong></a> is used to refer to the latest version of a <a href="ProActiveAdminGuide.html#_glossary_workflow_revision"><strong>Workflow Revision</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_generic_information" class="dlist">
<dl>
<dt class="hdlist1">Generic Information</dt>
<dd>
<p>Are additional information which are attached to <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> or <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Tasks</strong></a>. See <a href="../user/ProActiveUserGuide.html#_generic_information"><strong>generic information</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_calendars_definition" class="dlist">
<dl>
<dt class="hdlist1">Calendar Definition</dt>
<dd>
<p>Is a json object attached by adding it to the <a href="ProActiveAdminGuide.html#_glossary_generic_information"><strong>Generic Information</strong></a>
of a <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflow</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job" class="dlist">
<dl>
<dt class="hdlist1">Job</dt>
<dd>
<p>An instance of a <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflow</strong></a> submitted to the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>. Sometimes also used as a synonym for <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflow</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_id" class="dlist">
<dl>
<dt class="hdlist1">Job Id</dt>
<dd>
<p>An integer identifier which uniquely represents a Job inside the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_job_icon" class="dlist">
<dl>
<dt class="hdlist1">Job Icon</dt>
<dd>
<p>An icon representing the Job and displayed in portals. The Job Icon is defined by the Generic Information <strong>workflow.icon</strong>.</p>
</dd>
</dl>
</div>
<div id="_glossary_task" class="dlist">
<dl>
<dt class="hdlist1">Task</dt>
<dd>
<p>A unit of computation handled by <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>. Both <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a> are made of <strong>Tasks</strong>. A Task must define a <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>ProActive Task Executable</strong></a> and can also define <a href="ProActiveAdminGuide.html#_glossary_additional_task_scripts">additional task scripts</a></p>
</dd>
</dl>
</div>
<div id="_glossary_task_id" class="dlist">
<dl>
<dt class="hdlist1">Task Id</dt>
<dd>
<p>An integer identifier which uniquely represents a Task inside a Job <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>. Task ids are only unique inside a given Job.</p>
</dd>
</dl>
</div>
<div id="_glossary_task_executable" class="dlist">
<dl>
<dt class="hdlist1">Task Executable</dt>
<dd>
<p>The main executable definition of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a>. A Task Executable can either be a <a href="ProActiveAdminGuide.html#_glossary_task_executable_script"><strong>Script Task</strong></a>, a <a href="ProActiveAdminGuide.html#_glossary_task_executable_java"><strong>Java Task</strong></a> or a <a href="ProActiveAdminGuide.html#_glossary_task_executable_native"><strong>Native Task</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_task_executable_script" class="dlist">
<dl>
<dt class="hdlist1">Script Task</dt>
<dd>
<p>A <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a> defined as a script execution.</p>
</dd>
</dl>
</div>
<div id="_glossary_task_executable_java" class="dlist">
<dl>
<dt class="hdlist1">Java Task</dt>
<dd>
<p>A <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a> defined as a Java class execution.</p>
</dd>
</dl>
</div>
<div id="_glossary_task_executable_native" class="dlist">
<dl>
<dt class="hdlist1">Native Task</dt>
<dd>
<p>A <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a> defined as a native command execution.</p>
</dd>
</dl>
</div>
<div id="_glossary_additional_task_scripts" class="dlist">
<dl>
<dt class="hdlist1">Additional Task Scripts</dt>
<dd>
<p>A collection of scripts part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition which can be used in complement to the main <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a>. Additional Task scripts can either be <a href="ProActiveAdminGuide.html#_glossary_selection_script"><strong>Selection Script</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_fork_environment_script"><strong>Fork Environment Script</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_pre_script"><strong>Pre Script</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_post_script"><strong>Post Script</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_control_flow_script"><strong>Control Flow Script</strong></a> or <a href="ProActiveAdminGuide.html#_glossary_clean_script"><strong>Cleaning Script</strong></a></p>
</dd>
</dl>
</div>
<div id="_glossary_selection_script" class="dlist">
<dl>
<dt class="hdlist1">Selection Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and used to select a specific <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Node</strong></a> to execute a ProActive Task.</p>
</dd>
</dl>
</div>
<div id="_glossary_fork_environment_script" class="dlist">
<dl>
<dt class="hdlist1">Fork Environment Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and run on the <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Node</strong></a> selected to execute the Task. Fork Environment script is used to configure the forked Java Virtual Machine process which executes the task.</p>
</dd>
</dl>
</div>
<div id="_glossary_pre_script" class="dlist">
<dl>
<dt class="hdlist1">Pre Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and run inside the forked Java Virtual Machine, before the <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_post_script" class="dlist">
<dl>
<dt class="hdlist1">Post Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and run inside the forked Java Virtual Machine, after the <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_control_flow_script" class="dlist">
<dl>
<dt class="hdlist1">Control Flow Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and run inside the forked Java Virtual Machine, after the <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a>, to determine control flow actions.</p>
</dd>
</dl>
</div>
<div id="_glossary_control_flow_action" class="dlist">
<dl>
<dt class="hdlist1">Control Flow Action</dt>
<dd>
<p>A dynamic workflow action performed after the execution of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a>. Possible control flow actions are <a href="ProActiveAdminGuide.html#_glossary_control_flow_action_branch"><strong>Branch</strong></a>, <a href="ProActiveAdminGuide.html#_glossary_control_flow_action_loop"><strong>Loop</strong></a> or <a href="ProActiveAdminGuide.html#_glossary_control_flow_action_replicate"><strong>Replicate</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_control_flow_action_branch" class="dlist">
<dl>
<dt class="hdlist1">Branch</dt>
<dd>
<p>A dynamic workflow action performed after the execution of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> similar to an IF/THEN/ELSE structure.</p>
</dd>
</dl>
</div>
<div id="_glossary_control_flow_action_loop" class="dlist">
<dl>
<dt class="hdlist1">Loop</dt>
<dd>
<p>A dynamic workflow action performed after the execution of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> similar to a FOR structure.</p>
</dd>
</dl>
</div>
<div id="_glossary_control_flow_action_replicate" class="dlist">
<dl>
<dt class="hdlist1">Replicate</dt>
<dd>
<p>A dynamic workflow action performed after the execution of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> similar to a PARALLEL FOR structure.</p>
</dd>
</dl>
</div>
<div id="_glossary_clean_script" class="dlist">
<dl>
<dt class="hdlist1">Cleaning Script</dt>
<dd>
<p>A script part of a <a href="ProActiveAdminGuide.html#_glossary_task"><strong>ProActive Task</strong></a> definition and run after the <a href="ProActiveAdminGuide.html#_glossary_task_executable"><strong>Task Executable</strong></a> and before releasing the <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Node</strong></a> to the <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_script_bindings" class="dlist">
<dl>
<dt class="hdlist1">Script Bindings</dt>
<dd>
<p>Named objects which can be used inside a <a href="ProActiveAdminGuide.html#_glossary_task_executable_script"><strong>Script Task</strong></a> or inside <a href="ProActiveAdminGuide.html#_glossary_additional_task_scripts"><strong>Additional Task Scripts</strong></a> and which are automatically defined by the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>. The type of each script binding depends on the script language used.</p>
</dd>
</dl>
</div>
<div id="_glossary_task_icon" class="dlist">
<dl>
<dt class="hdlist1">Task Icon</dt>
<dd>
<p>An icon representing the Task and displayed in the Studio portal. The Task Icon is defined by the Task Generic Information <strong>task.icon</strong>.</p>
</dd>
</dl>
</div>
<div id="_glossary_proactive_agent" class="dlist">
<dl>
<dt class="hdlist1">ProActive Agent</dt>
<dd>
<p>A daemon installed on a <a href="ProActiveAdminGuide.html#_glossary_compute_host"><strong>Compute Host</strong></a> that starts and stops <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> according to a schedule, restarts <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> in case of failure and enforces resource limits for the <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Tasks</strong></a>.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_the_proactive_scheduler"><a class="anchor" href="ProActiveAdminGuide.html#_run_the_proactive_scheduler"></a><a class="link" href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">2. Get Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, <a href="https://www.activeeon.com/community-downloads" target="_blank" rel="noopener">Download</a> ProActive Scheduler and <strong>unzip</strong> the archive. The extracted folder will be referenced as <code>PROACTIVE_HOME</code> in the rest of the documentation.
The archive contains all required dependencies with no extra prerequisites. ProActive Scheduler can be started in two different ways. Either as a java process or as a system service.</p>
</div>
<div class="sect2">
<h3 id="_minimum_requirements"><a class="anchor" href="ProActiveAdminGuide.html#_minimum_requirements"></a><a class="link" href="ProActiveAdminGuide.html#_minimum_requirements">2.1. Minimum requirements</a></h3>
<div class="paragraph">
<p>The minimal hardware requirements for the ProActive server is 4 Cores and 8 GB RAM.</p>
</div>
<div class="paragraph">
<p>ProActive server is compatible with any 64 bits Linux, Windows or Mac operating system. The server process uses at minimum 4 GB of RAM.</p>
</div>
<div class="paragraph">
<p>ProActive Nodes are compatible with any Linux, Windows or Mac systems (both 64 bits and 32 bits versions). ProActive Nodes can also run on some Unix systems (such as Solaris, HP-UX), by installing and using a Java Runtime Environment compatible with these systems.</p>
</div>
<div class="paragraph">
<p>Sizing the ProActive server correctly depends on the number of jobs and tasks executed and submitted per day, the number of nodes connected to the server and the number of concurrent users.</p>
</div>
<div class="paragraph">
<p>A medium-sized ProActive Scheduler installation uses 12 cores, 24 GB RAM. Large setups use 24 cores and 100 GB RAM.</p>
</div>
<div class="paragraph">
<p>Additionally, using local ProActive Nodes (deployed directly inside the ProActive server) or having other services running on the same machine as the server can impact the sizing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_start_proactive_as_a_java_process"><a class="anchor" href="ProActiveAdminGuide.html#_start_proactive_as_a_java_process"></a><a class="link" href="ProActiveAdminGuide.html#_start_proactive_as_a_java_process">2.2. Start ProActive as a Java process</a></h3>
<div class="paragraph">
<p>The first way to start a ProActive Scheduler is by running the <code>proactive-server</code> script. To do so, you can use the following command with no extra configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$PROACTIVE_HOME/bin/proactive-server</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is possible to start the server with a specific number of nodes by adding the <strong>-ln</strong> parameter. For example, PROACTIVE_HOME/bin/proactive-server -ln 1 will start the proactive server with a single node.
In case this parameter is not specified, the number of nodes corresponds to the number of cores of the machine where ProActive server is installed.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>The router created on localhost:33647
Starting the scheduler...
Starting the resource manager...
The resource manager with 4 local nodes created on pnp://localhost:41303/
The scheduler created on pnp://localhost:41303/
The web application /automation-dashboard created on http://localhost:8080/automation-dashboard
The web application /studio created on http://localhost:8080/studio
The web application /job-analytics created on http://localhost:8080/job-analytics
The web application /notification-service created on http://localhost:8080/notification-service
The web application /cloud-automation-service created on http://localhost:8080/cloud-automation-service
The web application /catalog created on http://localhost:8080/catalog
The web application /proactive-cloud-watch created on http://localhost:8080/proactive-cloud-watch
The web application /scheduler created on http://localhost:8080/scheduler
The web application /scheduling-api created on http://localhost:8080/scheduling-api
The web application /connector-iaas created on http://localhost:8080/connector-iaas
The web application /rm created on http://localhost:8080/rm
The web application /rest created on http://localhost:8080/rest
The web application /job-planner created on http://localhost:8080/job-planner
*** Get started at http://localhost:8080 ***</pre>
</div>
</div>
<div class="paragraph">
<p>The following ProActive Scheduler components and services are started:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a></p>
</li>
<li>
<p>4 local <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_scheduler"><strong>Scheduler</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_automation_dashboard"><strong>Automation Dashboard</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_workflow_studio"><strong>Workflow Studio</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_job_analytics"><strong>Job Analytics</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_notification_service"><strong>Notification Service</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_cloud_automation_service"><strong>Service Automation</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_catalog"><strong>Catalog</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_cloud_watch"><strong>Event Orchestration</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_scheduler_web_interface"><strong>Scheduler Web Interface</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_scheduling_api"><strong>Scheduling Api</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_connector_iaas"><strong>Connector IaaS</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_rm_web_interface"><strong>Resource Manager Web Interface</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_rest_api"><strong>REST API</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_glossary_job_planner"><strong>Job Planner</strong></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The URLs of the Scheduler, Resource Manager, REST API and Web Interfaces are displayed in the output.</p>
</div>
<div class="paragraph">
<p>The ProActive server can also be started in a specific state by using the command line options <code>--stopped</code>, <code>--paused</code> or <code>--frozen</code>.</p>
</div>
<div class="paragraph">
<p>When one of these options is used, the scheduler will start in the provided state, which can be changed afterwards using the ProActive Scheduler portal.</p>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_scheduler_life_cycle_management">Scheduler Life-Cycle Management</a> for an explanation of the different scheduler states.</p>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_start_proactive_as_a_system_service"><a class="anchor" href="ProActiveAdminGuide.html#_install_and_start_proactive_as_a_system_service"></a><a class="link" href="ProActiveAdminGuide.html#_install_and_start_proactive_as_a_system_service">2.3. Install and start ProActive as a system service</a></h3>
<div class="paragraph">
<p>The second way to start a ProActive Scheduler is to install it as a system service. Depending on your operating system, the installation of ProActive can be done as follows.</p>
</div>
<div class="sect3">
<h4 id="_how_to_install_proactive_on_windows"><a class="anchor" href="ProActiveAdminGuide.html#_how_to_install_proactive_on_windows"></a><a class="link" href="ProActiveAdminGuide.html#_how_to_install_proactive_on_windows">2.3.1. How to install ProActive on Windows</a></h4>
<div class="paragraph">
<p>Under Windows, it is possible to use the <a href="https://nssm.cc/‎" target="_blank" rel="noopener">nssm</a> service manager tool to manage a running script as a service. You can configure nssm to absolve all responsibility for restarting it and let Windows take care of recovery actions.
In our case, you need to provide to nssm the Path to this script <code>$PROACTIVE_HOME/bin/proactive-server.bat</code> to start ProActive as a service.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_install_proactive_on_linux"><a class="anchor" href="ProActiveAdminGuide.html#_how_to_install_proactive_on_linux"></a><a class="link" href="ProActiveAdminGuide.html#_how_to_install_proactive_on_linux">2.3.2. How to install ProActive on Linux</a></h4>
<div class="paragraph">
<p>Under Linux, the user has to run the <code>install.sh</code> script located under <code>$PROACTIVE_HOME/tools</code> folder as <strong>root</strong> and follow the installations steps provided in an interactive mode.
Generally, it is recommended to keep the default configuration (internal account, protocol used, port , etc) unless you would like to setup a particular one.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ sudo $PROACTIVE_HOME/tools/install.sh
Directory where to install the scheduler: /opt/proactive
Name of the user starting the ProActive service: proactive
Group of the user starting the ProActive service: proactive
ProActive use internal system accounts which should be modified in a production environment.
Do you want to regenerate the internal accounts ? [Y/n] n
ProActive can integrate with Linux PAM (Pluggable Authentication Modules) to authenticate users of the linux system.
Warning: this will add the proactive account to the linux "shadow" group
Do you want to set PAM integration for ProActive scheduler? [y/N]  n
Protocol to use for accessing Web apps deployed by the proactive server: [http/https] http
Port to use for accessing Web apps deployed by the proactive server: 8080
Number of ProActive nodes to start on the server machine: 4
The ProActive server can automatically remove from its database old jobs. This feature also remove the associated job logs from the file system.
Do you want to enable automatic job/node history removal? [Y/n]  y
Remove history older than (in days) [30]: 30
Here are the network interfaces available on your machine and the interface which will be automatically selected by ProActive:
Available interfaces:
Eligible addresses:
/xxx.xxx.xxx.xxx
/127.0.0.1

Elected address : /xxx.xxx.xxx.xxx
Elected address :
Do you want to change the network interface used by the ProActive server? [y/N]  n
Start the proactive-scheduler service at machine startup? [Y/n]  y
Restrict the access to the ProActive installation folder to user proactive? [y/N]  n
Restrict the access to the configuration files containing sensitive information to user proactive? [Y/n]  y
Do you want to start the scheduler service now? [Y/n]  y
If a problem occurs, check output in /var/log/proactive/scheduler</pre>
</div>
</div>
<div class="paragraph">
<p>Once the server is up, ProActive Web Portals are available at <code>http://localhost:8080/</code>. The user can access to any of the four portals using the default credentials: <strong>admin/admin</strong></p>
</div>
<div class="paragraph">
<p>Your ProActive Scheduler is ready to execute <a href="ProActiveAdminGuide.html#_glossary_job"><strong>Jobs</strong></a>!</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_upgrade_proactive_on_linux"><a class="anchor" href="ProActiveAdminGuide.html#_how_to_upgrade_proactive_on_linux"></a><a class="link" href="ProActiveAdminGuide.html#_how_to_upgrade_proactive_on_linux">2.3.3. How to upgrade ProActive on Linux</a></h4>
<div class="paragraph">
<p>Before you upgrade to a new version of ProActive (ex 10.0), you first need to back up the configuration and data that you want to restore (DB, workflows, etc) from the old ProActive installation (ex 8.4). Basically, you have to back up the content of the following folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$PROACTIVE_HOME/data</code> which contains all databases (scheduler, catalog, rm) and workflows of the different users.</p>
</li>
<li>
<p><code>$PROACTIVE_HOME/config</code> which contains configuration files required to setup the server initial settings, define the network properties, manage the authentication, internal accounts, access permissions, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To upgrade ProActive, the user has to run the <code>install.sh</code> script located under <code>$PROACTIVE_HOME/tools</code> folder as <strong>root</strong> and follow the installations steps provided in an interactive mode.
It is important to mention that the user has to choose the same directory as the old version where to make the ProActive Scheduler installation. This will enable the detection of the existing installation and then copying addons, data files and the configuration changes from the previous installation to the new one.
In some cases, this operation can induce some conflicts that can be solved easily using Git tools.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ sudo $PROACTIVE_HOME/tools/install.sh
This will install the ProActive scheduler 10.1.0-SNAPSHOT as a service.
Once the installer is started, it must process until the end otherwise the installation may be corrupted.
Do you want to continue? [Y/n]  y
Directory where to install the scheduler: /opt/proactive
Previous installation was owned by user proactive with group proactive
Detected an existing ProActive Scheduler installation at /opt/proactive/8.4
Copying addons and data files from the previous installation...
Do you want to port all configuration changes to the new version (do not do this from a version prior to 8.4.0 before executing the patch)? [Y/n]  y
Porting configuration into new installation...
[master 61aaa19] Commit all changes before switching from 8.4 to 10.1
 4 files changed, 8 insertions(+), 8 deletions(-)
warning: no common commits
Depuis /opt/proactive/8.4/
 * [nouvelle branche] master     -&gt; old-version/master

Cherry-picking all changes to new installation
Here is the list of JAR files in the new installation 'addons' folder.
If there are duplicates, you need to manually remove outdated versions.
Restrict the access to the ProActive installation folder to user proactive? [y/N]  n
Restrict the access to the configuration files containing sensitive information to user proactive? [Y/n]  y
Resource Manager credentials are used by remote ProActive Agents to register to the scheduler.
Do you want to start the scheduler service now? [Y/n]  y
If a problem occurs, check output in /var/log/proactive/scheduler</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Once the upgrade is performed and the new version started for the first time, the ProActive server will upgrade <a href="ProActiveAdminGuide.html#_glossary_catalog">Catalog</a> objects to the new version. This procedure ensures that any object modified manually by a user will not be upgraded.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_start_proactive_using_docker_containers"><a class="anchor" href="ProActiveAdminGuide.html#_install_and_start_proactive_using_docker_containers"></a><a class="link" href="ProActiveAdminGuide.html#_install_and_start_proactive_using_docker_containers">2.4. Install and Start ProActive using Docker Containers</a></h3>
<div class="paragraph">
<p>ProActive could be easily deployed and started within a fully containerized environment. For this purpose, we provide a ready-to-use Docker Compose configuration that enables you running ProActive Workflows and Scheduling as a containerized service.
It starts the following services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ProActive Server container</p>
</li>
<li>
<p>ProActive Node container</p>
</li>
<li>
<p>ProActive Database container (PostgreSQL or MySQL). The Database container is not started when using our embedded HSQL Database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Docker Compose configuration pulls the ProActive server, Node, and Database images from the <a href="https://dockerhub.activeeon.com/" target="_blank" rel="noopener">Private Activeeon Docker Registry</a>.</p>
</div>
<div class="paragraph">
<p>These images can be used out of the box, on any operating system. You can customize the server, Nodes, and Database settings, located in the <code>.env</code> file according to your requirements.</p>
</div>
<div class="paragraph">
<p>To be able to access the <a href="https://dockerhub.activeeon.com/" target="_blank" rel="noopener">Private Activeeon Docker Registry</a>, a ProActive enterprise licence and access credentials are required.
Please contact us at <a href="mailto:contact@activeeon.com">contact@activeeon.com</a> to request access.</p>
</div>
<div class="paragraph">
<p>Here are the installation steps you need to follow in order to have ProActive running in a fully containerized environment:</p>
</div>
<div class="sect3">
<h4 id="_configure_the_environment"><a class="anchor" href="ProActiveAdminGuide.html#_configure_the_environment"></a><a class="link" href="ProActiveAdminGuide.html#_configure_the_environment">2.4.1. Configure the environment</a></h4>
<div class="paragraph">
<p>You need first to create and configure the Docker Compose environment file <code>.env</code>.</p>
</div>
<div class="listingblock">
<div class="title">.env</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># Public Host IP Address
HOST_ADDRESS=XX.XX.XX.XX
# Turn it on if the host OS is Mac
HOST_OS_MAC=off
# Release version, it could be 'dev', 'trial' or 'enterprise'
RELEASE=enterprise
# ProActive version to be deployed
PROACTIVE_VERSION=12.0.0
# Protocol to use for accessing Web apps deployed by the ProActive server
PROTOCOL=https
# Port to use for accessing Web apps deployed by the ProActive server
PORT=8443
# Port to use for PARM communication
PAMR_PORT=33647
# Remove history older than (in days), 30 days by default
JOB_CLEANUP_DAYS=30
# User starting the ProActive service
UID=1000
GID=1000
USER_NAME=activeeon
GROUP_NAME=activeeon
# Required to run docker in docker on Linux, look at /etc/group or run 'getent group docker | cut -d: -f3' to get the host docker gid
DOCKER_GID=115
# Number of ProActive Nodes to start on the server machine
PROACTIVE_WORKER_NODES=7
# ProActive admin password
PROACTIVE_ADMIN_PASSWORD=activeeon
# External ProActive db credentials, used only for PostgreSQL and MySQL compose configurations
POSTGRES_PASSWORD=change_me
MYSQL_ROOT_PASSWORD=change_me
DB_RM_PASS=change_me
DB_SCHEDULER_PASS=change_me
DB_CATALOG_PASS=change_me
DB_PCA_PASS=change_me
DB_NOTIFICATION_PASS=change_me</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_define_and_configure_proactive_containers"><a class="anchor" href="ProActiveAdminGuide.html#_define_and_configure_proactive_containers"></a><a class="link" href="ProActiveAdminGuide.html#_define_and_configure_proactive_containers">2.4.2. Define and configure ProActive containers</a></h4>
<div class="paragraph">
<p>Once you create and configure the <code>.env</code> file, you can select one of the three following Docker Compose configurations to start the ProActive server and Node containers with the desired database.</p>
</div>
<div class="paragraph">
<p>We currently provide support for three Database systems, namely HSQLDB, PostgreSQL, and MySQL.</p>
</div>
<div class="sect4">
<h5 id="_set_up_proactive_using_embedded_hsql_database"><a class="anchor" href="ProActiveAdminGuide.html#_set_up_proactive_using_embedded_hsql_database"></a><a class="link" href="ProActiveAdminGuide.html#_set_up_proactive_using_embedded_hsql_database">Set up ProActive using embedded HSQL Database</a></h5>
<div class="paragraph">
<p>This Docker Compose configuration <code>docker-compose-hsqldb.yml</code> can be used to run the ProActive server container with an embedded HSQL Database.
It will start up to two containers, one for the server and one for the Nodes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">version: '2.1'

services:
  proactive-server:
    restart: on-failure
    image: dockerhub.activeeon.com/${RELEASE}/proactive-scheduler:${PROACTIVE_VERSION}
    extra_hosts:
      - service-node:${HOST_ADDRESS}
    container_name: proactive-server
    networks:
      - pa-network
    ports:
      - ${PORT}:${PORT}
      - ${PAMR_PORT}:${PAMR_PORT}
    env_file:
      - .env
    environment:
      - PROTOCOL
      - PORT
    volumes:
      - proactive-default:/opt/proactive/server/default
      - proactive-previous:/opt/proactive/server/previous
    healthcheck:
        test: ["CMD", "curl", "-k", "-f", "${PROTOCOL}://proactive-server:${PORT}"]
        interval: 30s
        timeout: 10s
        retries: 30

  proactive-node:
    image: dockerhub.activeeon.com/${RELEASE}/proactive-node:${PROACTIVE_VERSION}
    hostname: service-node
    container_name: proactive-node
    networks:
      - pa-network
    env_file:
      - .env
    # enable DOCKER_HOST on Windows machine when you want to run docker-in-docker
    #environment:
    #    - DOCKER_HOST=tcp://host.docker.internal:2375
    volumes:
      - /tmp
      - /var/run/docker.sock:/var/run/docker.sock:rw
      - node-default:/opt/proactive/node/default
      - node-previous:/opt/proactive/node/previous
    depends_on:
      proactive-server:
        condition: service_healthy

volumes:
  proactive-default:
  proactive-previous:
  node-default:
  node-previous:

networks:
  pa-network:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_set_up_proactive_using_postgresql_database"><a class="anchor" href="ProActiveAdminGuide.html#_set_up_proactive_using_postgresql_database"></a><a class="link" href="ProActiveAdminGuide.html#_set_up_proactive_using_postgresql_database">Set up ProActive using PostgreSQL Database</a></h5>
<div class="paragraph">
<p>This Docker Compose configuration <code>docker-compose-postgres.yml</code> can be used to run the ProActive server container with an external PostgreSQL Database container.
It will start up to three containers, one for the server, one for the Nodes, and one for the Database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">version: '2.1'

services:
  proactive-server:
    restart: on-failure
    image: dockerhub.activeeon.com/${RELEASE}/proactive-scheduler-external-db:${PROACTIVE_VERSION}
    extra_hosts:
      - service-node:${HOST_ADDRESS}
    container_name: proactive-scheduler-external-db
    networks:
      - pa-network
    ports:
      - ${PORT}:${PORT}
      - ${PAMR_PORT}:${PAMR_PORT}
    env_file:
      - .env
    environment:
      - PROTOCOL
      - PORT
      - DB_TYPE=postgres
    volumes:
      - proactive-default:/opt/proactive/server/default
      - proactive-previous:/opt/proactive/server/previous
    depends_on:
      proactive-database:
        condition: service_healthy
    healthcheck:
        test: ["CMD", "curl", "-k", "-f", "${PROTOCOL}://proactive-server:${PORT}"]
        interval: 30s
        timeout: 10s
        retries: 30

  proactive-database:
    restart: on-failure
    image: dockerhub.activeeon.com/${RELEASE}/postgres-pa:12.2
    container_name: proactive-database
    networks:
      - pa-network
    env_file:
      - .env
    volumes:
      - proactive-data:/var/lib/postgresql/data
    ports:
      - 5432:5432
    healthcheck:
        test: ["CMD-SHELL", "pg_isready -U postgres"]
        interval: 10s
        timeout: 5s
        retries: 5

  proactive-node:
    image: dockerhub.activeeon.com/${RELEASE}/proactive-node:${PROACTIVE_VERSION}
    hostname: service-node
    container_name: proactive-node
    networks:
      - pa-network
    env_file:
      - .env
    # enable DOCKER_HOST on Windows machine when you want to run docker-in-docker
    #environment:
    #    - DOCKER_HOST=tcp://host.docker.internal:2375
    volumes:
      - /tmp
      - /var/run/docker.sock:/var/run/docker.sock:rw
      - node-default:/opt/proactive/node/default
      - node-previous:/opt/proactive/node/previous
    depends_on:
      proactive-server:
        condition: service_healthy

volumes:
  proactive-default:
  proactive-previous:
  node-default:
  node-previous:
  proactive-data:

networks:
  pa-network:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_set_up_proactive_using_mysql_database"><a class="anchor" href="ProActiveAdminGuide.html#_set_up_proactive_using_mysql_database"></a><a class="link" href="ProActiveAdminGuide.html#_set_up_proactive_using_mysql_database">Set up ProActive using MySQL Database</a></h5>
<div class="paragraph">
<p>Te Docker Compose configuration <code>docker-compose-mysql.yml</code> can be used to run the ProActive server container with an external MySQL Database container.
It will start up to three containers, one for the server, one for the Nodes, and one for the Database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">version: '2.1'

services:
  proactive-server:
    restart: on-failure
    image: dockerhub.activeeon.com/${RELEASE}/proactive-scheduler-external-db:${PROACTIVE_VERSION}
    extra_hosts:
      - service-node:${HOST_ADDRESS}
    container_name: proactive-scheduler-external-db
    networks:
      - pa-network
    ports:
      - ${PORT}:${PORT}
      - ${PAMR_PORT}:${PAMR_PORT}
    env_file:
      - .env
    environment:
      - PROTOCOL
      - PORT
      - DB_TYPE=mysql
    volumes:
      - proactive-default:/opt/proactive/server/default
      - proactive-previous:/opt/proactive/server/previous
    depends_on:
      proactive-database:
        condition: service_healthy
    healthcheck:
        test: ["CMD", "curl", "-k", "-f", "${PROTOCOL}://proactive-server:${PORT}"]
        interval: 30s
        timeout: 10s
        retries: 30

  proactive-database:
    restart: on-failure
    image: dockerhub.activeeon.com/${RELEASE}/mysql-pa:8.0
    container_name: proactive-database
    networks:
      - pa-network
    env_file:
      - .env
    environment:
      - MYSQL_ROOT_PASSWORD
    volumes:
      - proactive-data:/var/lib/mysql
    ports:
      - 3306:3306
    healthcheck:
        test: [ "CMD", "mysqladmin" ,"ping", "-h", "proactive-database", "-u", "root", "-p${MYSQL_ROOT_PASSWORD}" ]
        interval: 20s
        timeout: 10s
        retries: 10

  proactive-node:
    image: dockerhub.activeeon.com/${RELEASE}/proactive-node:${PROACTIVE_VERSION}
    hostname: service-node
    container_name: proactive-node
    networks:
      - pa-network
    env_file:
      - .env
    # enable DOCKER_HOST on Windows machine when you want to run docker-in-docker
    #environment:
    #    - DOCKER_HOST=tcp://host.docker.internal:2375
    volumes:
      - /tmp
      - /var/run/docker.sock:/var/run/docker.sock:rw
      - node-default:/opt/proactive/node/default
      - node-previous:/opt/proactive/node/previous
    depends_on:
      proactive-server:
        condition: service_healthy

volumes:
  proactive-default:
  proactive-previous:
  node-default:
  node-previous:
  proactive-data:

networks:
  pa-network:</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_start_proactive_using_docker_compose"><a class="anchor" href="ProActiveAdminGuide.html#_start_proactive_using_docker_compose"></a><a class="link" href="ProActiveAdminGuide.html#_start_proactive_using_docker_compose">2.4.3. Start ProActive using Docker Compose</a></h4>
<div class="paragraph">
<p>Login into the Private Activeeon Registry</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker login dockerhub.activeeon.com</pre>
</div>
</div>
<div class="paragraph">
<p>Start ProActive container with a default HSQL Database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker-compose -f docker-compose-hsqldb.yml up -d</pre>
</div>
</div>
<div class="paragraph">
<p>Start ProActive container with a PostgreSQL Database and Node containers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker-compose -f docker-compose-postgres.yml up -d</pre>
</div>
</div>
<div class="paragraph">
<p>Start ProActive container with a MySQL Database and Node containers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker-compose -f docker-compose-mysql.yml up -d</pre>
</div>
</div>
<div class="paragraph">
<p>You should wait for the Node container to start up to make sure that the server, Database and Nodes are up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker logs -f proactive-node</pre>
</div>
</div>
<div class="paragraph">
<p>When all Nodes are up, ProActive Web Portals are available at <code>&lt;PROTOCOL&gt;://&lt;PUBLIC-IP&gt;:&lt;PORT&gt;/</code>. The <code>&lt;PROTOCOL&gt;</code>, <code>&lt;PUBLIC-IP&gt;</code>, and <code>&lt;PORT&gt;</code> are specified in the <code>.env</code> file.</p>
</div>
<div class="paragraph">
<p>The user can access any of the four portals using the default credentials: <code>admin/&lt;PROACTIVE_ADMIN_PASSWORD&gt;</code>. <code>PROACTIVE_ADMIN_PASSWORD</code> is, by default, <code>activeeon</code> but you can customize it as well in the <code>.env</code> file.</p>
</div>
<div class="paragraph">
<p>Your ProActive Scheduler is now running as a set of container services!</p>
</div>
</div>
<div class="sect3">
<h4 id="_upgradedowngradebackup_proactive_using_docker_compose"><a class="anchor" href="ProActiveAdminGuide.html#_upgradedowngradebackup_proactive_using_docker_compose"></a><a class="link" href="ProActiveAdminGuide.html#_upgradedowngradebackup_proactive_using_docker_compose">2.4.4. Upgrade/Downgrade/Backup ProActive using Docker Compose</a></h4>
<div class="paragraph">
<p>ProActive can be easily upgraded using Docker Compose. We support automatic upgrade, downgrade, and backup of ProActive server installations in Docker.
Docker Compose configuration relies on Docker container volumes to host ProActive installation directories. The <code>proactive-default</code> volume hosts the current and default installation. The <code>proactive-previous</code> volume hosts the previous installation after upgrade.
Finally, the <code>proactive-backup</code> volume hosts all previous installtion after multiple upgrades.
In the following, we are going to explain each procedure.</p>
</div>
<div class="sect4">
<h5 id="_proactive_upgrade"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_upgrade"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_upgrade">ProActive Upgrade</a></h5>
<div class="paragraph">
<p>In order to upgrade the ProActive Server to a newer version, you have to edit the <code>.env</code> config file to provide a newer version. The current ProActive version is specified using the <code>PROACTIVE_VERSION</code> option.
For example, you can replace <code>PROACTIVE_VERSION=12.0.0</code> by <code>PROACTIVE_VERSION=12.0.8</code> to get a maintenance release of ProActive. It is also applicable for minor and major release versions.
Now that a newer version is provided, you can restart the container. The new version will be detected and the upgrade process will start at container startup.
In fact, the current version will be automatically placed on the <code>proactive-previous</code> volume and the newer version will be placed on the <code>proactive-default</code> volume and started from there.</p>
</div>
</div>
<div class="sect4">
<h5 id="_proactive_backup"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_backup"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_backup">ProActive Backup</a></h5>
<div class="paragraph">
<p>The backup of previous ProActive versions is also automatic and it is triggered on every upgrade. When a new upgrade is started, the <code>proactive-previous</code> volume is checked and if it is not empty, its content is automatically moved to the backup volume <code>proactive-backup</code>.
Afterwards, the upgrade process starts as previously described.</p>
</div>
</div>
<div class="sect4">
<h5 id="_proactive_downgrade"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_downgrade"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_downgrade">ProActive Downgrade</a></h5>
<div class="paragraph">
<p>Using Docker Compose we also support one-level automatic downgrade of ProActive installations located in <code>proactive-default</code> and <code>proactive-previous</code> volumes.
To do so, you should provide the previous version of ProActive, as it is specified in the <code>proactive-previous</code> volume, to the <code>PROACTIVE_VERSION</code> option in the <code>.env</code> file. This will allow to automatically swap the content of <code>proactive-default</code> and <code>proactive-previous</code> volumes.
ProActive will be then started from the <code>proactive-default</code> volume which will contain the last previous version.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_start_proactive_using_kubernetes"><a class="anchor" href="ProActiveAdminGuide.html#_install_and_start_proactive_using_kubernetes"></a><a class="link" href="ProActiveAdminGuide.html#_install_and_start_proactive_using_kubernetes">2.5. Install and Start ProActive using Kubernetes</a></h3>
<div class="paragraph">
<p>ProActive could be easily deployed and started in a Kubernetes cluster. For this purpose, we provide a ready-to-use Kubernetes configuration that enables you running ProActive Workflows and Scheduling as a set of Pods.
It starts the following Pods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ProActive Server Pod</p>
</li>
<li>
<p>ProActive Node Pod</p>
</li>
<li>
<p>ProActive Database Pod (PostgreSQL or MySQL). The Database Pod is not started when using an embedded HSQL Database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Kubernetes YAML configuration pulls the ProActive Server, Node, and Database images from the <a href="https://dockerhub.activeeon.com/" target="_blank" rel="noopener">Private Activeeon Docker Registry</a>.</p>
</div>
<div class="paragraph">
<p>To be able to pull images from the <a href="https://dockerhub.activeeon.com/" target="_blank" rel="noopener">Private Activeeon Docker Registry</a>, a ProActive enterprise licence and access credentials are required. Please contact us at <a href="mailto:contact@activeeon.com">contact@activeeon.com</a> to request access.</p>
</div>
<div class="paragraph">
<p>Here are the installation steps you need to follow in order to have ProActive running in a Kubernetes cluster:</p>
</div>
<div class="sect3">
<h4 id="_set_up_proactive_pods_using_helm"><a class="anchor" href="ProActiveAdminGuide.html#_set_up_proactive_pods_using_helm"></a><a class="link" href="ProActiveAdminGuide.html#_set_up_proactive_pods_using_helm">2.5.1. Set up ProActive Pods using Helm</a></h4>
<div class="paragraph">
<p><a href="https://helm.sh" target="_blank" rel="noopener">Helm</a> is a Kubernetes deployment tool for automating creation, packaging, configuration, and deployment of applications and services to Kubernetes clusters.</p>
</div>
<div class="paragraph">
<p>ProActive uses Helm Charts (i.e., Helm package definition) to create and configure the kubernetes deployments. Thus, <a href="https://helm.sh" target="_blank" rel="noopener">Helm</a> must be pre-installed in order to deploy the ProActive Pods.</p>
</div>
<div class="paragraph">
<p>Please refer to Helm&#8217;s <a href="https://helm.sh/docs/" target="_blank" rel="noopener">documentation</a> to get started.</p>
</div>
<div class="paragraph">
<p>Once Helm is set up properly, add the remote repo as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm repo add activeeon https://www.activeeon.com/public_content/k8s-activeeon-helm</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then run <code>helm search repo activeeon</code> to search for the local <code>activeeon</code> Helm repository. You can also access to the Chart on the public Helm hub: <a href="https://artifacthub.io/packages/helm/activeeon-proactive-scheduler/activeeon-proactive-chart" target="_blank" rel="noopener">Artifact Hub</a>.</p>
</div>
<div class="paragraph">
<p>The next step is to configure the <code>activeeon</code> Chart by setting up the right configuration in the <code>values.yml</code> file of the Chart. This file, which is included in the Chart, has the following structure:</p>
</div>
<div class="paragraph">
<p><a href="https://trydev2.activeeon.com/doc/admin/references/kubernetes/values.yml" title="Click to donwload">Kubernetes configuration file</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Default values for activeeon-proactive-chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your ProActive templates.

# Public Kubernetes Cluster IP
publicClusterIp: &amp;publicClusterIp XX.XX.XX.XX
# Protocol http or https to use to access ProActive Server (default: http)
protocol: http
# ProActive admin password
proactiveAdminPassword: activeeon
# Number of days before jobs cleanup (default: 30)
housekeepingDays: 30

ports:
  # Port to use to access ProActive Server (default: 8080)
  httpPort: &amp;httpPort 8080
  # Port to use for PARM communication (default: 33647)
  pamrPort: &amp;pamrPort 33647

persistentVolumes:
  # Persistent volumes to host the Scheduler configuration
  scheduler:
    default:
      storage: 10Gi
      path: /opt/proactive/server/default
      accessModes: ReadWriteOnce
    previous:
      storage: 10Gi
      path: /opt/proactive/server/previous
      accessModes: ReadWriteOnce
  # Persistent volumes to host the Nodes configuration
  node:
    default:
      storage: 5Gi
      path: /opt/proactive/node/default
      accessModes: ReadWriteOnce
    previous:
      storage: 5Gi
      path: /opt/proactive/node/previous
      accessModes: ReadWriteOnce
  # Persistent volumes to host the DB configuration
  db:
    default:
      storage: 10Gi
      path: /opt/proactive/db/data
      accessModes: ReadWriteOnce

services:
  scheduler:
    # Scheduler Service to access the ProActive Web portals
    webService:
      name: http
      protocol: TCP
      port: *httpPort
      targetPort: *httpPort
      externalIPs: *publicClusterIp
      type: LoadBalancer
    # Scheduler Service for Scheduler to Nodes communication
    pamrService:
      name: pamr
      protocol: TCP
      port: *pamrPort
      type: LoadBalancer
  node:
    # Node Service to access PSA endpoints
    psaService:
      name: psa
      protocol: TCP
      # Define the ports to open using min_port and max_port
      min_port: 37200
      max_port: 37210
      type: LoadBalancer
  # DB services for Scheduler to DB communication
  dbService:
    postgres:
      protocol: TCP
      port: 5432
      type: ClusterIP
    mysql:
      protocol: TCP
      port: 3306
      type: ClusterIP

# Replicas counts
replicas:
  scheduler:
    replicaCount: 1
  node:
    replicaCount: 1
  db:
    replicaCount: 1

# Docker Images to be used to run the Server, Nodes, initContainers, dind, and DBs
# Check https://dockerhub.activeeon.com/namespaces/36 to verify available ProActive images
images:
  scheduler:
    repository: dockerhub.activeeon.com/k8s/proactive-scheduler
    tag: 12.0.0
    pullPolicy: IfNotPresent
  schedulerExternalDB:
    repository: dockerhub.activeeon.com/k8s/proactive-scheduler-external-db
    tag: 12.0.0
    pullPolicy: IfNotPresent
  node:
    repository: dockerhub.activeeon.com/k8s/proactive-node
    tag: 12.0.0
    pullPolicy: IfNotPresent
  initContainers:
    repository: busybox
    tag: latest
    pullPolicy: IfNotPresent
  dind:
    repository: docker
    tag: 1.12.6-dind
    pullPolicy: IfNotPresent
  db:
    postgres:
      repository: dockerhub.activeeon.com/k8s/postgres-pa
      tag: 12.2
      pullPolicy: IfNotPresent
    mysql:
      repository: dockerhub.activeeon.com/k8s/mysql-pa
      tag: "8.0"
      pullPolicy: IfNotPresent

# Define the resources to be reserved for the Scheduler, Nodes, and DBs Pods
resources:
  scheduler:
    requests:
      cpu: 1000m
      memory: 5G
  node:
    requests:
      cpu: 500m
      memory: 1G
  db:
    postgres:
      requests:
        cpu: 2000m
        memory: 2G
    mysql:
      requests:
        cpu: 2000m
        memory: 2G

# Volume mounts paths
volumeMounts:
  scheduler:
    default:
      mountPath: /opt/proactive/server/default
    previous:
      mountPath: /opt/proactive/server/previous
  node:
    default:
      mountPath: /opt/proactive/node/default
    previous:
      mountPath: /opt/proactive/node/previous
  db:
    postgres:
      mountPath: /var/lib/postgresql/data
    mysql:
      mountPath: /var/lib/mysql

# Define the readinessProbe rules for the Scheduler Pod
readinessProbe:
  httpGet:
    port: *httpPort
  initialDelaySeconds: 60
  periodSeconds: 5
  timeoutSeconds: 3

# Define the livenessProbe rules for the Scheduler Pod
livenessProbe:
  httpGet:
    port: *httpPort
  timeoutSeconds: 3
  failureThreshold: 24 # if during 24*5 seconds = 2 minutes, scheduler seems dead =&gt; restart it
  successThreshold: 1
  initialDelaySeconds: 500 # we give some time in order to let the scheduler start properly
  periodSeconds: 5

# Database properties
database:
  # Fill the DB type: default is HSQLDB. Alternatives are MySQL or Postgres
  type: default
  # External ProActive DB credentials, used only for postgres and mysql configurations
  passwords:
    catalogPassword: changeme
    notificationPassword: changeme
    pcaPassword: changeme
    rmPassword: changeme
    schedulerPassword: changeme
    postgresPassword: changeme
    mysqlPassword: changeme

# User starting the ProActive Server
user:
  userName: activeeon
  groupName: activeeon
  uid: 1000
  gid: 1000

# Node Sources properties
nodeSources:
  dynamicK8s:
    # True, to set up a Dynamic Kubernetes Node Source at Server startup (false if not)
    enabled: false
    # Name of the Dynamic Kubernetes Node Source
    name: Dynamic-Kubernetes-Nodes
    # Minimum number of nodes to be deployed
    minNodes: 1
    # Maximum number of nodes to be deployed
    maxNodes: 15
  staticLocal:
    # True, to set up a Static Kubernetes Node Source at Server startup (false if not)
    enabled: true
    # Name of the Static Kubernetes Node Source
    name: Local-Linux-Nodes
    # Number of nodes to be deployed
    numberNodes: 4

# Credentials of the Activeeon Private Docker Registry
# If you do not have access, please contact contact@activeeon.com to request access
imageCredentials:
  registry: dockerhub.activeeon.com
  username: activeeon
  password: changeme
  email: support@activeeon.com</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is necessary to provide the right configuration values before installing the Chart.</p>
</div>
<div class="paragraph">
<p>To install the ProActive Helm Chart, you can provide the previously defined custom <code>values.yml</code> file to the <code>install</code> command to override the default one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install --values values.yml  activeeon-proactive-chart activeeon/activeeon-proactive-chart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, you can define some individual properties values to the install command to override some properties values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">helm install --set publicClusterIp=xx.xx.xx.xx --set services.scheduler.webService.externalIPs=xx.xx.xx.xx --set imageCredentials.password=changeme activeeon/activeeon-proactive-chart --generate-name</code></pre>
</div>
</div>
<div class="paragraph">
<p>After installing the Chart, all ProActive pods are deployed. The ProActive Web Portals will be available at <code>&lt;PROTOCOL&gt;://&lt;PUBLIC-IP&gt;:&lt;PORT&gt;/</code>. The <code>&lt;PROTOCOL&gt;</code>, <code>&lt;PUBLIC-IP&gt;</code>, and <code>&lt;PORT&gt;</code> are specified in the YAML file.</p>
</div>
<div class="paragraph">
<p>The user can access any of the four portals using the default credentials: <code>admin/&lt;PROACTIVE_ADMIN_PASSWORD&gt;</code>. <code>PROACTIVE_ADMIN_PASSWORD</code> is also defined in the YAML file.</p>
</div>
<div class="paragraph">
<p>Your ProActive Scheduler is now running as a set of Pods!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduler_life_cycle_management"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_life_cycle_management"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_life_cycle_management">2.6. Scheduler Life-Cycle Management</a></h3>
<div class="paragraph">
<p>Under the Admin menu from the scheduler portal, the following administrator actions are proposed:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/SchedulerPortalAdminMenu.png" alt="Admin Menu" width="423" height="342">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Start</code> the scheduler: Jobs can be submitted. Getting the jobs results is possible. The scheduler can be stopped, frozen, paused or killed.</p>
</li>
<li>
<p><code>Stop</code> the scheduler: Jobs cannot be submitted anymore. Already running jobs run to completion, but not pending jobs. Getting the jobs results is possible. The scheduler can be started or killed.</p>
</li>
<li>
<p><code>Freeze</code> the scheduler: Every running tasks run to completion, but the running jobs wait for the scheduler to resume. The scheduler can be stopped, resumed or killed.</p>
</li>
<li>
<p><code>Resume</code> the scheduler: If the scheduler is Paused, Stopped or Frozen.</p>
</li>
<li>
<p><code>Pause</code> the scheduler: Every running jobs run to completion. The scheduler can be stopped, resumed or killed.</p>
</li>
<li>
<p><code>Kill</code> the scheduler: Similar to Ctrl-C. No interaction can be done anymore.</p>
</li>
<li>
<p><code>Shutdown</code> the scheduler: Every running tasks run to completion before terminating the scheduler.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_proactive_scheduler_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_scheduler_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_scheduler_configuration">3. ProActive Scheduler configuration</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All configuration files of ProActive Scheduler can be found under <code>PROACTIVE_HOME</code>.</p>
</div>
<div class="sect2">
<h3 id="_java_virtual_machine_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_java_virtual_machine_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_java_virtual_machine_configuration">3.1. Java Virtual Machine configuration</a></h3>
<div class="paragraph">
<p>Various command-line tools shipped with ProActive (bin/proactive-server, bin/proactive-node) start a Java Virtual Machine.
The parameters of the JVM can be modified by editing DEFAULT_JVM_OPTS= in the corresponding script both in Linux and Windows.</p>
</div>
<div class="paragraph">
<p>For example, to set the maximum heap capacity on the JVM to 6GB in Linux:</p>
</div>
<div class="paragraph">
<p>Change the line
<code>DEFAULT_JVM_OPTS='"-server" "-Dfile.encoding=UTF-8" "-Xms4g"'</code></p>
</div>
<div class="paragraph">
<p>into</p>
</div>
<div class="paragraph">
<p><code>DEFAULT_JVM_OPTS='"-server" "-Dfile.encoding=UTF-8" "-Xms4g" "-Xmx6g"'</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_general_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_general_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_general_configuration">3.2. General configuration</a></h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. ProActive Scheduler configuration files</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">File</th>
<th class="tableblock halign-left valign-top">Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Scheduler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheduling Properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/scheduler/settings.ini</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_scheduler_properties">Scheduler Properties</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Resource Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node management configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/rm/settings.ini</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_resources_manager_properties">Resources Manager Properties</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Web Applications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST API and Web Applications configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/web/settings.ini</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_rest_api_properties">REST API &amp; Web Properties</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Networking</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network, firewall, protocols configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/network/node.ini, config/network/server.ini</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_network_properties">Network Properties</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="4"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User logins and passwords</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/authentication/login.cfg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_file">File authentication</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User group assignments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/authentication/group.cfg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_file">File authentication</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User permissions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/security.java.policy-server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_user_permissions">User Permissions</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LDAP configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/authentication/ldap.cfg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_ldap">LDAP authentication</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle" rowspan="6"><p class="tableblock">Database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheduler configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/scheduler/database.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource Manager configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">config/rm/database.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheduling-api microservice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dist/war/scheduling-api/WEB-INF/classes/application.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job-planner microservice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dist/war/job-planner/WEB-INF/classes/application.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Catalog microservice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dist/war/catalog/WEB-INF/classes/application.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloud-Watch microservice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dist/war/proactive-cloud-watch/WEB-INF/classes/application.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_database_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_database_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_database_configuration">3.3. Database configuration</a></h3>
<div class="paragraph">
<p>Scheduler, Resource Mananger, and some microservices (<strong>catalog</strong>, <strong>cloud-automation-service</strong>, <strong>notification-service</strong>) require to have direct access to the database.
Thus, they must each have a correct configuration for each supported database (HSQLDB, Postgres, MySQL, Oracle).</p>
</div>
<div class="paragraph">
<p>To configure Scheduler or Resource Mananger, one have to modify <strong>PROACTIVE_HOME/config/scheduler/database.properties</strong>
and <strong>PROACTIVE_HOME/config/rm/database.properties</strong> respectively. For microservices, you have also to modify files in: <strong>PROACTIVE_HOME/config/MICROSERVICE-NAME/database.properties</strong>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>PROACTIVE_HOME/tools/configure-db</code> command can be used to apply a database configuration. See <a href="ProActiveAdminGuide.html#_configure_database_command">Configure Database Command</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For <strong>HSQLDB</strong>, the following five properties must be configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.driver_class=org.hsqldb.jdbc.JDBCDriver

#DB_NAME could be scheduler, rm, or one of the microservices names
#9001 is the defaut DB port of the embedded PA database
hibernate.connection.url=jdbc:hsqldb:hsql://localhost:9001/DB_NAME

hibernate.dialect=org.hibernate.dialect.HSQLDialect

# Username and password
hibernate.connection.username=username
hibernate.connection.password=password</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <strong>Postgres 12.2</strong>, the following template must be configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.driver_class=org.postgresql.Driver

#DB_NAME could be scheduler, rm, or one of the microservices names
#PORT should correspond to your DB port
hibernate.connection.url=jdbc:postgresql://localhost:PORT/DB_NAME

#PostgreSQLDialect is recommended for Postgres 12.2 version
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Username and password
hibernate.connection.username=username
hibernate.connection.password=password</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <strong>MySQL 8.0</strong>, the following template must be configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.driver_class=com.mysql.jdbc.Driver

#DB_NAME could be scheduler, rm, or one of the microservices names
#PORT should correspond to your DB port
hibernate.connection.url=jdbc:mysql://localhost:PORT/DB_NAME

#MySQL5InnoDBDialect is recommended for MySQL 8.0 version
hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect

# Username and password
hibernate.connection.username=username
hibernate.connection.password=password</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <strong>Oracle 12.2</strong>, the following template must be configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.driver_class=oracle.jdbc.driver.OracleDriver

#DB_NAME could be scheduler, rm, or one of the microservices names
#PORT should correspond to your DB port
hibernate.connection.url=jdbc:oracle:thin:@localhost:PORT:DB_NAME

#Oracle12cDialect is recommended for Oracle 12.2 version
hibernate.dialect=org.hibernate.dialect.Oracle12cDialect

# Username and password
hibernate.connection.username=username
hibernate.connection.password=password</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>job-planner</strong>, <strong>catalog</strong>, <strong>scheduling-api</strong>, <strong>cloud-automation-service</strong>, <strong>notification-service</strong> and <strong>proactive-cloud-watch</strong> microservices must contain a database configuration.
For each microservice, a configuration file can be found in: <strong>PROACTIVE_HOME/dist/war/MICROSERVICE-NAME/WEB-INF/classes/application.properties</strong>.
In their <strong>application.properties</strong> file, you need to set the following five properties for the target database as configured just above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.datasource.url</code></p>
</li>
<li>
<p><code>spring.datasource.username</code></p>
</li>
<li>
<p><code>spring.datasource.password</code></p>
</li>
<li>
<p><code>spring.datasource.driverClassName</code></p>
</li>
<li>
<p><code>spring.jpa.database-platform</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Moreover, it is mandatory to put the proper database driver in <strong>PROACTIVE_HOME/addons</strong> folder.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For HSQLDB 2.4, the drive <code>hsqldb-2.4.1.jar</code> is already embedded in <strong>PROACTIVE_HOME/addons</strong></p>
</li>
<li>
<p>For MySQL 8.0, you have to get <code>mysql-connector-java-8.0.19.zip</code> driver an place it in <strong>PROACTIVE_HOME/addons</strong></p>
</li>
<li>
<p>For Postgres 12.2, you have to get <code>postgresql-42.2.11.jar</code> driver.</p>
</li>
<li>
<p>For Oracle 12.2, you have to get <code>ojdbc8-19.3.0.0.jar</code> driver.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you plan to use another DB version, it is important to get the corresponding database driver version and set up the right dialect version
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Moreover, it is also important to notice that the Scheduler and 3 microservices (<strong>scheduling-api</strong>, <strong>job-planner</strong>, and <strong>proactive-cloud-watch</strong>) have to point to the same scheduler database since they use that one.</p>
</div>
<div class="sect3">
<h4 id="_example_configuration_with_postgresql"><a class="anchor" href="ProActiveAdminGuide.html#_example_configuration_with_postgresql"></a><a class="link" href="ProActiveAdminGuide.html#_example_configuration_with_postgresql">3.3.1. Example configuration with PostgreSQL</a></h4>
<div class="paragraph">
<p>Configuring ProActive with an external database such as PostgreSQL is recommended in a production environment.
In the following, we show an example of PostgreSQL installation and configuration to be used along with ProActive.</p>
</div>
<div class="sect4">
<h5 id="_postgresql_version"><a class="anchor" href="ProActiveAdminGuide.html#_postgresql_version"></a><a class="link" href="ProActiveAdminGuide.html#_postgresql_version">PostgreSQL version</a></h5>
<div class="paragraph">
<p>PostgreSQL versions 12.0 to 12.11 are fully compatible with ProActive. More recent versions of PostgreSQL have not been fully tested yet for compatibility.
PostgreSQL server can be installed on the same machine as the ProActive server or on a separate machine.</p>
</div>
</div>
<div class="sect4">
<h5 id="_initialize_the_database"><a class="anchor" href="ProActiveAdminGuide.html#_initialize_the_database"></a><a class="link" href="ProActiveAdminGuide.html#_initialize_the_database">Initialize the database</a></h5>
<div class="paragraph">
<p>To initialize the database, some SQL queries should be executed in the PostgreSQL server machine.
In order to do so, the following SQL queries can be defined in a SQL initialization script (default users passwords should be modified):</p>
</div>
<div class="listingblock">
<div class="title">init.sql</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql">-- Create users
CREATE USER rm WITH PASSWORD 'rm';
CREATE USER scheduler WITH PASSWORD 'scheduler';
CREATE USER catalog WITH PASSWORD 'catalog';
CREATE USER pca WITH PASSWORD 'pca';
CREATE USER notification WITH PASSWORD 'notification';

-- Creating empty databases
CREATE DATABASE rm OWNER rm;
CREATE DATABASE scheduler OWNER scheduler;
CREATE DATABASE catalog OWNER catalog;
CREATE DATABASE pca OWNER pca;
CREATE DATABASE notification OWNER notification;

-- Grant access
GRANT CONNECT ON DATABASE scheduler TO scheduler;
GRANT USAGE ON SCHEMA public TO scheduler;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO scheduler;
GRANT CONNECT ON DATABASE rm TO rm;
GRANT USAGE ON SCHEMA public TO rm;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO rm;
GRANT CONNECT ON DATABASE catalog TO catalog;
GRANT USAGE ON SCHEMA public TO catalog;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO catalog;
GRANT CONNECT ON DATABASE pca TO pca;
GRANT USAGE ON SCHEMA public TO pca;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO pca;
GRANT CONNECT ON DATABASE notification TO notification;
GRANT USAGE ON SCHEMA public TO notification;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO notification;

ALTER SYSTEM SET max_connections ='500';</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the PostgreSQL server is installed on a separate machine, the <code>listen-addresses</code> setting should be set to allow remote connections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo vim /opt/postgres/data/postgresql.conf
listen-addresses = ‘IP_ADDRESS’</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, execute the initialization script inside the PotsgreSQL database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">psql -f init.sql</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_download_the_postgres_driver"><a class="anchor" href="ProActiveAdminGuide.html#_download_the_postgres_driver"></a><a class="link" href="ProActiveAdminGuide.html#_download_the_postgres_driver">Download the Postgres driver</a></h5>
<div class="paragraph">
<p>The Postgres driver has to be downloaded and added inside the addons folder of ProActive (SCHEDULER_PATH/addons/).</p>
</div>
<div class="paragraph">
<p>The link to download a Postgres driver version compatible with Postgres 12.X is: <code><a href="https://jdbc.postgresql.org/download/postgresql-42.2.11.jar" class="bare">https://jdbc.postgresql.org/download/postgresql-42.2.11.jar</a></code></p>
</div>
</div>
<div class="sect4">
<h5 id="_configure_proactive"><a class="anchor" href="ProActiveAdminGuide.html#_configure_proactive"></a><a class="link" href="ProActiveAdminGuide.html#_configure_proactive">Configure ProActive</a></h5>
<div class="paragraph">
<p>To configure ProActive to connect to the Postgres DB, we need to edit the database configuration files as follows.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The database passwords should be modified according to your chosen passwords. Note that passwords can be encrypted in configuration files as explained in section <a href="ProActiveAdminGuide.html#_encrypting_configuration_passwords">Encrypting configuration passwords</a>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#To easily get the configuration file names, you can execute the following command:
cd SCHEDULER_PATH/dist/war
find . -name ‘database.properties’</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#Scheduler config (SCHEDULER_PATH/config/scheduler/database.properties)
hibernate.connection.driver_class=org.postgresql.Driver
hibernate.connection.url=jdbc:postgresql://PG_SERVER_DNS:5432/scheduler
hibernate.dialect=org.hibernate.dialect.PostgreSQL94Dialect
hibernate.connection.username=scheduler
hibernate.connection.password=scheduler

#RM config (SCHEDULER_PATH/config/rm/database.properties)
hibernate.connection.driver_class=org.postgresql.Driver
hibernate.connection.url=jdbc:postgresql://PG_SERVER_DNS:5432/rm
hibernate.dialect=org.hibernate.dialect.PostgreSQL94Dialect
hibernate.connection.username=rm
hibernate.connection.password=rm

#Catalog config (SCHEDULER_PATH/dist/war/catalog/WEB-INF/classes/application.properties)
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/catalog
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=catalog
spring.datasource.password=catalog

#Scheduling config (SCHEDULER_PATH/dist/war/scheduling-api/WEB-INF/classes/application.properties)
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/scheduler
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=scheduler
spring.datasource.password=scheduler

#Job planner config (SCHEDULER_PATH/dist/war/job-planner/WEB-INF/classes/application.properties)
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/scheduler
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=scheduler
spring.datasource.password=scheduler

#PCW config (SCHEDULER_PATH/dist/war/proactive-cloud-watch/WEB-INF/classes/application.properties)
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/scheduler
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=scheduler
spring.datasource.password=scheduler

#PCA config (SCHEDULER_PATH/dist/war/cloud-automation-service/WEB-INF/classes/application.properties)
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/pca
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=pca
spring.datasource.password=pca

#Notification config (SCHEDULER_PATH/dist/war/notification-service/WEB-INF/classes/application.properties)
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://PG_SERVER_DNS:5432/notification
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL94Dialect
spring.datasource.username=notification
spring.datasource.password=notification</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_database_purge_operation"><a class="anchor" href="ProActiveAdminGuide.html#_database_purge_operation"></a><a class="link" href="ProActiveAdminGuide.html#_database_purge_operation">Database purge operation</a></h5>
<div class="paragraph">
<p>Additionally, a <code>vacuum</code> operation does not by default remove orphaned Large Objects from the database.
Identification and removal of these objects is performed by the <code>vacuumlo</code> command.</p>
</div>
<div class="paragraph">
<p>As the ProActive database contains many large objects, it is essential to apply both <code>vacuumlo</code> and <code>vacuum</code> operations in order to control the disk space usage over time.</p>
</div>
<div class="paragraph">
<p>In addition, prior to execute the purge operation, a preliminary configuration step is necessary (this preliminary step is done once for a given ProActive installation).</p>
</div>
<div class="paragraph">
<p>In the following paragraphs, we describe the step by step procedure to perform the database purge operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Start the ProActive Server to fill up the database</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Initially, the ProActive server has to be started <strong>at least once</strong> to fill up the ProActive database.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Stop the ProActive Server</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, once the ProActive server is up and the web portals become accessible, you have to stop the ProActive server.</p>
</div>
<div class="paragraph">
<p>PotgreSQL database must remain running in order to perform the next operations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Prepare the database purge operation</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While the ProActive server is stopped and the Postgres server is running, the following SQL queries have to be executed in order to alter the type of certain columns in several database tables (this is needed due to a PotsgreSQL driver issue):</p>
</div>
<div class="listingblock">
<div class="title">tables-configuration.sql</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql"># rm database
\c rm
alter table nodesourcedata alter column infrastructuretype TYPE oid USING infrastructuretype::oid;
\q


# scheduler database
\c scheduler
alter table environment_modifier_data alter column value TYPE oid USING value::oid;
alter table job_data alter column input_space TYPE oid USING input_space::oid;
alter table job_data alter column out_space TYPE oid USING out_space::oid;
alter table job_data alter column global_space TYPE oid USING global_space::oid;
alter table job_data alter column user_space TYPE oid USING user_space::oid;
alter table job_data alter column description TYPE oid USING description::oid;
alter table job_data_variable alter column variable_value TYPE oid USING variable_value::oid;
alter table job_data_variable alter column variable_model TYPE oid USING variable_model::oid;
alter table job_data_variable alter column variable_description TYPE oid USING  variable_description::oid;
alter table script_data alter column script TYPE oid USING script::oid;
alter table script_data alter column url TYPE oid USING url::oid;
alter table selection_script_data alter column script TYPE oid USING script::oid;
alter table selection_script_data alter column url TYPE oid USING url::oid;
alter table task_data alter column description TYPE oid USING description::oid;
alter table task_data alter column java_home TYPE oid USING java_home::oid;
alter table task_data alter column working_dir TYPE oid USING working_dir::oid;
alter table task_data_variable alter column variable_value TYPE oid USING variable_value::oid;
alter table task_data_variable alter column variable_model TYPE oid USING variable_model::oid;
alter table task_data_variable alter column variable_description TYPE oid USING variable_description::oid;
alter table plannedworkflow alter column failure_message TYPE oid USING failure_message::oid;
alter table rule_error alter column error_message TYPE oid USING error_message::oid;
alter table submittedrule alter column failure_message TYPE oid USING failure_message::oid;
\q

# pca database
\c pca
alter table variable alter column name TYPE oid USING name::oid;
alter table variable alter column value TYPE oid USING value::oid;
\q</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Restart the ProActive Server</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After editing the table columns as described above, you have to start again the ProActive server to take into account the new modifications made to the Postgres database.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Database purge operation</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, while the ProActive server is running, it is possible to execute a full <code>vacuum</code> by using the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql"># rm database
vacuumlo -v rm
vacuumdb -f -v -d rm -t pg_largeobject

# scheduler database
vacuumlo -v scheduler
vacuumdb -f -v -d scheduler -t pg_largeobject

# pca database
vacuumlo -v pca
vacuumdb -f -v -d pca -t pg_largeobject

# check autovacuum
SHOW autovacuum;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The command <code>vacuumdb</code> is executed implicitly if <code>AutoVacuum</code> is enabled.
The command <code>vacuumlo</code> consumes a lot of RAM and disk space depending on the number of large objects to be removed.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_spaces_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_data_spaces_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_data_spaces_configuration">3.4. Data Spaces configuration</a></h3>
<div class="paragraph">
<p><a href="../user/ProActiveUserGuide.html#_data_spaces">ProActive Data Spaces</a> is an integrated file-transfer mechanism used by ProActive workflows.</p>
</div>
<div class="paragraph">
<p>Data Spaces are used to transfer files between the server and <a href="ProActiveAdminGuide.html#_glossary_proactive_node">ProActive Nodes</a> during workflows tasks execution.</p>
</div>
<div class="paragraph">
<p>ProActive Data Spaces implementation is based on <a href="https://commons.apache.org/proper/commons-vfs/">Apache VFS</a>.</p>
</div>
<div class="paragraph">
<p>The ProActive server defines and starts automatically the following data spaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>Global Space</strong> where anyone can read/write files.</p>
</li>
<li>
<p>An <strong>User Space</strong> which is a personal user data storage.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Global or User Spaces can be configured individually to use one of the following Data Space protocols.</p>
</div>
<div class="sect3">
<h4 id="_proactive_protocol"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_protocol"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_protocol">3.4.1. ProActive protocol</a></h4>
<div class="paragraph">
<p>This is the <strong>default</strong> protocol used by the Global and User Spaces. The ProActive Data Space protocol is able to transfer files either by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a direct copy operation on the file system</p>
</li>
<li>
<p>a network copy operation through the currently configured <a href="ProActiveAdminGuide.html#_available_network_protocols">ProActive Network Protocol</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Accordingly, a ProActive Node connected to the ProActive server and sharing the same file system (e.g. NFS) will be able to transfer files directly through the file system.
A ProActive Node connected to the server from a different environment (virtual machine, cloud instance, docker container, etc) will also be able to transfer files to/from the server thanks to the ProActive Data Space protocol.</p>
</div>
<div class="paragraph">
<p>The ProActive Data Space protocol will use the network protocol configured for the ProActive server (see <a href="ProActiveAdminGuide.html#_network_properties">Network Properties</a>).</p>
</div>
<div class="paragraph">
<p>In order to configure the data spaces paths on the ProActive server, you can set the following properties in the <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.dataspace.defaultglobal.localpath=/path/to/global/space
pa.scheduler.dataspace.defaultuser.localpath=/path/to/user/space/root</pre>
</div>
</div>
<div class="paragraph">
<p>The user space will use the path defined in <code>pa.scheduler.dataspace.defaultuser.localpath</code> as its root and create sub-folders according to each user login name.</p>
</div>
<div class="paragraph">
<p>When these properties are not configured, global and user spaces default locations are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Global Space : <code>PROACTIVE_HOME/data/defaultglobal</code></p>
</li>
<li>
<p>User Space : <code>PROACTIVE_HOME/data/defaultuser</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sftp_protocol"><a class="anchor" href="ProActiveAdminGuide.html#_sftp_protocol"></a><a class="link" href="ProActiveAdminGuide.html#_sftp_protocol">3.4.2. SFTP protocol</a></h4>
<div class="paragraph">
<p>The SFTP protocol can be used instead of the ProActive protocol to deploy the User or Global spaces.</p>
</div>
<div class="paragraph">
<p>ProActive User Space mapped using SFTP has the following benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It allows to map each User Space to the <strong>HOME directory</strong> of the user on the SFTP server.</p>
</li>
<li>
<p>It allows <strong>file impersonation</strong> : a file copied to the User Space will belong to the user system account and not to the ProActive server account.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It has the following constraints and limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Every user&#8217;s credentials of the ProActive server must match system users credentials inside the SFTP server. This is typically achieved by enabling LDAP or PAM authentication on the ProActive server (see <a href="ProActiveAdminGuide.html#_user_authentication">User Authentication</a>).</p>
</li>
<li>
<p>Every file transfer will use the SFTP protocol when it&#8217;s configured. Note that SFTP protocol is less efficient than the ProActive protocol when transferring files onto and from the local file system.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The SFTP protocol can also be used for the Global Space. In that case, all file transfers will be accomplished by a single system account.
Motivations to enable SFTP on the Global Space can be to access a folder:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on a remote server, reachable via SSH.</p>
</li>
<li>
<p>on the local file system, in case this folder belongs to a different user from the ProActive server user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to configure the SFTP protocol for the User Space, the following properties in the <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> file must be defined:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.dataspace.defaultuser.url=sftp://your-server
pa.scheduler.dataspace.defaultuser.impersonation=true</pre>
</div>
</div>
<div class="paragraph">
<p>The user spaces will always be mapped to each user HOME directory on the SFTP server. In order to have more flexible mappings, consider using the <a href="ProActiveAdminGuide.html#_vsftp_protocol">VSFTP protocol</a>.</p>
</div>
<div class="paragraph">
<p>In order to configure the SFTP protocol for the Global Space, the following property must be set:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.dataspace.defaultglobal.url=sftp://username:password@your-server/path</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_vsftp_protocol"><a class="anchor" href="ProActiveAdminGuide.html#_vsftp_protocol"></a><a class="link" href="ProActiveAdminGuide.html#_vsftp_protocol">3.4.3. VSFTP protocol</a></h4>
<div class="paragraph">
<p>The VSFTP protocol is a proprietary extension inside ProActive of the SFTP protocol.
It complements the SFTP protocol by adding the ability to configure SFTP root directories with a set of predefined environment variables.</p>
</div>
<div class="paragraph">
<p>By default, only the <code>HOME</code> environment variable is included. Other environment variables can be added using the java property <code>proactive.vfsprovider.vsftp.var_names</code>.</p>
</div>
<div class="paragraph">
<p>Each environment variable must represent a directory path inside the SFTP server. Each variable must contain a value for all users of the SFTP server.</p>
</div>
<div class="paragraph">
<p>For example, suppose that <code>proactive.vfsprovider.vsftp.var_names=HOME,WORK,SCRATCH</code> and that these environment variables are resolved for <code>user1</code> as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>HOME=/home/user1
WORK=/work
SCRATCH=/scratch/user1</pre>
</div>
</div>
<div class="paragraph">
<p>The VSFTP protocol will then be able to resolve inside the SFTP server the following urls:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>vsftp://your-server/$HOME/file1 =&gt; /home/user1/file1
vsftp://your-server/$WORK/file2 =&gt; /work/file2
vsftp://your-server/$SCRATCH/file3 =&gt; /scratch/user1/file3</pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, when listing the contents of the server root directory, it will return a list corresponding to the configured variables:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>LIST vsftp://your-server/ =&gt; [$HOME, $WORK, $SCRATCH]</pre>
</div>
</div>
<div class="paragraph">
<p><code>proactive.vfsprovider.vsftp.var_names</code> thus defines the different folder roots of the SFTP protocol for all users.</p>
</div>
<div class="paragraph">
<p>In order to configure the VSFTP protocol for the User Space, the following properties in the <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> file must be defined:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.dataspace.defaultuser.url=vsftp://your-server
pa.scheduler.dataspace.defaultuser.impersonation=true</pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, the following Java properties must be added to the ProActive server and all ProActive Nodes connected to the server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.vfsprovider.vsftp.var_names</code> : a comma-separated list of environment variables which will be used as vsftp root folders for all users. Default value <code>HOME</code>.</p>
</li>
<li>
<p><code>proactive.vfsprovider.vsftp.var_command</code> (optional) : the configured command will be executed as the current user inside the SFTP server to retrieve the environment variable(s) value (s).
Depending on how the environment variable is defined on the SFTP server (.bashrc, .profile or .ssh/environment files), it is necessary to adapt the command to make sure the appropriate environment script is sourced.
The property uses the %VAR% pattern which will be replaced dynamically by the variable name. Default value is <code>echo $%VAR%</code>. Example definition <code>proactive.vfsprovider.vsftp.var_command='source $HOME/.bashrc &amp; echo $%VAR%'</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to add the above properties to the ProActive server and local Nodes, you can edit the following files and include these properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/config/network/server.ini</code></p>
</li>
<li>
<p><code>PROACTIVE_HOME/config/network/node.ini</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to add these properties to remote ProActive Nodes, the procedure will depend on the deployment strategy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nodes started manually: you can add these properties in the command line. For example, <code>./proactive-node -Dproactive.vfsprovider.vsftp.var_names=HOME,WORK (&#8230;&#8203;)</code>.</p>
</li>
<li>
<p>Nodes started using ProActive Linux Agents: the agent configuration file <code>/opt/proactive-agent/config.xml</code> needs to be edited to include the properties in the <code>&lt;jvmParameters&gt;</code> section.
For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">        &lt;jvmParameters&gt;
            &lt;param&gt;-Dproactive.useIPaddress=true&lt;/param&gt;
            &lt;param&gt;-Dproactive.vfsprovider.vsftp.var_names=HOME,WORK&lt;/param&gt;
        &lt;/jvmParameters&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Nodes started using the ProActive Windows Agents: using the Windows Agent GUI, the properties must be added in the <strong>JVM option</strong> section. See <a href="ProActiveAdminGuide.html#_configure_agents_on_windows">Configure Agents on Windows</a>.</p>
</li>
<li>
<p>Nodes started using ProActive Resource Manager <a href="ProActiveAdminGuide.html#_glossary_node_source_infrastructure">Infrastructures</a>: the properties needs to be added in the corresponding infrastructure parameter which allows to define java properties. See <a href="ProActiveAdminGuide.html#_node_source_infrastructures">Node Source Infrastructures</a> for further details.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_backup"><a class="anchor" href="ProActiveAdminGuide.html#_backup"></a><a class="link" href="ProActiveAdminGuide.html#_backup">3.5. Configure automated backup</a></h3>
<div class="paragraph">
<p>ProActive Workflows &amp; Scheduling features an automated backup mechanism which can be used to save the server state at regular intervals. Usage of this mechanism will depend on the database in use by the server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In case the default database is used (HSQLDB), the backup mechanism can store the database contents, data and log files of the server.</p>
</li>
<li>
<p>In case another database is used (MySQL, Oracle, etc), the integrated backup mechanism can only
store data and log files. Backup of the database contents will need
to be activated separately, using the database vendor backup mechanism.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use the automated backup, edit the file <code>PROACTIVE_HOME/config/shared/settings.ini</code>.
Enable backup mechanism by setting <code>pa.server.backup</code> to true.
Backup will be performed according to the provided cron expression in <code>pa.server.backup.period</code>.
Set file/folders you want to backup into <code>pa.server.backup.targets</code>.
Backup archives will appear in the folder specified by <code>pa.server.backup.destination</code>.
<code>pa.server.backup.windows</code> controls how many backup archives needs to be kept in the destination folder.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The backup mechanism automatically freezes the scheduler
while performing the backup to guarantee data integrity.
It expects currently running tasks to terminate in a reasonable amount of time
(configurable using the pa.server.backup.possible.delay property). In case a currently running
task does not terminate after the expected delay, backup will not be performed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_encrypting_configuration_passwords"><a class="anchor" href="ProActiveAdminGuide.html#_encrypting_configuration_passwords"></a><a class="link" href="ProActiveAdminGuide.html#_encrypting_configuration_passwords">3.6. Encrypting configuration passwords</a></h3>
<div class="paragraph">
<p>Some configuration settings such as <strong>database passwords</strong> should be encrypted to prevent their exposition.
In order to encrypt any configuration setting, the command-line <code>PROACTIVE_HOME/tools/encrypt</code> or <code>PROACTIVE_HOME\tools\encrypt.bat</code> can be used.</p>
</div>
<div class="paragraph">
<p>Here is an example of usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>encrypt -d mypass
Encrypted value (to use in configuration files):
ENC(/b0izhUHO846/GmAn8Hbhg==)</pre>
</div>
</div>
<div class="paragraph">
<p>The interactive mode can also be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>encrypt -i
Data to encrypt:*****
Encrypted value (to use in configuration files):
ENC(xtlMWGd0ZK/EzTMyrgPiPw==)</pre>
</div>
</div>
<div class="paragraph">
<p>The encrypted value can then be used as displayed by the <code>encrypt</code> command, for example, in <strong>PROACTIVE_HOME/config/scheduler/database.properties</strong>:
<code>hibernate.connection.password=ENC(xtlMWGd0ZK/EzTMyrgPiPw==)</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_configure_global_variables_and_generic_information"><a class="anchor" href="ProActiveAdminGuide.html#_configure_global_variables_and_generic_information"></a><a class="link" href="ProActiveAdminGuide.html#_configure_global_variables_and_generic_information">3.7. Configure Global Variables and Generic Information</a></h3>
<div class="paragraph">
<p>ProActive Server allows to configure workflow variables or generic information that will apply to all submitted workflows or to some categories of workflows (e.g. workflows with a given name).</p>
</div>
<div class="paragraph">
<p>This configuration is available in the file <strong>PROACTIVE_HOME/config/scheduler/global_variables.xml</strong>.</p>
</div>
<div class="paragraph">
<p>The default configuration is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;globalvariables
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:proactive:globalvariables:3.13" xsi:schemaLocation="urn:proactive:globalvariables:3.13 http://www.activeeon.com/public_content/schemas/proactive/globalvariables/3.13/globalvariables.xsd"&gt;
        &lt;filter&gt;
            &lt;select&gt;
                &lt;!-- Xpath expressions are used to filter workflows affected by global variables.
                Example: to select workflows belonging to the basic-examples bucket
                &lt;xpath&gt;&lt;![CDATA[/job/genericInformation/info[@name='bucketName' and @value='basic-examples']]]&gt;&lt;/xpath&gt;
                --&gt;
                &lt;xpath&gt;&lt;![CDATA[.]]&gt;&lt;/xpath&gt;
                &lt;!-- more than one xpath expression can be added. In that case, global variables are applied when all xpath expressions match --&gt;
            &lt;/select&gt;
            &lt;!-- add global variables or generic information below --&gt;
            &lt;variables&gt;
            &lt;/variables&gt;
            &lt;genericInformation&gt;
            &lt;/genericInformation&gt;
        &lt;/filter&gt;
        &lt;!-- Multiple filters can be added, to apply different set of global variables to different workflows --&gt;
&lt;/globalvariables&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration file is composed of <code>&lt;filter&gt;</code> sections. Each filter section describes the global variables and generic information that will be added to a certain category of workflows.
Multiple filter sections allow to add different lists of variables to different types of workflows.</p>
</div>
<div class="paragraph">
<p>A <code>&lt;filter&gt;</code> section contains the following subsections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;select&gt;</code>: it contains one or more <a href="https://en.wikipedia.org/wiki/XPath">xpath</a> expressions to filter workflow according to xml rules.
In order to select a given workflow, the xpath expression evaluated on this workflow must return a non-empty node set (see xpath documentation). The default xpath expression <code>&lt;xpath&gt;&lt;![CDATA[.]]&gt;&lt;/xpath&gt;</code> selects any workflow.
If multiple xpath expressions are included, a given workflow must satisfy all expressions in order to be selected. Examples of <code>&lt;select&gt;</code> section:</p>
<div class="listingblock">
<div class="title">Select all workflows with name="CronJob"</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;select&gt;
    &lt;xpath&gt;&lt;![CDATA[/job[@name='CronJob']]]&gt;&lt;/xpath&gt;
&lt;/select&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Select all workflows in the "basic-examples" catalog bucket</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;select&gt;
    &lt;xpath&gt;&lt;![CDATA[/job/genericInformation/info[@name='bucketName' and @value='basic-examples']]]&gt;&lt;/xpath&gt;
&lt;/select&gt;</code></pre>
</div>
</div>
</li>
<li>
<p><code>&lt;variables&gt;</code>: it contains the list of variables that will be added to the selected workflows. The format of this section corresponds to the same format as the <code>&lt;variables&gt;</code> section in the ProActive workflow XML definition. See <a href="../user/ProActiveUserGuide.html#_job_variables">Job Variables</a> for a description of this format.</p>
</li>
<li>
<p><code>&lt;genericInformation&gt;</code>: it contains the list of generic information that will be added to the selected workflows. The format of this section corresponds to the same format as the <code>&lt;genericInformation&gt;</code> section in the ProActive workflow XML definition. See <a href="../user/ProActiveUserGuide.html#_generic_information">Generic Information</a> for a description of this format.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following important rules apply to global variables and generic information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Global variables reload</strong>: the definition of global variables and generic information is reloaded every 10 minutes by the ProActive server. It is thus possible to modify the <strong>PROACTIVE_HOME/config/scheduler/global_variables.xml</strong> configuration and have the modifications taken into account without restarting the server.</p>
</li>
<li>
<p><strong>Masking rule</strong>: if a global variable named <code>VAR1</code> is defined and a workflow which contains the same variable is submitted, then the definition of <code>VAR1</code> inside the workflow will take precedence over the global variable.</p>
</li>
<li>
<p><strong>Variable references</strong>: a global variable can reference another global variable using the <code>${VAR_NAME}</code> syntax. A global generic information can also reference a global variable (but a global generic information cannot reference another global generic information). Examples:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">            &lt;variables&gt;
                &lt;variable name="var1" value="value" model=""/&gt;
                &lt;variable name="var2" value="some_${var2}" model=""/&gt; &lt;!-- var2 references var1 --&gt;
            &lt;/variables&gt;
            &lt;genericInformation&gt;
                &lt;info name="ginfo1" value="${var1}"/&gt; &lt;!-- ginfo1 references var1 --&gt;
                &lt;info name="ginfo2" value="${ginfo1}"/&gt; &lt;!-- INVALID, a generic information cannot reference another generic info--&gt;
            &lt;/genericInformation&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_manage_job_labels"><a class="anchor" href="ProActiveAdminGuide.html#_manage_job_labels"></a><a class="link" href="ProActiveAdminGuide.html#_manage_job_labels">3.8. Manage job labels</a></h3>
<div class="paragraph">
<p>A label is a property that can be attached to a job, and changed dynamically by end-users.
The <strong>Labels</strong>  give the possibility to tag Jobs, group them and manipulate them by filtering based on these custom labels.
These Labels act as a custom status for the Jobs. For example, a company can label jobs which are having errors to be reviewed by operators (label "to-be-reviewed"), and later mark them as "reviewed" when done.
Job labels can be used for this specific purpose, but for any other purpose.</p>
</div>
<div class="paragraph">
<p>In order to use Labels, the Administrators have to define a list of labels that can be applied to jobs.
This has to be done in the <strong>Admin</strong> menu of the <a href="ProActiveAdminGuide.html#_glossary_scheduler_web_interface"><strong>Scheduler Portal</strong></a>. In practice, possible labels are stored in the scheduler database.
An Admin can add, change, remove authorized labels.</p>
</div>
<div class="paragraph">
<p>Once a label is applied to a job, it will be stored alongside the job information in the scheduler database. If, in the future, the administrator changes the label name or deletes it, this operation will not be applied retroactively (the original label attached to the job will not be modified).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/manage_labels.png" alt="Manage Labels">
</div>
</div>
<div class="paragraph">
<p>In User Guide, <a href="../user/ProActiveUserGuide.html#_adding_labels_to_jobs"><strong>Adding Labels to Jobs</strong></a></p>
</div>
<div class="paragraph">
<p>The constraints of a label name can be configured in the <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> file.</p>
</div>
<div class="paragraph">
<p>The maximum length is specified by the property <code>pa.scheduler.label.max.length</code>.
If this property is not specified, the default value is <code>20</code>.</p>
</div>
<div class="paragraph">
<p>The regular expression constraint is specified by the <code>property pa.scheduler.label.regex</code>.
If this property is not specified, the default value is <code>^[a-zA-Z0-9_/-]*$</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_logo_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_custom_logo_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_custom_logo_configuration">3.9. Custom logo configuration</a></h3>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/generic_logo.png" alt="generic logo">
</div>
</div>
<div class="paragraph">
<p>To be able to edit the default logo displayed in ProActive portals, you have to replace the following file <code>PROACTIVE_HOME/dist/war/getstarted/assets/image/custom-logo.png</code> with your company custom logo.</p>
</div>
<div class="paragraph">
<p>You can use the command SCP to copy the file from your local machine to the ProActive server machine. The dimensions of the custom logo are automatically adapted.</p>
</div>
<div class="paragraph">
<p>Please note that there&#8217;s no need to restart the server, just clear the cache and refresh the Web page.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/custom_logo.png" alt="custom logo">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_tools"><a class="anchor" href="ProActiveAdminGuide.html#_configuration_tools"></a><a class="link" href="ProActiveAdminGuide.html#_configuration_tools">3.10. Configuration Tools</a></h3>
<div class="sect3">
<h4 id="_configure_http_server_command"><a class="anchor" href="ProActiveAdminGuide.html#_configure_http_server_command"></a><a class="link" href="ProActiveAdminGuide.html#_configure_http_server_command">3.10.1. Configure Http Server Command</a></h4>
<div class="paragraph">
<p>The command line <code>PROACTIVE_HOME/tools/configure-http</code> allows configuring the main parameters of the <strong>http server</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>protocol</em> (scheme).</p>
</li>
<li>
<p>The <em>port</em>.</p>
</li>
<li>
<p>The <em>hostname</em> or <em>IP address</em> used by internal http communications (when a specific hostname must be configured rather than localhost).</p>
</li>
<li>
<p>a <em>public url</em> (when the ProActive server is behind a reverse proxy or installed in a cloud instance).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command options with several usage examples are described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$&gt; ./configure-http -h
usage: configure-http [-d] [-h] [-H &lt;HOSTNAME&gt;] [-P &lt;PORT&gt;] [--public-hostname &lt;PUBLIC-HOSTNAME&gt;] [--public-port &lt;PUBLIC-PORT&gt;]
[--public-scheme &lt;PUBLIC-SCHEME&gt;] [-S &lt;SCHEME&gt;]

Change ProActive Jetty (Web) Server parameters and apply it to all configuration files.
This command can be used, for example, to change the ProActive server HTTP port or switch the server to the HTTPS protocol.

 -d,--debug                               Debug mode (prints modified files and properties)
 -h,--help                                Display this help
 -H,--hostname &lt;HOSTNAME&gt;                 Hostname used (e.g. localhost, myserver) or IP address (e.g. 127.0.0.1, 192.168.12.1). When
                                          this option is not provided, the hostname appearing in existing configuration files urls will
                                          be unchanged.
 -P,--port &lt;PORT&gt;                         Port used (e.g. 8080, 8443). When this option is not provided, the port configured for the
                                          current scheme (http or https) will be used.
    --public-hostname &lt;PUBLIC-HOSTNAME&gt;   Public Hostname used (e.g. myserver.mydomain) or IP address (e.g. 192.168.12.1). This setting
                                          should be used when the ProActive server is deployed behind a reverse proxy or inside a cloud
                                          instance. This option must be defined when any of public-scheme or public-port is set.
    --public-port &lt;PUBLIC-PORT&gt;           Public port used (e.g. 8080, 8443). This setting should be used when the ProActive server is
                                          deployed behind a reverse proxy or inside a cloud instance. This option must be defined when
                                          any of public-scheme or public-hostname is set.
    --public-scheme &lt;PUBLIC-SCHEME&gt;       Public protocol used (http or https). This setting should be used when the ProActive server
                                          is deployed behind a reverse proxy or inside a cloud instance. This option must be defined
                                          when any of public-hostname or public-port is set.
 -S,--scheme &lt;SCHEME&gt;                     Http protocol to use (http or https). When this option is not provided, the currently
                                          configured protocol will remain unchanged.

Examples:
# Configure scheme to https with port 8444 and default hostname. Debug output to see all modifications.
configure-http -S https -P 8444 -d
# Configure scheme to http with default port and specific hostname
configure-http -S http -H myserver
# Configure public address to use the server behind a reverse-proxy
configure-http --public-scheme=https --public-hostname=myproxy.mycompany.com --public-port=8443</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_rest_api_properties">REST API &amp; Web Properties</a> for the full description of the http server configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_database_command"><a class="anchor" href="ProActiveAdminGuide.html#_configure_database_command"></a><a class="link" href="ProActiveAdminGuide.html#_configure_database_command">3.10.2. Configure Database Command</a></h4>
<div class="paragraph">
<p>The command line <code>PROACTIVE_HOME/tools/configure-db</code> allows configuring the ProActive server to use an external database.</p>
</div>
<div class="paragraph">
<p>ProActive uses by default an embedded database called <a href="https://hsqldb.org/">HSQLDB</a>.
In order to use a different database such as PostgreSQL, MySQL or Oracle, the <code>configure-db</code> command can be used to modify the ProActive server configuration files
and allow interaction with this external database.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>configure-db</code> configures the connection from ProActive components to the database and not the database itself.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Each ProActive component (<strong>Resource Manager</strong>, <strong>Scheduler</strong>, <strong>Catalog</strong>, <strong>Service Automation</strong> and <strong>Notification Service</strong>) that uses an external database needs to be configured separately. Accordingly, the <code>configure-db</code> command should be run multiple times.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The command options with several usage examples are described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$&gt; ./configure-db -h
usage: configure-db [-c &lt;COMPONENT&gt;] [-d] [-h] [-H &lt;HOSTNAME&gt;] [-p &lt;PASSWORD&gt;] [-P &lt;PORT&gt;] [-s &lt;SCHEMA-NAME&gt;] [-U &lt;URL&gt;] [-u
       &lt;USERNAME&gt;] [-v &lt;DATABASE-VENDOR&gt;] [-z &lt;TIMEZONE&gt;]

Change ProActive server database configuration.
ProActive can either use the integrated HSQLDB database or an external database (PostgreSQL MySQL or Oracle).
ProActive requires the following components to be mapped to different database schemas:
Resource Manager, Scheduler, Catalog, Service Automation and Notification Service.

 -c,--component &lt;COMPONENT&gt;               Target component to configure. Component name can be "rm", "scheduler", "catalog",
                                          "service-automation", "notification" or "all" (to configure all components with a common
                                          configuration).
 -d,--debug                               Debug mode (prints modified files and properties)
 -h,--help                                Display this help
 -H,--hostname &lt;HOSTNAME&gt;                 Database hostname used (e.g. localhost, myserver) or IP address (e.g. 127.0.0.1,
                                          192.168.12.1). This option cannot be used in conjunction with --url.
 -p,--password &lt;PASSWORD&gt;                 Database user password. Password can be provided already encrypted using the 'encypt' command
                                          or in clear text. The password will always be encrypted when stored in configuration files.
 -P,--port &lt;PORT&gt;                         Database port used (e.g. 9001, 5432). If this option is not provided, the database vendor
                                          default port will be used. This option cannot be used in conjunction with --url.
 -s,--schema-name &lt;SCHEMA-NAME&gt;           Override the default database schema name for the selected component. Defaults names are {
                                          Resource Manager : "rm", Scheduler : "scheduler", Catalog : "catalog", Service Automation :
                                          "pca", Notification Service : "notification" }. This option cannot be used when
                                          --component=all or when --database-vendor=hsqldb
 -U,--url &lt;URL&gt;                           Sets the JDBC url that will be used to access the target component database. If not used, the
                                          url will be inferred from --hostname, --port and optionally --schema-name options. This
                                          option cannot be used when --component=all. Note: this parameter is the only way to use the
                                          TNS URL Format with Oracle database.
 -u,--username &lt;USERNAME&gt;                 Database user name
 -v,--database-vendor &lt;DATABASE-VENDOR&gt;   Target database vendor to configure ("hsqldb", "postgresql", "mysql" or "oracle")
 -z,--timezone &lt;TIMEZONE&gt;                 Specific to MySQL, sets the timezone used by the MySQL server. The default is "UTC". This
                                          option cannot be used in conjunction with --url.

Examples:
# Configure HSQLDB for all components with single user and password, default hostname and port. Debug output to see all modifications.
configure-db -c all -v hsqldb -u user -p pwd -d
# Configure PostgreSQL for the Resource Manager component with a specific hostname and port
configure-db -c rm -v postgresql -H myserver -P 5434 -u user -p pwd
# Configure PostgreSQL for the Resource Manager component with a specific hostname, port and schema name
configure-db -c rm -v postgresql -H myserver -P 5434 -s RESOURCE_MANAGER -u user -p pwd
# Configure Oracle for the Resource Manager component with a TNS URL format
configure-db -c rm -v oracle -U
"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=myserver)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=rm))" -u user -p pwd</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_database_configuration">Database configuration</a> for a complete explanation of different database vendor configurations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_ldap_active_directory_command"><a class="anchor" href="ProActiveAdminGuide.html#_configure_ldap_active_directory_command"></a><a class="link" href="ProActiveAdminGuide.html#_configure_ldap_active_directory_command">Configure LDAP / Active Directory Command</a></h4>
<div class="paragraph">
<p>The command line <code>PROACTIVE_HOME/tools/configure-ldap</code> allows configuring the ProActive server to use LDAP or Active Directory authentication.</p>
</div>
<div class="paragraph">
<p><code>configure-ldap</code> uses the following process in order to configure authentication:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It <strong>modifies</strong> the various configuration files using the parameters received (LDAP server url, bind login, user/group subtree, etc).</p>
</li>
<li>
<p>It <strong>checks</strong> the connection to the LDAP server and <strong>installs</strong> inside the ProActive Java Runtime Environment <strong>SSL certificates</strong> in case of <em>LDAPS</em> usage.</p>
</li>
<li>
<p>It <strong>tests</strong> authentication with a provided <em>test user</em>'s credentials to validate that authentication works properly.</p>
</li>
<li>
<p>If it succeeds, the configuration is <strong>persisted</strong>. Otherwise, the configuration is <strong>reverted</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The command options with several usage examples are described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$&gt; ./configure-ldap -h
usage: configure-ldap [-a] [-d] [--group.attr &lt;GROUP.ATTR&gt;] [--group.filter &lt;GROUP.FILTER&gt;] [--group.subtree &lt;GROUP.SUBTREE&gt;] [-h]
       [-l &lt;LOGIN&gt;] [-o &lt;OUTPUT.FILE&gt;] [-p &lt;PASSWORD&gt;] [-s] [--start.tls.disable.check] [--tenant.attribute &lt;TENANT.ATTRIBUTE&gt;]
       [--test.pwd &lt;TEST.PWD&gt;] [--test.user &lt;TEST.USER&gt;] [--truststore.path &lt;TRUSTSTORE.PATH&gt;] [--truststore.pwd &lt;TRUSTSTORE.PWD&gt;] [-u
       &lt;URL&gt;] [--user.filter &lt;USER.FILTER&gt;] [--user.subtree &lt;USER.SUBTREE&gt;]

Configure ProActive server for LDAP authentication.
ProActive can either use an Active Directory or a classical LDAP server for authentication.

 -a,--auth.disable                          Use this option to disable authentication to the LDAP server (only when the server supports
                                            anonymous connections).
 -d,--debug                                 Debug mode (prints modified files and properties)
    --group.attr &lt;GROUP.ATTR&gt;               The attribute in the group entry that matches the jaas' group name. Default is "cn".
    --group.filter &lt;GROUP.FILTER&gt;           LDAP filter executed when searching for all groups associated with a given user. By
                                            default, the search takes as parameter the user LDAP entry. Option group.filter.use.uid can
                                            be enabled to give as parameter the user identifier instead. The default group filter,
                                            depending on the LDAP server type and group.filter.use.uid option is  :
                                            {LDAP=(&amp;(objectclass=groupOfUniqueNames)(uniqueMember=%s)),
                                            LDAPwithUID=(&amp;(objectclass=posixGroup)(memberUID=%s)),
                                            AD=(&amp;(objectclass=group)(member:1.2.840.113556.1.4.1941:=%s))}
    --group.subtree &lt;GROUP.SUBTREE&gt;         Scope in the LDAP tree where groups can be found. If not set, the value of option
                                            user.subtree will be used.
 -h,--help                                  Display this help
 -l,--login &lt;LOGIN&gt;                         login name used to connect (bind) to the ldap server when executing queries. The login is
                                            usually a LDAP distinguished name (e.g. uid=janedoe,ou=People,dc=activeeon,dc=com).
 -o,--output.file &lt;OUTPUT.FILE&gt;             Ldap configuration file that will be modified. It will be created by copying the default
                                            configuration file if it does not exist.
 -p,--password &lt;PASSWORD&gt;                   Password associated with the login name. Password can be provided already encrypted using
                                            the 'encypt' command or in clear text.The password will always be encrypted when stored in
                                            the ldap configuration file.
 -s,--start.tls                             Enable StartTLS mode.
    --start.tls.disable.check               If StartTLS mode is enable, disable certificate verification check.
    --tenant.attribute &lt;TENANT.ATTRIBUTE&gt;   An LDAP attribute such as "department" or "project" can be used to group categories of
                                            users in an abstract organization called "Tenant".
    --test.pwd &lt;TEST.PWD&gt;                   (Required) Password of the user that will be searched using configured filters. This
                                            parameter is required to validate the configuration and guarantee that the connection and
                                            filters are working properly.
    --test.user &lt;TEST.USER&gt;                 (Required) Identifier of the user that will be searched using configured filters. This
                                            parameter is required to validate the configuration and guarantee that the connection and
                                            filters are working properly.
    --truststore.path &lt;TRUSTSTORE.PATH&gt;     Path to the truststore that will be used to store LDAPS certificates. If the file does not
                                            exist it will be created. The default value is config/authentication/truststore
    --truststore.pwd &lt;TRUSTSTORE.PWD&gt;       Password used to encrypt the truststore that will be created if the LDAP server is using
                                            LDAPS protocol. If not provided the default password will be "activeeon".
 -u,--url &lt;URL&gt;                             (required) Url(s) of the LDAP server(s). Multiple servers can be configured using a
                                            comma-separated list.
    --user.filter &lt;USER.FILTER&gt;             LDAP filter executed when searching for a LDAP user entry which corresponds to a given user
                                            identifier. The default user filter, depending on the LDAP server type is :
                                            {LDAP=(&amp;(objectclass=inetOrgPerson)(uid=%s)), AD=(&amp;(objectclass=user)(sAMAccountName=%s))}
    --user.subtree &lt;USER.SUBTREE&gt;           (required) Scope in the LDAP tree where users can be found.

Examples:
# Configure Ldap authentication for a ldaps server and default filters. Debug output to see all modifications.
configure-ldap --url ldaps://ldap-server1.activeeon.com --user.subtree "ou=users,dc=activeeon,dc=org" --group.subtree
"ou=groups,dc=activeeon,dc=org" --login "cn=admin,dc=activeeon,dc=org" --password "my_bind_pwd" --test.user user1 --test.pwd
"my_test_pwd" --debug</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_ldap">LDAP authentication</a> for a full explanation of LDAP authentication parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_copy_role_command"><a class="anchor" href="ProActiveAdminGuide.html#_copy_role_command"></a><a class="link" href="ProActiveAdminGuide.html#_copy_role_command">3.10.3. Copy Role Command</a></h4>
<div class="paragraph">
<p>The command line <code>PROACTIVE_HOME/tools/copy-role</code> can be used to duplicate a role defined in the <code>PROACTIVE_HOME/config/security.java.policy-server</code> file.</p>
</div>
<div class="paragraph">
<p>As described in <a href="ProActiveAdminGuide.html#_user_permissions">User Permissions</a>, the file <code>security.java.policy-server</code> is used to store the definitions of users groups and their rights within the ProActive server.</p>
</div>
<div class="paragraph">
<p>The <code>copy-role</code> command is used when a new group of users needs to be created with the same rights as an existing group.
It can also be used after configuring <a href="ProActiveAdminGuide.html#_ldap">LDAP authentication</a>, to map existing <em>ldap groups</em> to one of the default roles defined in <code>security.java.policy-server</code>.</p>
</div>
<div class="paragraph">
<p>For example, in order to import the ldap group <code>it-admin</code> as an administrator of the ProActive server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>copy-role --source server-admins --destination it-admin</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_default_groupsroles">Default Groups/Roles</a> for a description of all roles defined by default in the ProActive server.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Any modification to the <code>security.java.policy-server</code> file is taken into account only after the ProActive server is restarted.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The command options with several usage examples are described below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$&gt; ./copy-role -h
usage: copy-role [-d] [-D &lt;DESTINATION&gt;] [-h] [-S &lt;SOURCE&gt;] [-y]

Create a new JaaS role by copying an existing one.
JaaS roles are used to define authorization inside the ProActive server.

 -d,--debug                       Debug mode (prints modified files and properties)
 -D,--destination &lt;DESTINATION&gt;   (required) Name of the destination role (group).
 -h,--help                        Display this help
 -S,--source &lt;SOURCE&gt;             (required) Name of the role (group) that will be copied.
 -y,--overwrite                   Overwrite if the destination role already exists.

Examples:
# Copy existing 'server-admins' role into new role 'my-admin-group'. Debug output to see all modifications.
copy-role --source server-admins --destination my-admin-group --debug</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_authentication"><a class="anchor" href="ProActiveAdminGuide.html#_user_authentication"></a><a class="link" href="ProActiveAdminGuide.html#_user_authentication">4. User Authentication</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to log into ProActive server, every user must have a registered account.</p>
</div>
<div class="paragraph">
<p>A user <strong>login information</strong> is associated with the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <strong>login</strong> name: when the user authenticate himself into the ProActive server, he/she will use his registered login.</p>
</li>
<li>
<p>a <strong>domain</strong>: when the server runs on a <em>Windows operating system</em> or when the authentication method is configured as <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">LDAP authentication with Multiple Domains</a>, a domain name may be associated with the account.</p>
</li>
<li>
<p>a <strong>password</strong>.</p>
</li>
<li>
<p>a list of <strong>groups</strong>. A user may belong to one or more groups. Each group has its own set of authorizations as described in chapter <a href="ProActiveAdminGuide.html#_user_permissions">User Permissions</a>.</p>
</li>
<li>
<p>a <strong>tenant</strong>: a tenant name may be associated with the user account. Tenants represent the isolation of a set of users within the ProActive server. Tenants must first be configured either using <a href="ProActiveAdminGuide.html#_tenants_file">Tenant File Configuration</a>,
<a href="ProActiveAdminGuide.html#_configure_tenant_attribute">Tenant LDAP attribute configuration</a> or <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">LDAP authentication with Multiple Domains</a>.
When <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">LDAP authentication with Multiple Domains</a> is set, the tenant name is equal to the domain name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>User accounts are defined with one of the following <strong>authentication methods</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="ProActiveAdminGuide.html#_file"><strong>File-based</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_ldap"><strong>LDAP</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains"><strong>LDAP with Multiple Domains</strong></a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_pam"><strong>PAM</strong></a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_configure_domains_tenants"><a class="anchor" href="ProActiveAdminGuide.html#_configure_domains_tenants"></a><a class="link" href="ProActiveAdminGuide.html#_configure_domains_tenants">4.1. Configure Domains / Tenants</a></h3>
<div class="sect3">
<h4 id="_domains"><a class="anchor" href="ProActiveAdminGuide.html#_domains"></a><a class="link" href="ProActiveAdminGuide.html#_domains">4.1.1. Domains</a></h4>
<div class="paragraph">
<p>Within ProActive, a <strong>domain</strong> is part of a user login information and can either represent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <a href="https://en.wikipedia.org/wiki/Windows_domain">Windows domain</a>.</p>
</li>
<li>
<p>The name of a LDAP server in case of <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">LDAP authentication with Multiple Domains</a>.</p>
</li>
<li>
<p>Both when Windows domain names and LDAP/Active Directory server names match.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The domain is used either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to select which <em>LDAP/Active Directory server</em> will be queried in case of <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">LDAP authentication with Multiple Domains</a>.</p>
</li>
<li>
<p>to select which <em>Windows domain</em> will be used when the user executes <a href="../user/ProActiveUserGuide.html#_run_as_me">RunAsMe</a> workflow tasks inside a <a href="ProActiveAdminGuide.html#_glossary_proactive_node">ProActive Node</a> running on a Windows Operating System.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before being able to use <strong>domains</strong> in login information, the list of allowed domains must be configured on the ProActive server.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When configuring allowed domains, it is important to include an empty domain name. This is because ProActive uses internal accounts that do not belong to any domain.
Failing to do so would prevent the ProActive server from starting. An empty domain is included by using the syntax <code>",domain1,domain2"</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are two properties to configure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>PROACTIVE_HOME/config/rm/settings.ini</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.rm.allowed.domains=,domain1,domain2</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>PROACTIVE_HOME/config/scheduler/settings.ini</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.allowed.domains=,domain1,domain2</pre>
</div>
</div>
<div class="paragraph">
<p>&#8658; Allows using either domain1, domain2 or an empty domain name.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When the ProActive server runs on a Windows operating system, allowed domains properties default to <code>",SERVER_USER_DOMAIN"</code>, where <em>SERVER_USER_DOMAIN</em> corresponds to the Windows domain name of the user that starts the ProActive server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After <em>allowed domains</em> have been configured, the login page of the various portals will display a drop-down list which allows to select the login domain.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/LoginSchedDomain.png" alt="Scheduler Portal login using Domains" width="237" height="220">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tenants"><a class="anchor" href="ProActiveAdminGuide.html#_tenants"></a><a class="link" href="ProActiveAdminGuide.html#_tenants">4.1.2. Tenants</a></h4>
<div class="paragraph">
<p><strong>Tenants</strong> are organization units that regroup class of users in an isolated environment within the ProActive server.</p>
</div>
<div class="paragraph">
<p>For example, <em>user1</em> belonging to <em>tenant1</em> will not be able to see <strong>jobs</strong> submitted by <em>user2</em> belonging to <em>tenant2</em>.
It is also possible to restrict access to <strong>ProActive Nodes</strong> based on tenants (a <strong>Node Source</strong> can restrict its access to a specific tenant name).</p>
</div>
<div class="paragraph">
<p>Tenants can thus improve the management and governance of an organization&#8217;s hybrid compute infrastructure.</p>
</div>
<div class="paragraph">
<p>User <strong>tenants</strong> are different from user <strong>groups</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A user can belong to <strong>several groups</strong> but can only belong to a <strong>single tenant</strong>.</p>
</li>
<li>
<p>User groups does not allow the same level of <strong>isolation</strong> as tenants allow (for example, it is not possible to prevent users from seeing jobs that belong to a different group).</p>
</li>
<li>
<p>User groups allow defining <strong>roles</strong> (administrators, standard users, etc.) inside the ProActive server. A user tenant does not correspond to a role.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tenant user membership can be configured using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <a href="ProActiveAdminGuide.html#_tenants_file">file-based tenant configuration</a>.
This file is a group &#8594; tenant association which allows to define a collection of groups as tenant.</p>
</li>
<li>
<p>a <a href="ProActiveAdminGuide.html#_configure_tenant_attribute">LDAP attribute configuration</a>.
This method can be used when a single LDAP/Active Directory server is configured as authentication method. In that case, a scalar LDAP attribute defined for all users can be used as tenant name (For example <em>Organization Name</em>, <em>Division</em>, etc.).</p>
</li>
<li>
<p>a <a href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">Multi-Domain LDAP configuration</a>. When multi-domain LDAP configuration is used as authentication method, the tenant name will be automatically set to the domain name used during authentication. For example, if <em>user1</em> logs in from <em>domain1</em>, <em>user1</em> will also belong to the <em>domain1</em> tenant.
This is the only case where domain name and tenant name will be equal.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <strong>tenant</strong> can either be a collection of groups (if defined using a file), an organization unit (if defined using an <em>LDAP</em> attribute) or a <em>LDAP domain</em> (if the authentication method is configured to LDAP with multiple domains).</p>
</div>
<div class="paragraph">
<p>After tenants definition is configured, it is necessary to configure in the ProActive Server tenant isolation.</p>
</div>
<div class="sect4">
<h5 id="_tenants_job_isolation"><a class="anchor" href="ProActiveAdminGuide.html#_tenants_job_isolation"></a><a class="link" href="ProActiveAdminGuide.html#_tenants_job_isolation">Tenants Job Isolation</a></h5>
<div class="paragraph">
<p><strong>Tenants Job isolation</strong> is the ability to hide submitted <a href="ProActiveAdminGuide.html#_glossary_job">jobs</a> across tenants.</p>
</div>
<div class="paragraph">
<p>For example, when <em>user1</em> belonging to <em>tenant1</em> submits a job to the ProActive Scheduler, then <em>user2</em> belonging to <em>tenant2</em> will not see this job activity on the <a href="ProActiveAdminGuide.html#_glossary_scheduler_web_interface">Scheduler</a> or <a href="ProActiveAdminGuide.html#_glossary_workflow_automation_portal">Workflow Execution</a> portals.</p>
</div>
<div class="paragraph">
<p>In order to configure Tenants Job isolation, the setting <code>pa.scheduler.core.tenant.filter</code> must be set to <code>true</code> in <code>PROACTIVE_HOME/config/scheduler/settings.ini</code>.</p>
</div>
<div class="paragraph">
<p>When this configuration is enabled, standard users will only see jobs according to the user&#8217;s tenant. Admin users will still be able to see jobs coming from all tenants.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not mandatory to configure tenant isolation. Tenants can simply be used as additional information associated with each user submitted jobs.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/TenantSPUsers.png" alt="Scheduler Portal for &quot;users&quot; tenant">
</div>
<div class="title">Figure 1. Scheduler Portal for "Users" tenant</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/TenantSPExperts.png" alt="Scheduler Portal for &quot;experts&quot; tenant">
</div>
<div class="title">Figure 2. Scheduler Portal for "Experts" tenant</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/TenantSPAdmins.png" alt="Admins Tenant View">
</div>
<div class="title">Figure 3. Scheduler Portal for Admin users</div>
</div>
</div>
<div class="sect4">
<h5 id="_tenants_node_source_isolation"><a class="anchor" href="ProActiveAdminGuide.html#_tenants_node_source_isolation"></a><a class="link" href="ProActiveAdminGuide.html#_tenants_node_source_isolation">Tenants Node Source Isolation</a></h5>
<div class="paragraph">
<p>Apart from job isolation, it is also possible to restrict <a href="ProActiveAdminGuide.html#_glossary_node_source">Node Sources</a> across tenants.</p>
</div>
<div class="paragraph">
<p>Restricting a Node Source to a specific tenant can be done by using the <code>nodeUsers</code> parameter which is common to all <a href="ProActiveAdminGuide.html#_glossary_node_source_policy">Node Source Policies</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_policy_common_parameters">Policy Common Parameters</a> for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_select_authentication_method"><a class="anchor" href="ProActiveAdminGuide.html#_select_authentication_method"></a><a class="link" href="ProActiveAdminGuide.html#_select_authentication_method">4.2. Select authentication method</a></h3>
<div class="paragraph">
<p>By default, the ProActive server is configured to use <strong>file-based</strong> authentication and has some default accounts ('demo', 'admin', 'user') that
can be used to first log into the server.</p>
</div>
<div class="paragraph">
<p>The default accounts passwords (demo:demo, admin:admin and user:pwd) should be modified using the <a href="ProActiveAdminGuide.html#_command_line">proactive-users</a> command.</p>
</div>
<div class="paragraph">
<p>If you would like to change the authentication mechanism to use your <strong>LDAP</strong> server or use Linux PAM, you need to modify two configuration files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource Manager</strong> configuration (<code>PROACTIVE_HOME/config/rm/settings.ini</code>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#Property that defines the method that has to be used for logging users to the Resource Manager
#It can be one of the following values:
#  - "RMFileLoginMethod" to use file login and group management
#  - "RMLDAPLoginMethod" to use LDAP login management
#  - "RMMultiLDAPLoginMethod" to use LDAP with multiple domains
#  - "RMPAMLoginMethod" to use PAM login management
pa.rm.authentication.loginMethod=RMFileLoginMethod</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Scheduler</strong> configuration (<code>PROACTIVE_HOME/config/scheduler/settings.ini</code>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#Property that define the method that have to be used for logging users to the Scheduler
#It can be one of the following values:
#  - "SchedulerFileLoginMethod" to use file login and group management
#  - "SchedulerLDAPLoginMethod" to use LDAP login management
#  - "SchedulerMultiLDAPLoginMethod" to use LDAP with multiple domains
#  - "SchedulerPAMLoginMethod" to use PAM login management
pa.scheduler.core.authentication.loginMethod=SchedulerFileLoginMethod</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_file"><a class="anchor" href="ProActiveAdminGuide.html#_file"></a><a class="link" href="ProActiveAdminGuide.html#_file">4.3. File authentication</a></h3>
<div class="paragraph">
<p>By default, the ProActive server stores users accounts, passwords, group memberships (user or admins), and tenant memberships (group agglomerate or organization), in two files.</p>
</div>
<div class="paragraph">
<p>The default file path to store users, group and tenant memberships can be modified by changing the following settings:</p>
</div>
<div class="listingblock">
<div class="title">PROACTIVE_HOME/config/rm/settings.ini</div>
<div class="content">
<pre>pa.rm.defaultloginfilename=config/authentication/login.cfg
pa.rm.defaultgroupfilename=config/authentication/group.cfg
pa.rm.defaulttenantfilename=config/authentication/tenant.cfg</pre>
</div>
</div>
<div class="listingblock">
<div class="title">PROACTIVE_HOME/config/scheduler/settings.ini</div>
<div class="content">
<pre>pa.scheduler.core.defaultloginfilename=config/authentication/login.cfg
pa.scheduler.core.defaultgroupfilename=config/authentication/group.cfg
pa.scheduler.core.defaulttenantfilename=config/authentication/tenant.cfg</pre>
</div>
</div>
<div class="sect3">
<h4 id="_users"><a class="anchor" href="ProActiveAdminGuide.html#_users"></a><a class="link" href="ProActiveAdminGuide.html#_users">4.3.1. Users</a></h4>
<div class="paragraph">
<p>Users and passwords accounts are stored in <code>PROACTIVE_HOME/config/authentication/login.cfg</code>.
Each line has to follow the format <strong>user:encrypted password</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_groups"><a class="anchor" href="ProActiveAdminGuide.html#_groups"></a><a class="link" href="ProActiveAdminGuide.html#_groups">4.3.2. Groups</a></h4>
<div class="paragraph">
<p>Users group membership is stored in <code>PROACTIVE_HOME/config/authentication/group.cfg</code>. For each user registered in login.cfg,
a group membership has to be defined in this file. Each line has to look like <strong>user:group</strong>. Group has to be
<code>user</code> to have user rights, <code>scheduleradmins</code> to have administrator rights on the scheduler, <code>rmcoreadmins</code> to have administrator rights on the resource manager, etc. Below is an example <code>group.cfg</code> file:</p>
</div>
<div class="listingblock">
<div class="title">group.cfg</div>
<div class="content">
<pre>admin:scheduleradmins
admin:rmcoreadmins
demo:scheduleradmins
demo:rmcoreadmins
citizen-ds:citizen-ds
expert-ds:expert-ds
guest:guests
nsadmin:nsadmins
provider:providers
rm:admin
rm:nsadmins
scheduler:user
scheduler:scheduleradmins
user:user
watcher:watchers</pre>
</div>
</div>
<div class="paragraph">
<p>ProActive contains a set of predefined groups such as <code>user</code> and <code>providers</code>. Group rights are defined in <code>PROACTIVE_HOME/config/security.java.policy-server</code> as described in chapter <a href="ProActiveAdminGuide.html#_user_permissions">User Permissions</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tenants_file"><a class="anchor" href="ProActiveAdminGuide.html#_tenants_file"></a><a class="link" href="ProActiveAdminGuide.html#_tenants_file">4.3.3. Tenants</a></h4>
<div class="paragraph">
<p><a href="ProActiveAdminGuide.html#_tenants">Tenants</a> are organization units that regroup class of users in an isolated environment within the ProActive server.</p>
</div>
<div class="paragraph">
<p>When defined via a file, tenant organization is stored in <code>PROACTIVE_HOME/config/authentication/tenant.cfg</code>.
Each line of this file contains a couple <em>(group_name, tenant_name)</em>, using the syntax <code>group_name:tenant_name</code>.
To define tenants, an administrator of the platform need to associate one or more groups to each tenant.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Each user can belong to only one tenant. Thus, if a user is a member of multiple groups belonging to different tenants, only the first tenant found will be associated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default, the tenant configuration file is empty, below is an example tenant configuration:</p>
</div>
<div class="listingblock">
<div class="title">tenant.cfg</div>
<div class="content">
<pre>scheduleradmins:admins
rmcoreadmins:admins
nsadmin:admins
citizen-ds:citizens
expert-ds:experts
user:users</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_command_line"><a class="anchor" href="ProActiveAdminGuide.html#_command_line"></a><a class="link" href="ProActiveAdminGuide.html#_command_line">4.3.4. Command Line</a></h4>
<div class="paragraph">
<p>In order to create new users, delete an existing user, or modify the groups or password for an existing user, a command-line tool is available.</p>
</div>
<div class="paragraph">
<p>This command is available inside the <strong>tools</strong> folder: <code>PROACTIVE_HOME/tools/proactive-users</code>.
You can check the command syntax using the -h option.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ proactive-users -h
usage: proactive-users [-C | -D | -U]  [-g &lt;GROUPS&gt;] [-gf &lt;GROUPFILE&gt;] [-h] [-kf &lt;KEYFILE&gt;] [-l &lt;LOGIN&gt;] [-lf &lt;LOGINFILE&gt;] [-p
       &lt;PASSWORD&gt;] [-sgf &lt;SOURCEGROUPFILE&gt;] [-slf &lt;SOURCELOGINFILE&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>Here are some example usages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating users</p>
<div class="listingblock">
<div class="content">
<pre>$ proactive-users -C -l user1 -p pwd1 -g user
Created user user1 in H:\Install\scheduling\tools\..\config/authentication/login.cfg
Added group user to user user1</pre>
</div>
</div>
<div class="paragraph">
<p>The user with login "user1", password "pwd1" and group "user" was created</p>
</div>
</li>
<li>
<p>Updating users</p>
<div class="listingblock">
<div class="content">
<pre>$ proactive-users -U -l user1 -p pwd2 -g nsadmins,admin
Changed password for user user1 in H:\Install\scheduling\tools\..\config/authentication/login.cfg
Added group nsadmins to user user1
Added group admin to user user1</pre>
</div>
</div>
<div class="paragraph">
<p>User "user1" now has password pwd2 and groups nsadmins &amp; admin (group "user" was removed).</p>
</div>
</li>
<li>
<p>Deleting users</p>
<div class="listingblock">
<div class="content">
<pre>$ proactive-users -D -l user1
Deleted user user1 in H:\Install\scheduling\tools\..\config/authentication/login.cfg</pre>
</div>
</div>
<div class="paragraph">
<p>User "user1" does not exist any more.</p>
</div>
</li>
<li>
<p>Creating multiple users</p>
<div class="paragraph">
<p>It is also possible to create multiple users at once using a source login file and a source group file.
In that case, the source login file contains, for each user, a line with the format "login:unencrypted_password".
The source group file has the same structure as the <code>PROACTIVE_HOME/config/authentication/group.cfg</code> file.
This can be used, for example, to convert login files used by ProActive Scheduler versions prior to 7.19.0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ proactive-users -C -slf source_login.cfg -sgf source_group.cfg
Adding group admin to user admin1
Created user admin1
Adding group user to user user2
Created user user2
Adding group user to user user1
Created user user1
Stored login file in H:\Install\scheduling\tools\..\config/authentication/login.cfg
Stored group file in H:\Install\scheduling\tools\..\config/authentication/group.cfg</pre>
</div>
</div>
</li>
<li>
<p>Updating multiple users</p>
<div class="paragraph">
<p>Similarly, it is possible to update existing users with source login or group files. It is possible to update only group membership for existing users, or only passwords, or both.</p>
</div>
<div class="paragraph">
<p>The example below shows how to update only groups for existing users:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>proactive-users -U -sgf source_group_2.cfg
Adding group admin to user user1
Updated user user1
Adding group admin to user user2
Updated user user2
Stored login file in H:\Install\scheduling\tools\..\config/authentication/login.cfg
Stored group file in H:\Install\scheduling\tools\..\config/authentication/group.cfg</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ldap"><a class="anchor" href="ProActiveAdminGuide.html#_ldap"></a><a class="link" href="ProActiveAdminGuide.html#_ldap">4.4. LDAP authentication</a></h3>
<div class="paragraph">
<p>The ProActive server is able to connect to an existing <strong>LDAP</strong> server, to check users' logins, passwords and verify users group
memberships.</p>
</div>
<div class="paragraph">
<p>In order to use the LDAP authentication method, change the default authentication method as described in <a href="ProActiveAdminGuide.html#_select_authentication_method">Select authentication method</a>.</p>
</div>
<div class="paragraph">
<p>Additionally, multiple LDAP parameters must be configured in a dedicated LDAP configuration file, such as <strong>path in LDAP tree users</strong>, LDAP <strong>groups</strong> that define
user and admin group membership, <strong>URL</strong> of the LDAP server, LDAP <strong>binding method</strong> used by connection and configuration
of SSL/TLS if you want a secured connection between the ProActive Resource Manager and LDAP.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>PROACTIVE_HOME/tools/configure-ldap</code> command can be used to configure LDAP and test the configuration. See <a href="ProActiveAdminGuide.html#_configure_ldap_active_directory_command">Configure LDAP / Active Directory Command</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We assume that the existing LDAP server is configured in a way that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all existing users and groups are located under a <em>single domain</em></p>
</li>
<li>
<p>user and group name is defined in <em>cn</em> (Common Name) attribute</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># EXAMPLE of user entry
#
# dn: cn=jdoe,dc=example,dc=com
# cn: jdoe
# firstName: John
# lastName: Doe
# objectClass: inetOrgPerson

# EXAMPLE of group entry
#
# dn: cn=mygroup,dc=example,dc=com
# cn: mygroup
# firstName: John
# lastName: Doe
# uniqueMember: cn=djoe,dc=example,dc=com
# objectClass: groupOfUniqueNames</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LDAP configuration is defined in <code>PROACTIVE_HOME/config/authentication/ldap.cfg</code>. You need to:</p>
</div>
<div class="sect3">
<h4 id="_set_the_ldap_server_url"><a class="anchor" href="ProActiveAdminGuide.html#_set_the_ldap_server_url"></a><a class="link" href="ProActiveAdminGuide.html#_set_the_ldap_server_url">4.4.1. Set the LDAP server URL</a></h4>
<div class="paragraph">
<p>First, you have to define the LDAP URL of your organization. This address corresponds to the property: <code>pa.ldap.url</code>.
You have to put a standard LDAP-like URL, for example <strong>ldap://myLdap</strong>.
You can also set a URL with secure access: <strong>ldaps://myLdap:636</strong>.</p>
</div>
<div class="paragraph">
<p>Finally, it is possible to define additional URLs that will be used as backup if the primary URL is not responding.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.url=ldap://myLdapServer1 ldap://myLdapServer2</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_define_user_and_group_filters"><a class="anchor" href="ProActiveAdminGuide.html#_define_user_and_group_filters"></a><a class="link" href="ProActiveAdminGuide.html#_define_user_and_group_filters">4.4.2. Define user and group filters</a></h4>
<div class="paragraph">
<p>The authentication module must be able to find a user ldap entry, given its login name (or any other appropriate ldap attribute).
For each user, the module must also be able to find all group ldap entries associated with the user.</p>
</div>
<div class="paragraph">
<p>The LDAP module uses ldap filters to search for users and groups.</p>
</div>
<div class="sect4">
<h5 id="_user_filters"><a class="anchor" href="ProActiveAdminGuide.html#_user_filters"></a><a class="link" href="ProActiveAdminGuide.html#_user_filters">User filters</a></h5>
<div class="paragraph">
<p>The user filter is defined using the property <code>pa.ldap.user.filter</code>.
The search is performed according to a configurable ldap subtree, controlled by the property <code>pa.ldap.userssubtree</code>.</p>
</div>
<div class="paragraph">
<p><code>pa.ldap.userssubtree</code> must be defined according to the base distinguished name of the ldap server.
It can be further refined to restrict the search to a specific subtree where the users are located.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.userssubtree=dc=mycompany,dc=com</pre>
</div>
</div>
<div class="paragraph">
<p><code>pa.ldap.user.filter</code> must be defined according to the ldap server version.</p>
</div>
<div class="paragraph">
<p>For an <em>OpenLDAP</em> server (V2 or V3), use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.user.filter=(&amp;(objectclass=inetOrgPerson)(uid=%s))</pre>
</div>
</div>
<div class="paragraph">
<p>For an <em>Active Directory</em> server, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.user.filter=(&amp;(objectclass=user)(sAMAccountName=%s))</pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="https://linux.die.net/man/1/ldapsearch">ldapsearch</a> command can be used to test the execution of user filters.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ldapsearch -x -b "dc=mycompany,dc=com" -H ldap://myLdapServer1 -D "cn=admin,dc=mycompany,dc=com" -W '(&amp;(objectclass=user)(sAMAccountName=user1))'</pre>
</div>
</div>
<div class="paragraph">
<p>Can be used to search that the configured user filter is able to locate the ldap entry for <em>user1</em> on an Active Directory server</p>
</div>
</div>
<div class="sect4">
<h5 id="_group_filters"><a class="anchor" href="ProActiveAdminGuide.html#_group_filters"></a><a class="link" href="ProActiveAdminGuide.html#_group_filters">Group filters</a></h5>
<div class="paragraph">
<p>The group filter is defined using the property <code>pa.ldap.group.filter</code>.
The search is performed according to a configurable ldap subtree, controlled by the property <code>pa.ldap.groupssubtree</code>.</p>
</div>
<div class="paragraph">
<p><code>pa.ldap.groupssubtree</code> can be left undefined. In that case, the value configured for <code>pa.ldap.userssubtree</code> will be used.</p>
</div>
<div class="paragraph">
<p>As group membership search can be time-consuming for large organizations, it is recommended to set <code>pa.ldap.groupssubtree</code> to a subtree that contains groups that will be mapped as ProActive server roles.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.groupssubtree=ou=groups,ou=mydepartment,dc=mycompany,dc=com</pre>
</div>
</div>
<div class="paragraph">
<p><code>pa.ldap.group.filter</code> must be defined according to the ldap server version.</p>
</div>
<div class="paragraph">
<p>For an <em>OpenLDAP</em> server V2, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.group.filter=(&amp;(objectclass=groupOfUniqueNames)(uniqueMember=%s))</pre>
</div>
</div>
<div class="paragraph">
<p>For an <em>OpenLDAP</em> server V3, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.group.filter=(&amp;(objectclass=posixGroup)(memberUID=%s))</pre>
</div>
</div>
<div class="paragraph">
<p>The following setting must also be enabled for an open ldap server V3:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.group.search.use.uid=true</pre>
</div>
</div>
<div class="paragraph">
<p>This tells the authentication module to use the login name instead of distinguished name as parameter of the group filter.</p>
</div>
<div class="paragraph">
<p>For an <em>Active Directory</em> server, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.group.filter=(&amp;(objectclass=group)(member:1.2.840.113556.1.4.1941:=%s))</pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the following property controls which LDAP attribute contains the group name in the group ldap entry (it is normally not necessary to change the default value):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.group.name.attr=cn</pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="https://linux.die.net/man/1/ldapsearch">ldapsearch</a> command can be used to test the execution of group filters.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ldapsearch -x -b "dc=mycompany,dc=com" -H ldap://myLdapServer1 -D "cn=admin,dc=mycompany,dc=com" -W '(&amp;(objectclass=group)(member:1.2.840.113556.1.4.1941:=cn=user1,ou=users,dc=mycompany,dc=com))'</pre>
</div>
</div>
<div class="paragraph">
<p>Can be used to search that the configured group filter is able to find all groups associated with <em>user1</em> (contrary to the user filter, the user distinguished name (dn) is given as parameter)</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_ldap_authentication_parameters"><a class="anchor" href="ProActiveAdminGuide.html#_configure_ldap_authentication_parameters"></a><a class="link" href="ProActiveAdminGuide.html#_configure_ldap_authentication_parameters">4.4.3. Configure LDAP authentication parameters</a></h4>
<div class="paragraph">
<p>By default, the ProActive Scheduler binds to LDAP in anonymous mode. You can change this authentication
method by modifying the property <code>pa.ldap.authentication.method</code>. This property can have several values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>none (default value) - the ProActive Resource Manager performs connection to LDAP in anonymous mode.</p>
</li>
<li>
<p>simple - the ProActive Resource Manager performs connection to LDAP with a specified user/password (see below for user password setting).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also specify a SASL mechanism for LDAPv3. There are many SASL available mechanisms: cram-md5, digest-md5, kerberos4. Just set this property to <strong>sasl</strong> to let the ProActive server choose a SASL authentication mechanism.</p>
</div>
<div class="paragraph">
<p>If you specify an authentication method different from 'none' (anonymous connection to LDAP), you must specify a login/password for authentication.</p>
</div>
<div class="paragraph">
<p>There are two properties to set in LDAP configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pa.ldap.bind.login</code> - sets user name for authentication.</p>
</li>
<li>
<p><code>pa.ldap.bind.pwd</code> - sets password for authentication.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The login used should be the <em>distinguished name</em> (dn) of a user with read access on the LDAP server.
The password can be encrypted using the <a href="ProActiveAdminGuide.html#_encrypting_configuration_passwords">encryption command line tool</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_set_ssltls_parameters"><a class="anchor" href="ProActiveAdminGuide.html#_set_ssltls_parameters"></a><a class="link" href="ProActiveAdminGuide.html#_set_ssltls_parameters">4.4.4. Set SSL/TLS parameters</a></h4>
<div class="paragraph">
<p>A secured SSL/TLS layer can be useful if your network is not trusted, and critical information is transmitted between the Resource Manager server and LDAP, such as user passwords.</p>
</div>
<div class="paragraph">
<p>Encryption of the communication to the ldap server can be performed in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>by using the <em>LDAPS</em> protocol (<a href="ProActiveAdminGuide.html#_ssl_encryption">SSL encryption</a>).</p>
</li>
<li>
<p>by using <a href="ProActiveAdminGuide.html#_starttls_encryption">StartTLS encryption</a>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_ssl_encryption"><a class="anchor" href="ProActiveAdminGuide.html#_ssl_encryption"></a><a class="link" href="ProActiveAdminGuide.html#_ssl_encryption">SSL encryption</a></h5>
<div class="paragraph">
<p>First, set the LDAP URL property <code>pa.ldap.url</code> to a URL of type <strong>ldaps://myLdap</strong>. Then, set <code>pa.ldap.authentication.method</code> to <strong>none</strong> so as to delegate authentication to SSL.</p>
</div>
<div class="paragraph">
<p>For using SSL properly, it is required to specify a certificate and authorities (public keys) for the SSL handshake.
Java stores certificates inside a keyStore and public keys inside a trustStore.
In most of the cases, adding authority public keys in a trust store is sufficient.</p>
</div>
<div class="sect5">
<h6 id="_generate_truststore_manually"><a class="anchor" href="ProActiveAdminGuide.html#_generate_truststore_manually"></a><a class="link" href="ProActiveAdminGuide.html#_generate_truststore_manually">Generate trustStore manually</a></h6>
<div class="paragraph">
<p>The following steps show how to create a keystore and trustStore manually using the keytool command (included in the ProActive server installation):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>PROCTIVE_HOME/jre/bin/keytool -import -alias myAlias -file myCertificate -keystore myKeyStore</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROCTIVE_HOME</code> is the path to the ProActive server installation</p>
</li>
<li>
<p><code>myAlias</code> is the alias name of your certificate.</p>
</li>
<li>
<p><code>myCertificate</code> is your private certificate file.</p>
</li>
<li>
<p><code>myKeyStore</code> is the new keyStore file produced in output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command asks you to enter a password for your keyStore.</p>
</div>
<div class="paragraph">
<p>Put the LDAP certificate&#8217;s public key in a trustStore, with the following keytool command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>PROCTIVE_HOME/jre/bin/keytool -import -alias myAlias -file myPublicKey -keystore myTrustStore</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROCTIVE_HOME</code> is the path to the ProActive server installation</p>
</li>
<li>
<p><code>myAlias</code> is the alias name of your certificate&#8217;s public key.</p>
</li>
<li>
<p><code>myPublicKey</code> is your certificate&#8217;s public key file.</p>
</li>
<li>
<p><code>myTrustore</code> is the new trustStore file produced in output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command asks you to enter a password for your trustStore.</p>
</div>
<div class="paragraph">
<p>Finally, in <code>config/authentication/ldap.cfg</code>, set keyStore and trustStore created before to their respective passwords:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set <code>pa.ldap.keystore.path</code> to the path of your keyStore.</p>
</li>
<li>
<p>Set <code>pa.ldap.keystore.passwd</code> to the password defined previously for keyStore.</p>
</li>
<li>
<p>Set <code>pa.ldap.truststore.path</code> to the path of your trustStore.</p>
</li>
<li>
<p>Set <code>pa.ldap.truststore.passwd</code> to the password defined previously for trustStore.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_download_the_ldap_server_certificate"><a class="anchor" href="ProActiveAdminGuide.html#_download_the_ldap_server_certificate"></a><a class="link" href="ProActiveAdminGuide.html#_download_the_ldap_server_certificate">Download the ldap server certificate</a></h6>
<div class="paragraph">
<p>Alternatively to the above procedure, the following command can be used to automatically download the ldap server certificates and install it inside the ProActive server Java Runtime Environment default trustStore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>PROCTIVE_HOME/jre/bin/java -jar PROCTIVE_HOME/tools/installcert-usn-20140115.jar ldap_server_hostname_or_ip:ldap_port</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROCTIVE_HOME</code> is the path to the ProActive server installation.</p>
</li>
<li>
<p><code>ldap_server_hostname_or_ip</code> is the hostname or ip address of the ldap server.</p>
</li>
<li>
<p><code>ldap_port</code> is the port used to connect to the ldap server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command is interactive and will ask the java trustStore password. The default password is <code>changeit</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_starttls_encryption"><a class="anchor" href="ProActiveAdminGuide.html#_starttls_encryption"></a><a class="link" href="ProActiveAdminGuide.html#_starttls_encryption">StartTLS encryption</a></h5>
<div class="paragraph">
<p>StartTLS is an alternative encryption method to SSL. StartTLS works by opening a connection using an unencrypted protocol, then upgrading this connection to an encrypted channel.
The LDAP server must support StartTLS in order to use it.</p>
</div>
<div class="paragraph">
<p>In order to configure StartTLS inside the ProActive LDAP module, the keystore/trustStore operations described in <a href="ProActiveAdminGuide.html#_generate_truststore_manually">Generate trustStore manually</a> or <a href="ProActiveAdminGuide.html#_download_the_ldap_server_certificate">Download the ldap server certificate</a> must be executed.</p>
</div>
<div class="paragraph">
<p>Additionally, the following properties must be set in the LDAP configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.ldap.starttls=true

pa.ldap.connection.pooling=false</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_tenant_attribute"><a class="anchor" href="ProActiveAdminGuide.html#_configure_tenant_attribute"></a><a class="link" href="ProActiveAdminGuide.html#_configure_tenant_attribute">4.4.5. Configure tenant attribute</a></h4>
<div class="paragraph">
<p>A LDAP attribute can be used to associate a <strong>tenant name</strong> to an existing user.</p>
</div>
<div class="paragraph">
<p><a href="ProActiveAdminGuide.html#_tenants">Tenants</a> are organization units that regroup class of users in an isolated environment within the ProActive server.</p>
</div>
<div class="paragraph">
<p>If your LDAP structure contains an user attribute that seems suitable for tenants isolation, set the <code>pa.ldap.tenant.attr</code> property to the name of this attribute. Example atributes: <code>division</code>, <code>department</code>, <code>company</code>, etc.</p>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_tenants">Tenants</a> for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_fall_back_to_file_authentication"><a class="anchor" href="ProActiveAdminGuide.html#_use_fall_back_to_file_authentication"></a><a class="link" href="ProActiveAdminGuide.html#_use_fall_back_to_file_authentication">4.4.6. Use fall back to file authentication</a></h4>
<div class="paragraph">
<p>You can use simultaneously file-based authentication and LDAP-based authentication.
In this scenario, ProActive Scheduler checks at first user/password and group memberships in
the login and group files, as performed in the <a href="ProActiveAdminGuide.html#_file">File login method</a>.
If the user or group attribution is not found in the login/group files, login or groups will be searched via LDAP.</p>
</div>
<div class="paragraph">
<p>There are two configuration options to control this mechanism (present in the <code>ldap.cfg</code> configuration file):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pa.ldap.authentication.fallback</code>: if set to <code>true</code>, the user login/password will be searched first in the login file, and then on the LDAP server. If set to <code>false</code>, only the LDAP server will be queried.</p>
</li>
<li>
<p><code>pa.ldap.group.membership.fallback</code>: if set to <code>true</code>, group memberships will be read from the LDAP server if the user exists, and then from the group file. In that sense, a user will be affected to groups defined in both file and LDAP server. If set to <code>false</code>, only the LDAP server will be queried.</p>
</li>
<li>
<p><code>pa.ldap.tenant.membership.fallback</code>: if set to <code>true</code>, tenant memberships will be read from the tenant file if:</p>
<div class="ulist">
<ul>
<li>
<p>The user does not exist in the LDAP server.</p>
</li>
<li>
<p>The pa.ldap.tenant.attr configuration is not defined.</p>
</li>
<li>
<p>The pa.ldap.tenant.attr configuration is defined, but the configured attribute is empty for the user.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_specific_example_of_ldap_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_specific_example_of_ldap_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_specific_example_of_ldap_configuration">4.4.7. Specific example of LDAP configuration</a></h4>
<div class="paragraph">
<p>Below is an example of LDAP configuration which summarizes the LDAP properties frequently configured in the file <code>config/authentication/ldap.cfg</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># URL of a ldap used for authentication
pa.ldap.url=ldaps://ldap-server.activeeon.com

# path in the LDAP tree users
pa.ldap.userssubtree=ou=users,dc=activeeon,dc=org

# path in the LDAP tree groups
# if empty, then the value for pa.ldap.userssubtree is used
pa.ldap.groupssubtree=ou=groups,dc=activeeon,dc=org

# the filter that allows to find the user dn given its scheduler login
# %s is replaced by the user-submitted login
pa.ldap.user.filter=(&amp;(objectclass=inetOrgPerson)(uid=%s))

# retrieves the groups the user dn belongs to
# the '%s' parameter is the user dn previously retrieved
pa.ldap.group.filter=(&amp;(objectclass=groupOfUniqueNames)(uniqueMember=%s))

# the attribute in the group entry that matches the jaas' group name
pa.ldap.group.name.attr=cn

# authentication method used to connect to LDAP : none (for anonymous connection), simple or a SASL method
pa.ldap.authentication.method=simple

# login name used to perform ldap's binding
# ex uid=narf,ou=People,dc=activeeon,dc=com
pa.ldap.bind.login=cn=admin,dc=activeeon,dc=org

# password used to perform ldap binding
pa.ldap.bind.pwd=change-pwd

# check user password and group membership in login and group files
pa.ldap.authentication.fallback=true

# check user group membership in group file
pa.ldap.group.membership.fallback=true

# check user tenant membership in tenant file
pa.ldap.tenant.membership.fallback=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ldap_with_multiple_domains"><a class="anchor" href="ProActiveAdminGuide.html#_ldap_with_multiple_domains"></a><a class="link" href="ProActiveAdminGuide.html#_ldap_with_multiple_domains">4.5. LDAP authentication with Multiple Domains</a></h3>
<div class="paragraph">
<p>The ProActive server can be configured to authenticate users according to <strong>multiple LDAP domains</strong>.</p>
</div>
<div class="paragraph">
<p>It means that when a user logs in, he/she will need to select which LDAP <a href="ProActiveAdminGuide.html#_domains">domain</a> will be used for the authentication.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/LoginSchedDomain.png" alt="Scheduler Portal login using Domains" width="237" height="220][align="center"">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In that configuration, the user <a href="ProActiveAdminGuide.html#_domains">domain name</a> will be automatically recorded as <a href="ProActiveAdminGuide.html#_tenants">tenant</a> name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Following is a step-by-step procedure to configure it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the file <code>PROACTIVE_HOME\config\authentication\ldap.cfg</code> into multiple files, one for each domain.</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>config\authentication\ldap-domain1.cfg
config\authentication\ldap-domain2.cfg</pre>
</div>
</div>
</li>
<li>
<p>Using the procedure described in chapter <a href="ProActiveAdminGuide.html#_ldap">LDAP authentication</a>, configure each ldap file according to the domain used (each domain will have its own ldap server, bind login name, user subtree, etc.).</p>
</li>
<li>
<p>Follow the steps described in chapter <a href="ProActiveAdminGuide.html#_select_authentication_method">Select authentication method</a> to configure <code>RMMultiLDAPLoginMethod</code> and <code>SchedulerMultiLDAPLoginMethod</code>.</p>
</li>
<li>
<p>In <code>config\rm\settings.ini</code>, uncomment the property <code>pa.rm.multi.ldap.config</code> and define it according to the ldap configuration files you created and their corresponding domain names:</p>
<div class="listingblock">
<div class="content">
<pre>pa.rm.multi.ldap.config=domain1:config/authentication/ldap-domain1.cfg,domain2:config/authentication/ldap-domain2.cfg</pre>
</div>
</div>
<div class="paragraph">
<p>Uncomment also the property <code>pa.rm.allowed.domains</code> and configure with the list of domains that will be available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.rm.allowed.domains=,domain1,domains2</pre>
</div>
</div>
<div class="paragraph">
<p>This expression must start with a comma, it allows login with an empty domain, necessary for internal ProActive users.</p>
</div>
</li>
<li>
<p>In <code>config\scheduler\settings.ini</code>, uncomment the property <code>pa.scheduler.multi.ldap.config</code> and define it according to the ldap configuration files you created and their corresponding domain names:</p>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.multi.ldap.config=domain1:config/authentication/ldap-domain1.cfg,domain2:config/authentication/ldap-domain2.cfg</pre>
</div>
</div>
<div class="paragraph">
<p>Uncomment also the property <code>pa.scheduler.allowed.domains</code> and configure with the list of domains that will be available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.allowed.domains=,domain1,domains2</pre>
</div>
</div>
<div class="paragraph">
<p>This expression must start with a comma, it allows login with an empty domain, necessary for internal ProActive users.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once all the steps above are completed, the ProActive server can be (re)started in order to make the multi-domain ldap configuration effective.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In multi-domain mode, when a user logs in to any portal of the ProActive server, the user must specify the domain used.
A drop-down list of configured domains will appear when login into ProActive portals.</p>
</div>
<div class="paragraph">
<p>For other methods of login (such as command line or REST api), the domain can be specified using the notation <code>domain\user</code>.</p>
</div>
<div class="paragraph">
<p>It is essential to allow the ProActive server select the adequate ldap domain configuration where the user is registered.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pam"><a class="anchor" href="ProActiveAdminGuide.html#_pam"></a><a class="link" href="ProActiveAdminGuide.html#_pam">4.6. PAM authentication</a></h3>
<div class="paragraph">
<p>The ProActive Scheduler &amp; Resource Manager are able to interact with <strong>Linux PAM (Pluggable Authentication Modules)</strong> to check users login/password.
It is not currently possible to retrieve linux system group memberships for users. Thus, groups must be managed using the <code>PROACTIVE_HOME/config/authentication/group.cfg</code> file.</p>
</div>
<div class="paragraph">
<p>In order to enable PAM authentication, follow the steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the PAM login methods in the Scheduler and RM settings:</p>
<div class="listingblock">
<div class="title">PROACTIVE_HOME/config/rm/settings.ini</div>
<div class="content">
<pre>pa.rm.authentication.loginMethod=RMPAMLoginMethod</pre>
</div>
</div>
<div class="listingblock">
<div class="title">PROACTIVE_HOME/config/scheduler/settings.ini</div>
<div class="content">
<pre>pa.scheduler.core.authentication.loginMethod=SchedulerPAMLoginMethod</pre>
</div>
</div>
</li>
<li>
<p>Copy the file <code>PROACTIVE_HOME/config/authentication/proactive-jpam</code> to <code>/etc/pam.d</code> (you must be root to perform this operation).</p>
<div class="paragraph">
<p>You can modify this default PAM configuration file if you need specific PAM policies.</p>
</div>
</li>
<li>
<p>Add the user which will start the scheduler process <code>PROACTIVE_HOME/bin/proactive-server</code> to the <strong>shadow</strong> group</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sudo usermod -aG shadow your_user</code></pre>
</div>
</div>
<div class="paragraph">
<p>After this command, the user, called "your_user" here in this example, will be added to group <strong>shadow</strong>. You may need to logoff/logon before this modification can be effective.</p>
</div>
</li>
<li>
<p>Associate, for each Linux system users which will connect to the Scheduler, a ProActive group.</p>
<div class="paragraph">
<p>Following the procedure described in chapter <a href="ProActiveAdminGuide.html#_file">File authentication</a>, groups must be associated to existing PAM users in the ProActive group file <code>PROACTIVE_HOME/config/authentication/group.cfg</code>.</p>
</div>
<div class="paragraph">
<p>In case of PAM users, the login file should not be modified as password authentication will be performed at the Linux system level. Accordingly, you should not use the <strong>proactive-users</strong> command to associate groups to PAM users.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Similarly to the LDAP authentication, there is a fallback mechanism for login authentication, with the difference that it is always activated.
A user defined in the ProActive login file always has precedence over the same user defined on the Linux system.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_user_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_user_permissions">5. User Permissions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All users authenticated in the ProActive server have their own role according to granted permissions.
ProActive uses the standard
<a href="https://www.oracle.com/technetwork/java/javase/jaas/index.html" target="_blank" rel="noopener">Java Authentication and Authorization Service (JAAS)</a>
to address these needs.</p>
</div>
<div class="paragraph">
<p>The file <code>PROACTIVE_HOME/config/security.java.policy-server</code> allows configuring fine-grained access for all users, e.g. who has the right to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploy ProActive Nodes</p>
</li>
<li>
<p>Execute jobs</p>
</li>
<li>
<p>Pause the Scheduler</p>
</li>
<li>
<p>etc</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_default_groupsroles"><a class="anchor" href="ProActiveAdminGuide.html#_default_groupsroles"></a><a class="link" href="ProActiveAdminGuide.html#_default_groupsroles">5.1. Default Groups/Roles</a></h3>
<div class="paragraph">
<p>The following groups are defined by default in the <code>security.java.policy-server</code> file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>user</code>: can submit a job to the scheduler and control this job execution (pause, kill, etc). Cannot interact with other users jobs.</p>
</li>
<li>
<p><code>guests</code>: can only log into the scheduler/resource manager, but cannot interact with it.</p>
</li>
<li>
<p><code>scheduleradmins</code>: has the same permissions as <code>user</code> but can also control other users' job execution. Can manage the scheduler life-cycle such as pausing or stopping the scheduler.</p>
</li>
<li>
<p><code>nsadmins</code>: this group gives the permission to create, edit or remove Node Sources in the resource manager.</p>
</li>
<li>
<p><code>providers</code>: this group gives only the permission to add nodes to the resource manager or to an existing Node Source.</p>
</li>
<li>
<p><code>rmcoreadmins</code> : this group gives full interaction capability with the resource manager (create, edit, remove Node Sources, add nodes, etc).</p>
</li>
<li>
<p><code>server-admins</code> : this group combine the rights of <code>rmcoreadmins</code> and <code>scheduleradmins</code> groups.</p>
</li>
<li>
<p><code>admin</code> : this group gives full permission on every aspect, this group is <span class="underline">deprecated</span> and is kept for backward compatibility purpose only (use the above <code>server-admins</code> for a global administrator instead).</p>
</li>
<li>
<p><code>watchers</code> : this group allows receiving notification events from the scheduler and resource manager, but cannot perform any action. It is mostly used internally.</p>
</li>
<li>
<p><code>citizen-ds</code> : this group gives enough permissions to software power users who can do moderate data analysis tasks (studio, catalog-portal, workflow-execution, job-analytics).</p>
</li>
<li>
<p><code>expert-ds</code> : this group gives permissions to expert data scientists to collect and clean a wide range of data, and to analyze it to solve business problems (studio, scheduler, catalog-portal, workflow-execution, service-automation, job-analytics, job-gantt, job-planner-calendar-def, job-planner-calendar-def-workflows, job-planner-execution-planning, job-planner-gantt-chart, notification-portal).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creating_new_groups"><a class="anchor" href="ProActiveAdminGuide.html#_creating_new_groups"></a><a class="link" href="ProActiveAdminGuide.html#_creating_new_groups">5.2. Creating New Groups</a></h3>
<div class="paragraph">
<p>New groups can be defined by copying an existing group definition and edit its permissions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>PROACTIVE_HOME/tools/copy-role</code> command can be used to duplicate an existing group inside the <code>security.java.policy-server</code> file. See <a href="ProActiveAdminGuide.html#_copy_role_command">Copy Role Command</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Any modification to the <code>security.java.policy-server</code> file is taken into account periodically by the ProActive server (by default every 30 seconds). This period can be configured in
<code>PROACTIVE_HOME/config/rm/settings.ini:pa.rm.auth.policy.refreshperiod.seconds</code> and <code>PROACTIVE_HOME/config/scheduler/settings.ini:pa.scheduler.auth.policy.refreshperiod.seconds</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A <strong>group</strong> is defined using the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grant principal org.ow2.proactive.authentication.principals.GroupNamePrincipal "mygroup" {
  // roles definition
}</pre>
</div>
</div>
<div class="paragraph">
<p>Each group must at least contain the following permissions (without them, the ProActive software will not work properly):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// AuthPermission is requires for those who would like to access any mbean
permission javax.security.auth.AuthPermission "getSubject";
permission java.lang.RuntimePermission "setContextClassLoader";
permission javax.management.MBeanPermission "-#-[-]", "queryNames";
permission javax.management.MBeanPermission "javax.management.MBeanServerDelegate#-[JMImplementation:type=MBeanServerDelegate]", "addNotificationListener";
permission javax.management.MBeanPermission "org.ow2.proactive.scheduler.core.jmx.mbean.MyAccountMBeanImpl#*[*:*]", "*";
permission javax.management.MBeanPermission "org.ow2.proactive.scheduler.core.jmx.mbean.RuntimeDataMBeanImpl#*[*:*]", "*";
permission javax.management.MBeanPermission "org.ow2.proactive.resourcemanager.core.jmx.mbean.MyAccountMBeanImpl#*[*:*]", "*";
permission javax.management.MBeanPermission "org.ow2.proactive.resourcemanager.core.jmx.mbean.RuntimeDataMBeanImpl#*[*:*]", "*";

// Granting file reading permission i.e. to read RRD database via JMX
permission java.io.FilePermission "&lt;&lt;ALL FILES&gt;&gt;", "read";

// API - access to database
permission java.sql.SQLPermission "setLog";
permission java.sql.SQLPermission "callAbort";
permission java.sql.SQLPermission "setSyncFactory";
permission java.sql.SQLPermission "setNetworkTimeout";
permission java.util.PropertyPermission "*", "read, write";
permission java.net.SocketPermission "*", "accept, connect, listen, resolve";</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to this common set of permissions, the group should contain permissions related to <a href="ProActiveAdminGuide.html#_resource_manager_permissions">Resource Manager access</a>, <a href="ProActiveAdminGuide.html#_scheduler_permissions">Scheduler access</a>, <a href="ProActiveAdminGuide.html#_dataspace_permissions">Dataspace access</a> and <a href="ProActiveAdminGuide.html#_other_components_permissions">Other Components access</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resource_manager_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_resource_manager_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_resource_manager_permissions">5.3. Resource Manager Permissions</a></h3>
<div class="sect3">
<h4 id="_core_resource_manager_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_core_resource_manager_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_core_resource_manager_permissions">5.3.1. Core Resource Manager Permissions</a></h4>
<div class="paragraph">
<p>Resource Manager permissions are defined using the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive.resourcemanager.core.RMCore.&lt;role&gt;"</pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;role&gt;</code> can be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>basic</code>: login, logout.</p>
</li>
<li>
<p><code>read</code>: read access to the Resource Manager information such as node sources, nodes, etc.</p>
</li>
<li>
<p><code>write</code>: ability to use nodes in the Resource Manager (necessary to submit workflows).</p>
</li>
<li>
<p><code>provider</code>: ability to add/remove nodes to/from the Resource Manager.</p>
</li>
<li>
<p><code>nsadmin</code>: ability to create, edit, deploy, undeploy or remove node sources.</p>
</li>
<li>
<p><code>admin</code>: access to some specific administrative features such as server thread dump, loggers level change.</p>
</li>
<li>
<p><code>*</code>: shortcut for all above permissions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a group needs to have access to several of the above permissions, it must be specified in separate lines, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive.resourcemanager.core.RMCore.basic"
permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive.resourcemanager.core.RMCore.read"
permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive.resourcemanager.core.RMCore.write"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resource_manager_permissions_advanced_syntax"><a class="anchor" href="ProActiveAdminGuide.html#_resource_manager_permissions_advanced_syntax"></a><a class="link" href="ProActiveAdminGuide.html#_resource_manager_permissions_advanced_syntax">5.3.2. Resource Manager Permissions Advanced Syntax</a></h4>
<div class="paragraph">
<p><code>ServiceRolePermission</code> is a coarse-grained permission definition, in order to fine tune permissions, it is possible to use either of the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.MethodCallPermission "org.ow2.proactive.resourcemanager.core.RMCore.&lt;method_name&gt;";
permission org.ow2.proactive.permissions.DeniedMethodCallPermission "org.ow2.proactive.resourcemanager.core.RMCore.&lt;method_name&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><code>MethodCallPermission</code> is an additive permission definition, which allows a member of the group to call the Java method <code>&lt;method_name&gt;</code> of class <code>org.ow2.proactive.resourcemanager.core.RMCore</code>.</p>
</div>
<div class="paragraph">
<p><code>DeniedMethodCallPermission</code> is a subtractive permission definition, which prevents a member of the group from calling the Java method <code>&lt;method_name&gt;</code> of class <code>org.ow2.proactive.resourcemanager.core.RMCore</code>.</p>
</div>
<div class="paragraph">
<p>The description of <code>org.ow2.proactive.resourcemanager.core.RMCore</code> methods is beyond the scope of this documentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_additional_resource_manager_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_additional_resource_manager_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_additional_resource_manager_permissions">5.3.3. Additional Resource Manager Permissions</a></h4>
<div class="paragraph">
<p>Additionally, administrative roles should include the following permissions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission javax.management.MBeanPermission "org.ow2.proactive.resourcemanager.core.jmx.mbean.AllAccountsMBeanImpl#*[*:*]", "*";
permission javax.management.MBeanPermission "org.ow2.proactive.resourcemanager.core.jmx.mbean.ManagementMBeanImpl#*[*:*]", "*";</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduler_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_permissions">5.4. Scheduler Permissions</a></h3>
<div class="sect3">
<h4 id="_core_scheduler_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_core_scheduler_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_core_scheduler_permissions">5.4.1. Core Scheduler Permissions</a></h4>
<div class="paragraph">
<p>Scheduler permissions are defined using the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive.scheduler.core.SchedulerFrontend.&lt;role&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;role&gt;</code> can be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>basic</code>: login, logout.</p>
</li>
<li>
<p><code>read</code>: read access to scheduler information (list of jobs, etc).</p>
</li>
<li>
<p><code>write</code>: ability to submit, pause, resume, kill or remove a job.</p>
</li>
<li>
<p><code>admin</code>: access to some specific administrative features such as pause, freeze and stop the scheduler, accounting information, etc.</p>
</li>
<li>
<p><code>*</code>: shortcut for all above permissions.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_permissions_advanced_syntax"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_permissions_advanced_syntax"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_permissions_advanced_syntax">5.4.2. Scheduler Permissions Advanced Syntax</a></h4>
<div class="paragraph">
<p><code>ServiceRolePermission</code> is a coarse-grained permission definition, in order to fine tune permissions, it is possible to use either of the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.MethodCallPermission "org.ow2.proactive.scheduler.core.SchedulerFrontend.&lt;method_name&gt;";
permission org.ow2.proactive.permissions.DeniedMethodCallPermission "org.ow2.proactive.scheduler.core.SchedulerFrontend.&lt;method_name&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><code>MethodCallPermission</code> is an additive permission definition, which allows a member of the group to call the Java method <code>&lt;method_name&gt;</code> of class <code>org.ow2.proactive.scheduler.core.SchedulerFrontend</code>.</p>
</div>
<div class="paragraph">
<p><code>DeniedMethodCallPermission</code> is a subtractive permission definition, which prevents a member of the group from calling the Java method <code>&lt;method_name&gt;</code> of class <code>org.ow2.proactive.scheduler.core.SchedulerFrontend</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_additional_scheduler_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_additional_scheduler_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_additional_scheduler_permissions">5.4.3. Additional Scheduler Permissions</a></h4>
<div class="paragraph">
<p>In addition to these standard set of permissions, a few special permissions are defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.HandleOnlyMyJobsPermission "true";</pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory</em> for any user that submits workflows, defines whether each member of the group can interact (kill, pause, resume, etc) with other users jobs (<code>false</code>) or only with the jobs that belong to the user (<code>true</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.OtherUsersJobReadPermission;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Optional</em> permission that allows a group of users to have read-only access to other users jobs.
With this permission enabled, a user will be able to read the details of other users' jobs (such as logs, results, etc.) but will not be able to perform an operation that will modify the job execution (pause, kill, etc.).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.ChangePriorityPermission "1,2,3";</pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory</em> for any user that submits workflows, defines the set of <a href="../user/ProActiveUserGuide.html#_job_priority">Job Priorities</a> that the group is allowed to use in submitted workflows.</p>
</div>
<div class="paragraph">
<p>Possible values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>0</code>: Idle</p>
</li>
<li>
<p><code>1</code>: Lowest</p>
</li>
<li>
<p><code>2</code>: Low</p>
</li>
<li>
<p><code>3</code>: Normal</p>
</li>
<li>
<p><code>4</code>: High</p>
</li>
<li>
<p><code>5</code>: Highest</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a member tries to submit a workflow with a priority not included in the defined set, an error will occur and the submission will be cancelled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.HandleJobsWithGenericInformationPermission "&lt;gi_definitions&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><em>Optional</em> permission that allows a group of users to interact with any job that contain the mentioned <a href="../user/ProActiveUserGuide.html#_generic_information">Generic Information</a>.</p>
</div>
<div class="paragraph">
<p><code>&lt;gi_definitions&gt;</code> can either be empty or contain a comma separated list of generic information pairs, such as <code>gi1=value1,gi2=value2</code>.</p>
</div>
<div class="paragraph">
<p>When more than one generic information is specified, then a member can interact with jobs which contain all generic information specified with their values. A job which contain a single generic information in the list will not be elected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.ConnectToResourceManagerPermission;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Administrative</em> permission that allows linking the scheduler to an existing resource manager.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.ChangePolicyPermission;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Administrative</em> permission that allows changing the scheduler&#8217;s <a href="ProActiveAdminGuide.html#_scheduling_policies">Scheduling Policy</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.TenantAllAccessPermission;</pre>
</div>
</div>
<div class="paragraph">
<p><em>Administrative</em> permission that allows access to all tenants when tenant isolation is enabled. See <a href="ProActiveAdminGuide.html#_tenants">Tenants</a>.</p>
</div>
<div class="paragraph">
<p>Finally, the following permissions are needed for <em>administrative</em> access to the scheduler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission javax.management.MBeanPermission "org.ow2.proactive.scheduler.core.jmx.mbean.AllAccountsMBeanImpl#*[*:*]", "*";
permission javax.management.MBeanPermission "org.ow2.proactive.scheduler.core.jmx.mbean.ManagementMBeanImpl#*[*:*]", "*";</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dataspace_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_dataspace_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_dataspace_permissions">5.5. Dataspace Permissions</a></h3>
<div class="paragraph">
<p>Access to the <a href="../user/ProActiveUserGuide.html#_global_and_user_spaces">Global Space</a> through <a href="ProActiveAdminGuide.html#_glossary_workflow_studio">Workflow Studio portal</a> or <a href="ProActiveAdminGuide.html#_glossary_workflow_automation_portal">Workflow Execution portal</a> is controlled with the following permission:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive_grid_cloud_portal.dataspace.RestDataspaceImpl.global.&lt;role&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;role&gt;</code> can be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>read</code>: read access to the dataspace (list contents, download file).</p>
</li>
<li>
<p><code>write</code>: write access to the dataspace (create folder, delete folder, upload file).</p>
</li>
<li>
<p><code>*</code>: shortcut for all above permissions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, access to the <a href="../user/ProActiveUserGuide.html#_global_and_user_spaces">User Space</a> through <a href="ProActiveAdminGuide.html#_glossary_workflow_studio">Workflow Studio portal</a> or <a href="ProActiveAdminGuide.html#_glossary_workflow_automation_portal">Workflow Execution portal</a> is controlled with the following permission:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.ServiceRolePermission "org.ow2.proactive_grid_cloud_portal.dataspace.RestDataspaceImpl.user.*";</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_components_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_other_components_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_other_components_permissions">5.6. Other Components Permissions</a></h3>
<div class="paragraph">
<p>In addition to Resource Manager and Scheduler, a few permissions can be defined for other components.</p>
</div>
<div class="sect3">
<h4 id="_portals_access"><a class="anchor" href="ProActiveAdminGuide.html#_portals_access"></a><a class="link" href="ProActiveAdminGuide.html#_portals_access">5.6.1. Portals access</a></h4>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive_grid_cloud_portal.common.PortalAccessPermission "&lt;portal_list&gt;";</pre>
</div>
</div>
<div class="paragraph">
<p><em>Mandatory</em> permission that defines which portals are accessible for members of the group.</p>
</div>
<div class="paragraph">
<p><code>&lt;portal_list&gt;</code> is either <code>*</code> to allow accessing all portals or a comma-separated list of portal names:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rm</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_rm_web_interface">Resource Manager portal</a>.</p>
</li>
<li>
<p><code>scheduler</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_scheduler_web_interface">Scheduler portal</a>.</p>
</li>
<li>
<p><code>studio</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_workflow_studio">Workflow Studio portal</a>.</p>
</li>
<li>
<p><code>automation-dashboard</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_automation_dashboard">Automation Dashboard portal</a>, which contain the following portals
(note that in order to access any of the portal below, <code>automation-dashboard</code> must be accessible):</p>
<div class="ulist">
<ul>
<li>
<p><code>workflow-execution</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_workflow_automation_portal">Workflow Execution portal</a>.</p>
</li>
<li>
<p><code>catalog</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_catalog_portal">Catalog portal</a>.</p>
</li>
<li>
<p><code>health-dashboard</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_health_dashboard">Health Dashboard</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics">Analytics portal</a>.</p>
</li>
<li>
<p><code>job-analytics</code>: allow access to <a href="ProActiveAdminGuide.html#_glossary_analytics_portal">Job Analytics</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics">Analytics portal</a>.</p>
</li>
<li>
<p><code>job-gantt</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_job_gantt">Job Gantt</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics">Analytics portal</a>.</p>
</li>
<li>
<p><code>node-gantt</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_node_gantt">Node Gantt</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_analytics">Analytics portal</a>.</p>
</li>
<li>
<p><code>job-planner-calendar-def</code>: allow access to <a href="ProActiveAdminGuide.html#_glossary_job_planner_calendar_definition_portal">Calendar Definition</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_job_planner_portal">Job Planner portal</a>.</p>
</li>
<li>
<p><code>job-planner-calendar-def-workflows</code>: allow access to <a href="ProActiveAdminGuide.html#_glossary_job_planner_calendar_asssociation">Calendar Associations</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_job_planner_portal">Job Planner portal</a>.</p>
</li>
<li>
<p><code>job-planner-execution-planning</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_job_planner_execution_planning">Execution Planning</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_job_planner_portal">Job Planner portal</a>.</p>
</li>
<li>
<p><code>job-planner-gantt-chart</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_job_planner_gantt_chart">Gantt Chart</a>, part of the <a href="ProActiveAdminGuide.html#_glossary_job_planner_portal">Job Planner portal</a>.</p>
</li>
<li>
<p><code>event-orchestration</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_event_orchestration_portal">Event Orchestration portal</a>.</p>
</li>
<li>
<p><code>service-automation</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_service_automation_portal">Service Automation portal</a>.</p>
</li>
<li>
<p><code>notification-portal</code>: allow access to the <a href="ProActiveAdminGuide.html#_glossary_notification_portal">Notification portal</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_service_automation_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_service_automation_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_service_automation_permissions">5.6.2. Service Automation permissions</a></h4>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.PcaAdminPermission;</pre>
</div>
</div>
<div class="paragraph">
<p>This permission gives <em>administrative</em> access to <a href="ProActiveAdminGuide.html#_glossary_cloud_automation_service">Service Automation</a>. A member of a group with such permission can interact with any service (not only owned services).</p>
</div>
</div>
<div class="sect3">
<h4 id="_job_planner_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_job_planner_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_job_planner_permissions">5.6.3. Job Planner permissions</a></h4>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.scheduler.permissions.JobPlannerAllAccessPermission;</pre>
</div>
</div>
<div class="paragraph">
<p>This permission gives <em>administrative</em> access to <a href="ProActiveAdminGuide.html#_glossary_job_planner">Job Planner</a>. A member of a group with such permission can interact with any calendar association (not only owned associations).</p>
</div>
</div>
<div class="sect3">
<h4 id="_notification_service_permissions"><a class="anchor" href="ProActiveAdminGuide.html#_notification_service_permissions"></a><a class="link" href="ProActiveAdminGuide.html#_notification_service_permissions">5.6.4. Notification Service permissions</a></h4>
<div class="listingblock">
<div class="content">
<pre>permission org.ow2.proactive.permissions.NotificationAdminPermission;</pre>
</div>
</div>
<div class="paragraph">
<p>This permission gives <em>administrative</em> access to <a href="ProActiveAdminGuide.html#_glossary_notification_service">Notification Service</a>, allowing to delete any notification.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploy_proactive_nodes"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_proactive_nodes"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_proactive_nodes">6. Deploy ProActive Nodes</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the ProActive Scheduler, Computational Resources are managed by the ProActive Resource Manager component.</p>
</div>
<div class="paragraph">
<p>The ProActive Resource Manager supports ProActive Nodes aggregation from heterogeneous environments.
As a node is just a process running somewhere, the process of communication to such nodes is unified.
The only part which has to be defined is the procedure of nodes deployment which could be quite
different depending on infrastructures and their limitations. After installation of the server and node parts, it is
possible to configure an automatic nodes deployment. Basically, you can tell the Resource Manager how to
launch nodes and when.</p>
</div>
<div class="paragraph">
<p>In the ProActive Resource Manager, all the computational resources (<a href="ProActiveAdminGuide.html#_glossary_compute_host">Compute Hosts</a>) are managed as a set of <a href="ProActiveAdminGuide.html#_glossary_node_source"><strong>Node Sources</strong></a>.
Each node source contains a set of <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> which shares the same deployment mechanism and access policy.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Examples of a Node Source:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a cluster with SSH access where nodes are available from 9 a.m. to 9 p.m.</p>
</li>
<li>
<p>nodes from Amazon EC2 available permanently for users from group 'cloud'.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/rm-portal.png" alt="rm portal">
</div>
</div>
<div class="paragraph">
<p>As shown in the previous screenshot, the ProActive Resource Manager provides a <a href="ProActiveAdminGuide.html#_glossary_rm_web_interface"><strong>Resource Manager Web Interface</strong></a> to show and manage all the node sources with its nodes.</p>
</div>
<div class="paragraph">
<p>Adding a cluster of Compute Hosts to the ProActive Resource Manager requires to <strong>create a node source</strong>.
Its typical process involves copying the necessary ProActive binary files to all those Compute Hosts,
running ProActive Nodes on the hosts, and connecting the nodes to the ProActive Resource Manager.
There are two principal ways of doing that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Launch a process of ProActive Node <strong>on the Compute Host</strong> and connect it to the ProActive Resource Manager</p>
</li>
<li>
<p>Initiate the deployment <strong>from the ProActive Resource Manager</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are not familiar with ProActive Workflows &amp; Scheduling product you may want to try the <a href="ProActiveAdminGuide.html#run_node_manually"><strong>first method</strong></a> as it&#8217;s directly executed on the Compute Hosts.
Combined with <a href="ProActiveAdminGuide.html#_proactive_agents"><strong>ProActive Agents</strong></a> which control and limit the resources utilization on the Compute Hosts,
it gives you the same result as the <strong>second method</strong>.</p>
</div>
<div class="paragraph">
<p>The <a href="ProActiveAdminGuide.html#_deploy_nodes_from_proactive_rm"><strong>second method</strong></a> commands the ProActive Resource Manager to remotely launch the process of ProActive Nodes on Compute Hosts.
The method implies that you have a remote access to Compute Hosts (e.g., SSH access).</p>
</div>
<div class="paragraph">
<p>The ProActive Nodes can be deployed on various kinds of computational resources, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the local Server Host (i.e., the machine where the ProActive server is installed)</p>
</li>
<li>
<p>remote compute servers</p>
</li>
<li>
<p>Cloud Platforms (e.g., Amazon Web Services, OpenStack, GoogleComputeEngine)</p>
</li>
<li>
<p>an existing cluster managed by another scheduler (e.g., SLURM, LSF, PBS)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A node source is defined by two parts of configurations: <a href="ProActiveAdminGuide.html#_glossary_node_source_infrastructure"><strong>Node Source Infrastructure</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_node_source_policy"><strong>Node Source Policy</strong></a>.
Each <strong>Node Source Infrastructure</strong> defines the deployment mechanism for a specific kind of computational resources.
To support the deployment of these various computational resources, the ProActive Scheduler provides a set of supported <a href="ProActiveAdminGuide.html#_node_source_infrastructures">Node Source Infrastructures</a>.
The <strong>Node Source Policy</strong> controls the resource usage. See the section <a href="ProActiveAdminGuide.html#_control_the_resource_usage">Control the resource usage</a> for more details.
This section concentrates on the deployment mechanism of ProActive Nodes which is defined by the Node Source Infrastructure.</p>
</div>
<div class="paragraph">
<p>In the ProActive Resource Manager, there is always a <strong>default node source</strong> consisting of a <a href="ProActiveAdminGuide.html#_default_infrastructure">Default Infrastructure</a>
and <a href="ProActiveAdminGuide.html#_static_policy">Static Policy</a>. It is not able to deploy nodes anywhere but makes it possible to add existing nodes to the RM.</p>
</div>
<div class="paragraph">
<p>When you connect the Compute Hosts to the ProActive Resource Manager through the <strong>first method</strong>, a node source of <a href="ProActiveAdminGuide.html#_default_infrastructure"><strong>Default Infrastructure</strong></a> is automatically created.
Through the <strong>second method</strong>, you just need to choose the proper node source infrastructure and fill out its required parameters.</p>
</div>
<div class="sect2">
<h3 id="run_node_manually"><a class="anchor" href="ProActiveAdminGuide.html#run_node_manually"></a><a class="link" href="ProActiveAdminGuide.html#run_node_manually">6.1. Deploy ProActive Nodes manually</a></h3>
<div class="paragraph">
<p>Let&#8217;s take a closer look at the first method described above. To deploy a ProActive Node from the Compute Host, you have three ways to do it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>using <a href="ProActiveAdminGuide.html#proactive_node"><strong>proactive-node</strong></a> command</p>
</li>
<li>
<p>using <a href="ProActiveAdminGuide.html#node_jar"><strong>node.jar</strong></a></p>
</li>
<li>
<p>using <a href="ProActiveAdminGuide.html#proactive_node_autoupdate"><strong>proactive-node-autoupdate</strong></a> command</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="proactive_node"><a class="anchor" href="ProActiveAdminGuide.html#proactive_node"></a><a class="link" href="ProActiveAdminGuide.html#proactive_node">6.1.1. Using proactive-node command</a></h4>
<div class="paragraph">
<p>To use <code>proactive-node</code> command, you need to unpack the ProActive node release archive inside the Compute Host and run the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-node -r pnp://SCHEDULER_ADDRESS:64738</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>-r</code> option is used to specify the URL of the <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>.
You can find this URL in the output of the <a href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">ProActive Scheduler</a> (the Resource Manager URL).
For example, in case of the following sample output of the ProActive server command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>The router created on localhost:33647
Starting the scheduler...
Starting the resource manager...
The resource manager with 4 local nodes created on pnp://localhost:41303/
The scheduler created on pnp://localhost:41303/
The web application /automation-dashboard created on http://localhost:8080/automation-dashboard
The web application /studio created on http://localhost:8080/studio
The web application /job-analytics created on http://localhost:8080/job-analytics
The web application /notification-service created on http://localhost:8080/notification-service
The web application /cloud-automation-service created on http://localhost:8080/cloud-automation-service
The web application /catalog created on http://localhost:8080/catalog
The web application /proactive-cloud-watch created on http://localhost:8080/proactive-cloud-watch
The web application /scheduler created on http://localhost:8080/scheduler
The web application /scheduling-api created on http://localhost:8080/scheduling-api
The web application /connector-iaas created on http://localhost:8080/connector-iaas
The web application /rm created on http://localhost:8080/rm
The web application /rest created on http://localhost:8080/rest
The web application /job-planner created on http://localhost:8080/job-planner
*** Get started at http://localhost:8080 **</pre>
</div>
</div>
<div class="paragraph">
<p>You should use <code>pnp://localhost:41303/</code> as the Resource Manager URL.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use <strong>discovery</strong> to let the ProActive Node find the URL to connect to on its own.
 Simply run <code>proactive-node</code> without any parameter to use discovery.
 It uses broadcast to retrieve the URL so this feature might not work depending on your network configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to run multiple tasks at the same time on the same machine, you can either start a few <code>proactive-node</code> processes
or start multiple nodes from the same process using the <code>-w</code> command line option.</p>
</div>
</div>
<div class="sect3">
<h4 id="node_jar"><a class="anchor" href="ProActiveAdminGuide.html#node_jar"></a><a class="link" href="ProActiveAdminGuide.html#node_jar">6.1.2. Using node.jar</a></h4>
<div class="paragraph">
<p>It is also possible to launch a ProActive Node without copying the ProActive Server release to the Compute Host:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open a browser on the Compute Host.</p>
</li>
<li>
<p>Navigate to the Resource Manager Web Interface. You can find the URL in the output of the <a href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">ProActive Scheduler</a> (the Resource Manager web application URL, e.g., <code>http://localhost:8080/rm</code>).</p>
</li>
<li>
<p>Use default demo/demo account to access the Resource Manager Web Interface.</p>
</li>
<li>
<p>Click on 'Portal&#8594;Launch' to download <strong>node.jar</strong>.</p>
</li>
<li>
<p>Click on 'Portal&#8594;Create Credentials' and download your credential file.</p>
</li>
<li>
<p>Create a Node Source using the infrastructure DefaultInfrastructureManager.</p>
</li>
<li>
<p>Run it:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ java -Dproactive.communication.protocol=pnp -jar node.jar -f CREDENTIAL_FILE -s NAME</pre>
</div>
</div>
<div class="paragraph">
<p>Where NAME is the name of the node source.
It should connect to the ProActive Resource Manager automatically using the discovery mechanism otherwise you might
have to set the URL to connect to with the <code>-r</code> parameter.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you would like to execute several Tasks at the same time on one host, you can either launch several ProActive
Node process or use the <em>-w</em> parameter to run multiple nodes in the same process. A node executes one Task at a time.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="proactive_node_autoupdate"><a class="anchor" href="ProActiveAdminGuide.html#proactive_node_autoupdate"></a><a class="link" href="ProActiveAdminGuide.html#proactive_node_autoupdate">6.1.3. Using proactive-node-autoupdate command</a></h4>
<div class="paragraph">
<p>This method is a combination of the two above, it starts a node from the command line, and makes sure the node library (node.jar) is synchronized with the latest server version.</p>
</div>
<div class="paragraph">
<p>The <code>proactive-node-autoupdate</code> command acts as a bootstrap and spawns a new java virtual machine with the up-to-date library classpath.</p>
</div>
<div class="paragraph">
<p>Launching the node is similar to the <code>proactive-node</code> command, additional options must be specified to allow the download of the node.jar from the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-node-autoupdate -r pnp://SCHEDULER_ADDRESS:64738 -nju http://SCHEDULER_ADDRESS:8080/rest/node.jar -njs /tmp/node.jar -nja</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>-nju</code> option is used to specify the http URL of the <strong>node.jar</strong>.
You can find this URL in the output of the <a href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">ProActive Scheduler</a>, the node.jar URL is built by appending <strong>/rest/node.jar</strong> to the base HTTP URL of the server.</p>
</div>
<div class="paragraph">
<p><code>-nju</code> option is used to specify where the node.jar will be stored locally on the machine.</p>
</div>
<div class="paragraph">
<p>Finally, <code>-nja</code> option, when enabled, specifies that the <code>proactive-node-autoupdate</code> will be always up, it means that it will automatically restart when the node terminates (for example in case of server upgrades).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_proactive_agents"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_agents"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_agents">6.2. Deploy ProActive Nodes via Agents</a></h3>
<div class="paragraph">
<p>In your production environment you might want to control and limit the resources utilization on some or all Compute Hosts,
especially if those are desktop machines where people perform their daily activities. Using <strong>ProActive Agent</strong> you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Control the number of ProActive Node processes on each Compute Host</p>
</li>
<li>
<p>Launch ProActive Nodes automatically when a Compute Host starts</p>
</li>
<li>
<p>Restart ProActive Nodes if they fail for some reason and reconnect them to ProActive Resource Manager</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>ProActive Agents</strong> exists for both <a href="ProActiveAdminGuide.html#_proactive_linux_agent">Linux</a> and <a href="ProActiveAdminGuide.html#_proactive_windows_agent">Windows</a>
 operating systems.</p>
</div>
<div class="sect3">
<h4 id="_proactive_linux_agent"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_linux_agent"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_linux_agent">6.2.1. ProActive Linux Agent</a></h4>
<div class="paragraph">
<p>The ProActive Agent for Linux can be downloaded from ActiveEon&#8217;s <a href="https://www.activeeon.com/community-downloads" target="_blank" rel="noopener">website</a>.</p>
</div>
<div class="paragraph">
<p>To install the ProActive Agent on Debian based distributions (the archive name will vary depending on the version and architecture):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo apt install ./proactive-agent.deb</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Some extra dependencies might be required, to install them: <code>sudo apt-get -f install</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To install the ProActive Agent on Redhat based distributions (the archive name will vary depending on the version and architecture):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo rpm -i proactive-agent.rpm</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Some extra dependencies might be required, to install them you need to install each dependency individually using <code>sudo yum install</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By default the Linux Agent will launch locally as many nodes as the number of
CPU cores available on the host minus one. The URL to use for connecting nodes
to the Resource Manager can be configured in <code>/opt/proactive-agent/config.xml</code>,
along with several other parameters. If no URL is set, then broadcast is used
for auto discovery. However, this feature might not work depending on your
network configuration. Consequently, it is recommended to set the Resource
Manager URL manually.</p>
</div>
<div class="paragraph">
<p>Logs related to the Agent daemon are located in
<code>/opt/proactive-agent/proactive-agent.log</code>.</p>
</div>
<div class="paragraph">
<p>Binaries, configuration files and logs related to ProActive nodes started by the
agent are available at <code>/opt/proactive-node/</code>, respectively in subfolders <code>dist/lib</code>,
<code>config</code> and <code>logs</code>.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_linux_agent"><a class="anchor" href="ProActiveAdminGuide.html#_configuring_the_linux_agent"></a><a class="link" href="ProActiveAdminGuide.html#_configuring_the_linux_agent">Configuring the Linux Agent</a></h5>
<div class="paragraph">
<p>To configure the agent behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stop the Linux Agent</p>
<div class="listingblock">
<div class="content">
<pre>sudo /etc/init.d/proactive-agent stop</pre>
</div>
</div>
</li>
<li>
<p>Update the <strong>config.xml</strong> file in <code>/opt/proactive-agent</code> folder</p>
<div class="paragraph">
<p>In case there is no such directory, create the directory. Then, create the <strong>config.xml</strong> file or create a symbolic link</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo mkdir -p /opt/proactive-agent
sudo ln -f -s &lt;path-to-config-file&gt; /opt/proactive-agent/config.xml</pre>
</div>
</div>
</li>
<li>
<p>Change the ownership of the <strong>config.xml</strong> file</p>
<div class="listingblock">
<div class="content">
<pre>sudo chown -Rv proactive:proactive config.xml</pre>
</div>
</div>
<div class="paragraph">
<p>If the group named "proactive" does not exist, create the group and add "proactive" user to the group:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo groupadd proactive
sudo usermod -ag proactive proactive</pre>
</div>
</div>
</li>
<li>
<p>Start the Linux Agent</p>
<div class="literalblock">
<div class="content">
<pre>sudo /etc/init.d/proactive-agent start</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_uninstalling_the_linux_agent"><a class="anchor" href="ProActiveAdminGuide.html#_uninstalling_the_linux_agent"></a><a class="link" href="ProActiveAdminGuide.html#_uninstalling_the_linux_agent">Uninstalling the Linux Agent</a></h5>
<div class="paragraph">
<p>On Debian based distributions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo apt purge proactive-agent</pre>
</div>
</div>
<div class="paragraph">
<p>On Redhat based distributions:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo yum remove proactive-agent</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_proactive_windows_agent"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_windows_agent"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_windows_agent">6.2.2. ProActive Windows Agent</a></h4>
<div class="paragraph">
<p>The ProActive Windows Agent is a <strong>Windows Service</strong>: a long-running executable that performs specific
functions and which is designed to not require user intervention. The agent is able to create a ProActive Node
 on the local machine and to connect it to the <strong>ProActive Resource Manager</strong>.</p>
</div>
<div class="paragraph">
<p>After being installed, it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Loads the user&#8217;s configuration</p>
</li>
<li>
<p>Creates schedules according to the working plan specified in the configuration</p>
</li>
<li>
<p>Spawns a ProActive Node that will run a specified java class depending on the selected connection type. 3 types of connections are available:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Local Registration</strong> - The specified java class will create a ProActive Node and register it locally.</p>
</li>
<li>
<p><strong>Resource Manager Registration</strong> - The specified java class will create a ProActive Node and register
it in the specified Resource Manager, thus being able to execute java or native tasks received from the Scheduler. It is is important
to note that a ProActive Node running tasks can potentially spawn child processes.</p>
</li>
<li>
<p><strong>Custom</strong> - The user can specify his own java class.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Watches the spawned ProActive Nodes in order to comply with the following limitations:</p>
<div class="ulist">
<ul>
<li>
<p><strong>RAM limitation</strong> - The user can specify a maximum amount of memory allowed for a ProActive Node and its children. If the limit is reached, then all processes are automatically killed.</p>
</li>
<li>
<p><strong>CPU limitation</strong> - The user can specify a maximum CPU usage allowed for a ProActive Node and its children. If the limit is exceeded by the sum of CPU usages of all processes, they are automatically throttled to reach the given limit.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Restarts the spawned ProActive Node in case of failures with a timeout policy.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_install_agents_on_windows"><a class="anchor" href="ProActiveAdminGuide.html#_install_agents_on_windows"></a><a class="link" href="ProActiveAdminGuide.html#_install_agents_on_windows">6.2.3. Install Agents on Windows</a></h4>
<div class="paragraph">
<p>The ProActive Windows Agent installation pack is available on the <a href="https://www.activeeon.com/community-downloads" target="_blank" rel="noopener">ProActive website</a>.
Run the <code>setup.exe</code> file and follow instructions. When the following dialog appears:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/install_config.png" alt="install config" width="512" height="256">
</div>
<div class="title">Figure 4. Windows agent installation</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Specify the directory that will contain the <strong>configuration</strong> file named <code>PAAgent-config.xml</code>, note that if this file already exists in the specified directory it will be re-used.</p>
</li>
<li>
<p>Specify the directory that will contain the <strong>log files</strong> of the ProActive Agent and the spawned runtimes.</p>
</li>
<li>
<p>Specify an existing, local <strong>account</strong> under which the ProActive Nodes will be spawned. It is highly recommended to specify an account that is not part of the Administrators group to isolate the ProActive Node and reduce security risks.</p>
</li>
<li>
<p>The <strong>password</strong> is encrypted using Microsoft AES Cryptographic Provider and only Administrators have access permissions to the keyfile (restrict.dat) this is done using the SubInACLtool.</p>
</li>
<li>
<p>If the specified account does not exist the installation program will prompt the user to create a non-admin account with the required privileges.</p>
<div class="paragraph">
<p>Note that the ProActive Agent service is installed under LocalSystem account, this should not be changed,
however it can be using the <code>services.msc</code> utility. ('Control Panel&#8594;Administrative Tools&#8594;Services')</p>
</div>
</li>
<li>
<p>If you want that any non-admin user (except guest accounts) be able to start/stop the ProActive Agent service check the "Allow everyone to start/stop" box. If this option is checked the installer will use the SubInACL tool. If the tool is not installed in the <code>Program Files\Windows Resource Kits\Tools</code> directory the installer will try to download its installer from the official Microsoft page.</p>
</li>
<li>
<p>The installer will check whether the selected user account has the required privileges. If not follow the steps to add these privileges:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the 'Administrative Tools' of the 'Control Panel', open the 'Local Security Policy'.</p>
</li>
<li>
<p>In 'Security Settings', select 'Local Policies' then select 'User Rights Assignments'.</p>
</li>
<li>
<p>Finally, in the list of policies, open the properties of 'Replace a process-level token' policy and add the needed user. Do the same for 'Adjust memory quotas for a process'. For more information about these privileges refer to the official Microsoft page.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>At the end of the installation, the ProActive Agent Control utility should be started. This next section explains how to configure it.</p>
</div>
<div class="paragraph">
<p>To uninstall the ProActive Windows Agent, simply run 'Start&#8594;Programs&#8594;ProActiveAgent&#8594;Uninstall ProActive Agent'.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configure_agents_on_windows"><a class="anchor" href="ProActiveAdminGuide.html#_configure_agents_on_windows"></a><a class="link" href="ProActiveAdminGuide.html#_configure_agents_on_windows">6.2.4. Configure Agents on Windows</a></h4>
<div class="paragraph">
<p>To configure the Agent, launch 'Start&#8594;Programs&#8594;ProActiveAgent&#8594;AgentControl' program or click on
the notify icon if the "Automatic launch" is activated.
Double click on the tray icon to open the <strong>ProActive Agent Control</strong> window. The following window will appear:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/agent_control.png" alt="agent control" width="612" height="306">
</div>
<div class="title">Figure 5. Windows Agent GUI</div>
</div>
<div class="paragraph">
<p>From the ProActive Agent Control window, the user can load a configuration file, edit it, start/stop the service and view logs.
A GUI for editing is provided (explained below). Even if it is not recommended, you can edit the configuration file by yourself with your favorite text editor.</p>
</div>
<div class="paragraph">
<p>It is also possible to change the ProActive Nodes Account using the 'Change Account' button.</p>
</div>
<div class="paragraph">
<p>When you click on 'GUI Edit', the following window appears:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/config_editor_general.png" alt="config editor general" width="612" height="306">
</div>
<div class="title">Figure 6. General configuration</div>
</div>
<div class="paragraph">
<p>In the general tab, the user can specify:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>ProActive Scheduler</strong> location.</p>
</li>
<li>
<p>The <strong>JRE</strong> location (the Java Runtime Environment is provided with the agent archive under this path <code>%programfiles(x86)%\ProActive Agent\schedworker\jre</code>).</p>
</li>
<li>
<p>The <strong>numbers of Runtimes and Nodes</strong> (the number of spawned processes and the number of ProActive Nodes per process).</p>
</li>
<li>
<p>The <strong>numbers of workers</strong> (the number of ProActive Nodes allocated in the Compute Host)</p>
</li>
<li>
<p>The <strong>JVM options</strong>. Note that if the parameter contains <code>${rank}</code>, it will be dynamically replaced by the ProActive Node rank starting from 0.</p>
</li>
<li>
<p>The <strong>On Runtime Exit</strong> script. A script executed after a ProActive Node exits. This can be useful to perform additional cleaning operation. Note that the script receives as parameter the PID of the ProActive Node.</p>
</li>
<li>
<p>The user can set a <strong>memory limit</strong> that will prevent the spawned processes to exceed a specified amount of RAM. If a spawned process or its child process requires more memory, it will be killed as well as its child processes. Note that this limit is disabled by default (0 means no limit) and a ProActive Node will require at least 128 MBytes.</p>
</li>
<li>
<p>It is possible to list all available <strong>network interfaces</strong> by clicking on the "Refresh" button and add the selected network interface name as a value of the <code>proactive.net.interface</code> property by clicking on "Use" button. See the ProActive documentation for further information.</p>
</li>
<li>
<p>The user can specify the <strong>protocol</strong> (PNP or PAMR) to be used by the ProActive Node for incoming communications. If the selected protocol is PAMR, then the user has to add <code>-Dproactive.pamr.router.address</code> JVM property.</p>
</li>
<li>
<p>To ensure that a unique port is used by a ProActive Node, the initial port value will be incremented for each node process and given as value of the <code>-Dproactive.SELECTED_PROTOCOL.port</code> JVM property. If the port chosen for a node is already used, it is incremented until an available port number is found.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clicking on the 'Connection' tab, the window will look like this:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/config_editor_connection.png" alt="config editor connection" width="612" height="306">
</div>
<div class="title">Figure 7. Connection configuration</div>
</div>
<div class="paragraph">
<p>In the 'Connection' tab, the user can select between three types of connections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Local Registration</strong> - creates a local ProActive node and registers (advertises) it in a local RMI registry. The node name is optional.</p>
</li>
<li>
<p><strong>Resource Manager Registration</strong> - creates a local ProActive node and registers it in the specified Resource Manager. The mandatory Resource Manager&#8217;s URL must comply with the following format: <strong>protocol://host:port/</strong>.
In case of the PAMR protocol, the URL is of the form pamr://resource_manager_id, which is by default pamr://0 (default value of the resource manager id). The PAMR router host and port are provided using JVM properties.
The node name and the node source name are optional. Since the Resource Manager requires authentication, the user specifies the file that contains the credential. If no file is specified the default one located in <code>%USERPROFILE%\.proactive\security</code> folder is used.</p>
</li>
<li>
<p><strong>Custom</strong> - the user specifies his own java starter class and the arguments to be given to the main method. The java starter class must be in the classpath when the ProActive Node is started.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, clicking on the "Planning" tab, the window will look like this:</p>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/config_editor_planning.png" alt="config editor planning" width="612" height="412">
</div>
<div class="title">Figure 8. Planning configuration</div>
</div>
<div class="paragraph">
<p>In the Planning Tab, depending on the selected connection type, the agent will initiate it according to a <strong>weekly planning</strong> where each plan specifies the connection start time as well as the working duration. The agent will end the connection as well as the ProActive Nodes and its child processes when the plan duration has expired.</p>
</div>
<div class="paragraph">
<p>Moreover, it is possible to specify the ProActive Node Priority and its <strong>CPU usage</strong> limit. The behavior of the CPU usage limit works as follows: if the ProActive Node spawns other processes, they will also be part of the limit so that if the sum of CPU% of all processes exceeds the user limit they will be throttled to reach the given limit. Note that if the Priority is set to RealTime the CPU % throttling will be disabled.</p>
</div>
<div class="paragraph">
<p>The "Always available" makes the agent to run permanently with a Normal Priority and Max CPU usage at 100%.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launching_windows_agent"><a class="anchor" href="ProActiveAdminGuide.html#_launching_windows_agent"></a><a class="link" href="ProActiveAdminGuide.html#_launching_windows_agent">6.2.5. Launching Windows Agent</a></h4>
<div class="paragraph">
<p>Once you have configured the agent, you can start it clicking on the "Start" button of the ProActive Agent Control window. However, before that, you have to ensure that <strong>ProActive Scheduler</strong> has been started on the address you specified in the agent configuration. You do not need to start a node since it is exactly the job of the agent.</p>
</div>
<div class="paragraph">
<p>Once started, you may face some problems. You can realise that an error occurred by first glancing at the color of the agent tray icon. If everything goes right, it should keep the blue color. If its color changes to yellow, it means that the agent has been stopped. To see exactly what happened, you can look at the runtime log file located into the agent installation directory and named <code>Executor&lt;runtime number&gt;Process-log.txt</code>.</p>
</div>
<div class="paragraph">
<p>The main troubles you may have to face are the following ones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You get an <strong>access denied error</strong>: this is probably due to your default java.security.policy file which cannot be found. If you want to specify another policy file, you have to add a JVM parameter in the agent configuration. A policy file is supplied in the scheduling directory. To use it, add the following line in the JVM parameter box of the agent configuration (Figure 5.3, “Configuration Editor window - General Tab ”):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>-Djava.security.policy=PROACTIVE_HOME/config/security.java.policy-client</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You get an <strong>authentication error</strong>: this is probably due to your default credentials file which cannot be found. In the "Connection" tab of the Configuration Editor (Figure 5.4, “Configuration Editor window - Connection Tab (Resource Manager Registration)”), you can choose the credentials file you want. You can select, for instance, the credentials file located at PROACTIVE_HOME/config/authentication/scheduler.cred or your own credentials file.</p>
</li>
<li>
<p>The node seems to be well started, but you cannot see it in the Resource Manager interface: in this case, make sure that the <strong>port number</strong> is the good one. Do not forget that the runtime port number is incremented from the initial ProActive Resource Manager port number. You can see exactly on which port your runtime has been started looking at the log file described above.</p>
</li>
<li>
<p>The agent does not seem to be starting at all and the log file <code>Executor&lt;runtime number&gt;Process-log.txt</code> (see above) is empty. This issue has been observed on some Windows 10 environments. When facing this problem, open Windows <a href="https://en.wikipedia.org/wiki/Event_Viewer">Event Viewer</a> and look at errors associated with application <strong>ProActiveAgent</strong>. Follow the procedure <a href="ProActiveAdminGuide.html#_windows_10_patch">Windows 10 Patch</a> if you see the following error:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>JobManagement.JobException: The management process is running inside a Job, it will not be able to assign child processes to a new Job.
   à JobManagement.JobObject.ProbeForRunningInJob()
   à JobManagement.JobObject.CreateJob()
   à JobManagement.JobObject..ctor(String name)
   à ProActiveAgent.ProActiveRuntimeExecutor..ctor(CommonStartInfo commonStartInfo, Int32 rank)
   à ProActiveAgent.ExecutorsManager..ctor(AgentType configuration)
   à ProActiveAgent.WindowsService.OnStart(String[] args)
   à System.ServiceProcess.ServiceBase.ServiceQueuedMainCallback(Object state)</pre>
</div>
</div>
<div class="sect4">
<h5 id="_windows_10_patch"><a class="anchor" href="ProActiveAdminGuide.html#_windows_10_patch"></a><a class="link" href="ProActiveAdminGuide.html#_windows_10_patch">Windows 10 Patch</a></h5>
<div class="paragraph">
<p>In order to solve the issue mentioned above, please do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the patch zip from the following <a href="https://www.activeeon.com/public_content/patches/ProActiveAgent_Win10_patch.zip">link</a> and expand this archive inside an empty folder.</p>
</li>
<li>
<p>Close the agent GUI if it&#8217;s open. In order to do so, in the <a href="https://support.microsoft.com/en-us/windows/customize-the-taskbar-notification-area-e159e8d2-9ac5-b2bd-61c5-bb63c1d437c3">Windows notification area</a> (aka system tray), find the ProActive Agent icon <span class="image"><img src="https://trydev2.activeeon.com/doc/images/ProActiveAgentIcon.png" alt="ProActiveAgentIcon"></span>, right-click on it and select <strong>Close</strong>. A warning message will appear (simply confirm).</p>
</li>
<li>
<p>Replace existing files in the ProActive Agent installation folder <code>C:\Program Files (x86)\ProActiveAgent</code> with patch files copied from the expanded zip.</p>
</li>
<li>
<p>Start the ProActive Agent again. If the agent does not start and display the following error, start the service called <strong>ProActiveAgent</strong> manually from Windows services user interface (<code>services.exe</code>).</p>
</li>
</ol>
</div>
<div class="imageblock text-left">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/ProActiveAgentStartFailure.png" alt="ProActiveAgentStartFailure" width="383" height="206">
</div>
<div class="title">Figure 9. Start failure after Windows 10 Patch</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_automate_windows_agent_installation"><a class="anchor" href="ProActiveAdminGuide.html#_automate_windows_agent_installation"></a><a class="link" href="ProActiveAdminGuide.html#_automate_windows_agent_installation">6.2.6. Automate Windows Agent Installation</a></h4>
<div class="paragraph">
<p>The automated installation can be run through a command line (cmd.exe) with administrator priviledge.
This can be useful to trigger installation. In order to launch the silent installation, the /S option must be passed in the command line to the ProActive Windows Agent installer.
Several options are required, such as the user and password.</p>
</div>
<div class="paragraph">
<p>Here is an example of automated installation command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ProactiveAgent-8.3.0-standalone-x64-setup.exe /S /USER=proactive /PASSWORD=proactive</code></pre>
</div>
</div>
<div class="paragraph">
<p>Optionally you can add a domain name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">ProactiveAgent-8.3.0-standalone-x64-setup.exe /S /USER=proactive /PASSWORD=proactive /DOMAIN=mydomain</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also activate compatibility mode from the command line if you have any problems:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">set __COMPAT_LAYER=WINXPSP3
ProactiveAgent-8.3.0-standalone-x64-setup.exe /S /USER=proactive /PASSWORD=proactive</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the full list of command line options which can be passed to the installer:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/S</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run silently without graphical interface, uninstall any previous installation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/UN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run the uninstall only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/ALLOW</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow all users to control the service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/USER=user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associate <code>user</code> account to manage proactive agent service, create user if it does not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/PASSWORD=pass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define password for the proactive agent <code>user</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/DOMAIN=dom</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify <code>dom</code> as the windows domain, by default domain will be set to the machine host name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/LOG_DIR=path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define <code>path</code> where the agent log files, default is <code>$PROGRAMFILES\ProActiveAgent\logs</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/CONFIG_DIR=path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Define <code>path</code> where the configuration files are stored, default is <code>$PROGRAMFILES\ProActiveAgent\config</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/USE_ACC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use current user&#8217;s account home as <code>/CONFIG_DIR</code> and <code>/LOG_DIR</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_linux_or_windows_agents_for_auto_update"><a class="anchor" href="ProActiveAdminGuide.html#_configuring_linux_or_windows_agents_for_auto_update"></a><a class="link" href="ProActiveAdminGuide.html#_configuring_linux_or_windows_agents_for_auto_update">6.2.7. Configuring Linux Or Windows Agents For Auto-Update</a></h4>
<div class="paragraph">
<p>The <strong>Linux</strong> or <strong>Windows Agents</strong> can be configured to automatically synchronize the node libary (node.jar) with the ProActive server.</p>
</div>
<div class="paragraph">
<p>The behavior is similar to the <a href="ProActiveAdminGuide.html#proactive_node_autoupdate">proactive-node-autoupdate</a> command, the main JVM will act as a bootstrap and spawn a child JVM with the up-to-date library in its classpath.</p>
</div>
<div class="paragraph">
<p>In order to enable auto-update, you need to edit the agent configuration file. This file location is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux Agent: <code>/opt/proactive-agent/config.xml</code></p>
</li>
<li>
<p>Windows Agent: <code>C:\Program Files (x86)\ProActiveAgent\config\PAAgent-config.xml</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following changes must be performed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the <strong>&lt;javaStarterClass&gt;</strong> to <code>org.ow2.proactive.resourcemanager.updater.RMNodeUpdater</code></p>
</li>
<li>
<p>Add the following <strong>&lt;jvmParameters&gt;</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>node.jar.url</code>: URL of the node jar (similar to the <code>nju</code> option of the <code>proactive-node-autoupdate</code> command)</p>
</li>
<li>
<p><code>node.jar.saveas</code>: path used to store the node.jar file locally (similar to the <code>njs</code> option of the <code>proactive-node-autoupdate</code> command)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Other <strong>JVM properties</strong> specified will be forwarded to the spawned JVM, but non-standard options such as <strong>-Xmx</strong> will not be forwarded. In order to do so, you must declare them using the following syntax:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>   &lt;param&gt;-DXtraOption1=Xmx2048m&lt;/param&gt;
   &lt;param&gt;-DXtraOption2=Xms256m&lt;/param&gt;
   ...</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_nodes_from_proactive_rm"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_nodes_from_proactive_rm"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_nodes_from_proactive_rm">6.3. Deploy ProActive Nodes from the ProActive Resource Manager Interface</a></h3>
<div class="paragraph">
<p>The second way of deploying ProActive Nodes is to create <a href="ProActiveAdminGuide.html#_glossary_node_source"><strong>Node Sources</strong></a> from the ProActive Resource Manager Interface.</p>
</div>
<div class="paragraph">
<p>ProActive Resource Manager provides three ways to create a Node Source:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <strong>Resource Manager Web Interface</strong> ('Add Node Source' menu).</p>
</li>
<li>
<p>Use the <a href="https://try.activeeon.com/doc/rest/">REST API</a></p>
</li>
<li>
<p>Use the <a href="ProActiveAdminGuide.html#_resource_manager_command_line">Command Line</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whichever the way you use to create a node source, ultimately you just need to choose a <a href="ProActiveAdminGuide.html#_node_source_infrastructures"><strong>Node Source Infrastructure</strong></a>
and a <a href="ProActiveAdminGuide.html#_node_source_policies"><strong>Node Source Policy</strong></a> that defines rules and limitations of nodes' utilization.
Then according to the chosen node source infrastructure and policy, you need to fill out the required parameters.</p>
</div>
<div class="paragraph">
<p>The choice of <strong>Infrastructure Manager</strong> depends on the type of your Compute Hosts.
The following part of this section presents how to deploy ProActive Nodes on various types of Compute Hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="ProActiveAdminGuide.html#_deploy_local_nodes">the local Server Host</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_deploy_nodes_via_ssh">remote Compute Hosts accessible via SSH</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_deploy_cloud_nodes">cloud platforms</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">clusters managed by other schedulers</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_deploy_local_nodes"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_local_nodes"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_local_nodes">6.3.1. Deploy local nodes on the ProActive server</a></h4>
<div class="paragraph">
<p>In order to deploy the ProActive nodes locally (i.e., on the <a href="ProActiveAdminGuide.html#_glossary_server_host">server host</a> where the ProActive server is running),
you can just create a node source with the <strong>Local Infrastructure</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/rm-portal-add-localns.png" alt="rm portal add localns">
</div>
</div>
<div class="paragraph">
<p>The previous screenshot shows how to create a local node source in the <strong>Resource Manager Web Interface</strong>.</p>
</div>
<div class="paragraph">
<p>To create a local node source from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client --createns localNodeSourceName -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure credentialsPath numberOfNodes timeout javaProperties</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, the complete command to create a local node source with 7 nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ $PROACTIVE_HOME/bin/proactive-client -createns local_node_source -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure $PROACTIVE_HOME/config/authentication/rm.cred 7 30000 "" -policy org.ow2.proactive.resourcemanager.nodesource.policy.StaticPolicy 'ALL' 'ALL'</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_local_infrastructure"><strong>Local Infrastructure</strong></a> reference for details of each parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_nodes_via_ssh"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_nodes_via_ssh"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_nodes_via_ssh">6.3.2. Deploy ProActive nodes via SSH</a></h4>
<div class="paragraph">
<p>In order to create an SSH Node Source you should first configure an <strong>SSH access</strong> from the server to the Compute Hosts
that <a href="http://www.linuxproblem.org/art_9.html">does not require password</a>. Then create a text file (refered to as <code>HOSTS_FILE</code> below) containig the hostnames of all your Compute Hosts.
Each line shoud have the format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">HOSTNAME NODES_COUNT</code></pre>
</div>
</div>
<div class="paragraph">
<p>where NODES_COUNT is the number of ProActive Nodes to start (corresponds to the number of Tasks that can be executed in parallel) on the corresponding host. Lines beginning with <code>#</code> are comments. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># you can use network names
host1.mydomain.com 2
host2.mydomain.com 4
# or ip addresses
192.168.0.10 8
192.168.0.11 16</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then using this file create a Node Source either from the <strong>Resource Manager Web Interface</strong> or from the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -createns SSH_node_source --infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.SSHInfrastructure HOSTS_FILE 60000 3 5000 "" /home/user/jdk/bin/java PROACTIVE_HOME Linux "" config/authentication/rm.cred</code></pre>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to replace <code>HOSTS_FILE</code> and <code>PROACTIVE_HOME</code> with the corresponding values.</p>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_ssh_infrastructure">SSH Infrastructure</a> reference for details on each parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_cloud_nodes"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_cloud_nodes"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_cloud_nodes">6.3.3. Deploy ProActive Nodes on Cloud Platforms</a></h4>
<div class="paragraph">
<p>The ProActive Resource Manager can automate the deployment of ProActive Nodes on most popular Cloud Platforms.
Currently the following Cloud Platforms are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="ProActiveAdminGuide.html#_ec2_infrastructure">Amazon Web Service EC2</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_aws_autoscaling_infrastructure">Amazon Web Service Auto Scaling</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_openstack_infrastructure">OpenStack</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_vmware_infrastructure">VMWare</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_gce_infrastructure">Google Compute Engine</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_azure_infrastructure">Microsoft Azure</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_azure_scale_set_infrastructure">Microsoft Azure Scale Set</a></p>
</li>
<li>
<p><a href="ProActiveAdminGuide.html#_kubernetes_infrastructure">Kubernetes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unlike directly deploying on the compute servers, on the Cloud Platforms
one or more virtual machines usually need to be deployed prior to launching a ProActive Node.
Each virtual machine corresponds an instance in a cloud Node Source.</p>
</div>
<div class="paragraph">
<p>So the definition of most cloud Node Source Infrastructures have the following three parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>numberOfInstances</code>: specifies the total number of virtual machines to be created on this node source.</p>
</li>
<li>
<p><code>numberOfNodesPerInstance</code>: specifies the total number of ProActive Nodes to be deployed in each created virtual machine.</p>
</li>
<li>
<p><code>image</code>: specifies which image is used to deploy the virtual machine (e.g., Linux or Windows).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The general process of deploying ProActive Nodes on a Cloud Platform is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, create the required number of virtual machines with the specified image</p>
</li>
<li>
<p>then, on each virtual machine, download the ProActive <code>node.jar</code> and install the required middleware (e.g., java)</p>
</li>
<li>
<p>finally, on each virtual machine, launch the specified number of ProActive Nodes (i.e., <code>numberOfNodesPerInstance</code>) using node.jar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_node_source_infrastructures"><strong>Node Source Infrastructure</strong></a> reference for details of each Cloud Node Source Infrastructure parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_via_other_schedulers"><a class="anchor" href="ProActiveAdminGuide.html#_deploy_via_other_schedulers"></a><a class="link" href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">6.3.4. Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a></h4>
<div class="paragraph">
<p>This functionality is also called <strong><em>Meta-Scheduling</em></strong>.</p>
</div>
<div class="paragraph">
<p>If an existing cluster is available in your organization and this cluster is managed by a native scheduler such as <strong>SLURM</strong>, <strong>LSF</strong> or <strong>PBS</strong>, you may want to execute transparently on this cluster ProActive <a href="ProActiveAdminGuide.html#_glossary_workflow"><strong>Workflows</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_task"><strong>Tasks</strong></a>.</p>
</div>
<div class="paragraph">
<p>As ProActive Tasks can be executed only on <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a>, it is necessary to deploy ProActive Nodes on the cluster.</p>
</div>
<div class="paragraph">
<p>Dynamic deployment of ProActive Nodes on a cluster to execute ProActive Tasks is handled by defining a <em>Native Scheduler <a href="ProActiveAdminGuide.html#_glossary_node_source">Node Source</a></em> containing three components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Native Scheduler Infrastructure</code>: a <a href="ProActiveAdminGuide.html#_glossary_node_source_infrastructure"><strong>Node Source Infrastructure</strong></a> which allows to interact with a native scheduler to deploy ProActive Nodes.</p>
</li>
<li>
<p>The <code>Native Scheduler Policy</code>:  a <a href="ProActiveAdminGuide.html#_glossary_node_source_policy"><strong>Node Source Policy</strong></a> which interacts with the Native Scheduler Infrastructure to request ProActive Nodes deployment dynamically based on the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> pending queue.</p>
</li>
<li>
<p>The <code>Native Scheduler Scheduling Policy</code>: a <a href="ProActiveAdminGuide.html#_glossary_scheduling_policy"><strong>Scheduling Policy</strong></a> which allows the execution of ProActive Tasks on ProActive Nodes provisioned by the Native Scheduler Policy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The provisioning of ProActive Nodes is controlled by a specific <a href="ProActiveAdminGuide.html#_glossary_generic_information"><strong>Generic Information</strong></a> <code>"NS"</code> which can be defined at <em>Task</em> or <em>Job</em> level.</p>
</div>
<div class="paragraph">
<p>When this generic information is configured for a <em>Task</em>, a ProActive Node will be dynamically deployed on the cluster to execute the Task. This ProActive Node will be associated with the Task and will only accept this Task execution. When the Task terminates, the ProActive Node will also be terminated.</p>
</div>
<div class="paragraph">
<p>When this generic information is configured for a <em>Job</em>, all Tasks contained in the Job will execute on the cluster. Nodes will be created dynamically to execute Tasks of this Job, with a similar Task/Node association.</p>
</div>
<div class="paragraph">
<p>The behavior of the Meta-Scheduling feature is summarized on the following diagram (example for PBS integration):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/NativeScheduler.png" alt="PBS Integration">
</div>
<div class="title">Figure 10. PBS Integration</div>
</div>
<div class="paragraph">
<p>The following paragraphs explain how to configure the Native Scheduler Infrastructure, Native Scheduler Policy, Native Scheduler Scheduling Policy and execute ProActive tasks using a Native Scheduler Node Source.</p>
</div>
<div class="sect4">
<h5 id="_glossary_2"><a class="anchor" href="ProActiveAdminGuide.html#_glossary_2"></a><a class="link" href="ProActiveAdminGuide.html#_glossary_2">Glossary</a></h5>
<div id="_glossary_ns_cluster" class="dlist">
<dl>
<dt class="hdlist1">Cluster</dt>
<dd>
<p>a group of tightly coupled <a href="ProActiveAdminGuide.html#_glossary_ns_node">nodes</a> managed by a <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_ns_node" class="dlist">
<dl>
<dt class="hdlist1">Cluster Node</dt>
<dd>
<p>a computer, part of a <a href="ProActiveAdminGuide.html#_glossary_ns_cluster">cluster</a> used to execute <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster jobs</a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_ns_native_scheduler" class="dlist">
<dl>
<dt class="hdlist1">Native Scheduler</dt>
<dd>
<p>A software which dispatch <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster jobs</a> on <a href="ProActiveAdminGuide.html#_glossary_ns_node">cluster nodes</a>, also known as Cluster Manager.</p>
</dd>
</dl>
</div>
<div id="_glossary_ns_cluster_job" class="dlist">
<dl>
<dt class="hdlist1">Cluster Job</dt>
<dd>
<p>A running command executed on a <a href="ProActiveAdminGuide.html#_glossary_ns_cluster">cluster</a> by a <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a>. Also known as Batch Job.</p>
</dd>
</dl>
</div>
<div id="_glossary_ns_cluster_jobid" class="dlist">
<dl>
<dt class="hdlist1">Cluster Job Id</dt>
<dd>
<p>Identifier representing a <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster job</a> inside a <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a>.</p>
</dd>
</dl>
</div>
<div id="_glossary_head_node" class="dlist">
<dl>
<dt class="hdlist1">Head Node</dt>
<dd>
<p>A specific <a href="ProActiveAdminGuide.html#_glossary_ns_node">cluster node</a> where the <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a> server runs.</p>
</dd>
</dl>
</div>
<div id="_glossary_cluster_user" class="dlist">
<dl>
<dt class="hdlist1">Cluster User</dt>
<dd>
<p>A linux operating system account registered on the cluster.</p>
</dd>
</dl>
</div>
<div id="_glossary_proactive_scheduler_user" class="dlist">
<dl>
<dt class="hdlist1">ProActive Scheduler User</dt>
<dd>
<p>An account registered in the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a>, the account is only registered inside the ProActive Scheduler and does not necessarily match an operating system account.</p>
</dd>
</dl>
</div>
<div id="_glossary_proactive_scheduler_process_user" class="dlist">
<dl>
<dt class="hdlist1">ProActive Scheduler Process User</dt>
<dd>
<p>The operating system account which started the ProActive Scheduler server process.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_native_scheduler_node_source_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_native_scheduler_node_source_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_native_scheduler_node_source_configuration">Native Scheduler Node Source Configuration</a></h5>
<div class="paragraph">
<p>Using the <a href="ProActiveAdminGuide.html#_glossary_rm_web_interface"><strong>Resource Manager Web Interface</strong></a>, you can create a <a href="ProActiveAdminGuide.html#_glossary_node_source"><strong>Node Source</strong></a> used to acquire <a href="ProActiveAdminGuide.html#_glossary_proactive_node"><strong>ProActive Nodes</strong></a> from a <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler"><strong>Native Scheduler</strong></a>.</p>
</div>
<div class="paragraph">
<p>From The drop down menu, select <code>NativeSchedulerInfrastructure</code> and <code>NativeSchedulerPolicy</code>.</p>
</div>
<div class="paragraph">
<p>See the reference <a href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">Native Scheduler Infrastructure</a> and <a href="ProActiveAdminGuide.html#_native_scheduler_policy">Native Scheduler Policy</a> for detailed explanation of the node source parameters.</p>
</div>
<div class="paragraph">
<p>When the node source is created, it will be activated as other node sources (LocalInfrastructure, SSHInfrastructure, etc), but no ProActive Node will appear.</p>
</div>
<div class="paragraph">
<p>This is expected as the Native Scheduler node source is <strong>dynamic</strong>, it will only create ProActive Nodes when specific conditions are met.</p>
</div>
</div>
<div class="sect4">
<h5 id="_configure_nativeschedulerschedulingpolicy"><a class="anchor" href="ProActiveAdminGuide.html#_configure_nativeschedulerschedulingpolicy"></a><a class="link" href="ProActiveAdminGuide.html#_configure_nativeschedulerschedulingpolicy">Configure NativeSchedulerSchedulingPolicy</a></h5>
<div class="paragraph">
<p>After creating the Native Scheduler Node Source, it is necessary as well to change the <a href="ProActiveAdminGuide.html#_scheduling_policies"><strong>ProActive Scheduling Policy</strong></a> to use the <code>NativeSchedulerSchedulingPolicy</code>.</p>
</div>
<div class="paragraph">
<p>This policy ensures that tasks are executed on appropriate ProActive Nodes when using a Native Scheduler Node Source.</p>
</div>
<div class="paragraph">
<p>In order to do that, edit the file <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> and change the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.ExtendedSchedulerPolicy</pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.NativeSchedulerSchedulingPolicy</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_match_user_accounts_with_the_cluster"><a class="anchor" href="ProActiveAdminGuide.html#_match_user_accounts_with_the_cluster"></a><a class="link" href="ProActiveAdminGuide.html#_match_user_accounts_with_the_cluster">Match User Accounts With the Cluster</a></h5>
<div class="paragraph">
<p>Submission of jobs to the native scheduler is done by default using a SSH connection.</p>
</div>
<div class="paragraph">
<p>When a ProActive Task belonging to a given user <em>Alice</em> needs to execute on a NativeScheduler node source, a SSH connection will be performed with the login and password of the <em>Alice</em> user registered in the ProActive Scheduler.</p>
</div>
<div class="paragraph">
<p>Accordingly, this login/password combination must correspond to a real user on the cluster <a href="ProActiveAdminGuide.html#_glossary_head_node">head node</a>.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="ProActiveAdminGuide.html#_user_authentication"><strong>User Authentication</strong></a> section in order to manage ProActive Users.</p>
</div>
</div>
<div class="sect4">
<h5 id="_execute_tasks_on_a_native_scheduler_node_source"><a class="anchor" href="ProActiveAdminGuide.html#_execute_tasks_on_a_native_scheduler_node_source"></a><a class="link" href="ProActiveAdminGuide.html#_execute_tasks_on_a_native_scheduler_node_source">Execute Tasks on a Native Scheduler Node Source</a></h5>
<div class="paragraph">
<p>The <a href="../user/ProActiveUserGuide.html#_generic_information">Generic Information</a> <code>"NS"</code> allows a ProActive Task to be executed on a Native Scheduler node source.</p>
</div>
<div class="paragraph">
<p>It must contain the name of the target node source. For example, to submit a Task on the "PBS" Node Source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;task name="PBS_Task"&gt;
    &lt;description&gt;
        &lt;![CDATA[ Execute this Task in the PBS node source. ]]&gt;
    &lt;/description&gt;
    &lt;genericInformation&gt;
        &lt;info name="NS" value="PBS"/&gt;
    &lt;/genericInformation&gt;
    &lt;scriptExecutable&gt;
        &lt;script&gt;
          &lt;code language="groovy"&gt;
            &lt;![CDATA[
println "Hello World"
]]&gt;
          &lt;/code&gt;
        &lt;/script&gt;
    &lt;/scriptExecutable&gt;
&lt;/task&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The NS value can also be defined at the job level, in that case, every task of this job will be executed on the Native Scheduler node source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;job
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:proactive:jobdescriptor:3.10"
     xsi:schemaLocation="urn:proactive:jobdescriptor:3.10 http://www.activeeon.com/public_content/schemas/proactive/jobdescriptor/3.10/schedulerjob.xsd"
    name="PBS_Job"
    priority="normal"
    onTaskError="continueJobExecution"
     maxNumberOfExecution="2"
&gt;
  &lt;genericInformation&gt;
    &lt;info name="NS" value="PBS"/&gt;
  &lt;/genericInformation&gt;
  &lt;taskFlow&gt;
    &lt;task name="Groovy_Task"&gt;
      &lt;description&gt;
        &lt;![CDATA[ The simplest task, ran by a groovy engine. ]]&gt;
      &lt;/description&gt;
      &lt;scriptExecutable&gt;
        &lt;script&gt;
          &lt;code language="groovy"&gt;
            &lt;![CDATA[
println "Hello World"
]]&gt;
          &lt;/code&gt;
        &lt;/script&gt;
      &lt;/scriptExecutable&gt;
    &lt;/task&gt;
  &lt;/taskFlow&gt;
&lt;/job&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to define in a ProActive Task or Job the <code>NS_BATCH</code> generic information. This parameter allows to provide custom arguments to <code>nsSubmitCommand</code>.</p>
</div>
<div class="paragraph">
<p>For example, to submit a task on the PBS Node source, using a specific PBS queue and reserve for this task 2 cluster nodes with 2 cpu each:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;task name="PBS_Task"&gt;
  &lt;description&gt;
    &lt;![CDATA[ Runs on the PBS node source on queue1, using 2 nodes * 2 cpus ]]&gt;
  &lt;/description&gt;
  &lt;genericInformation&gt;
    &lt;info name="NS" value="PBS"/&gt;
    &lt;info name="NS_BATCH" value="-q queue1 -lnodes=2:ppn=2"/&gt;
  &lt;/genericInformation&gt;
  &lt;scriptExecutable&gt;
    &lt;script&gt;
      &lt;code language="groovy"&gt;
         &lt;![CDATA[
println "Hello World"
]]&gt;
      &lt;/code&gt;
    &lt;/script&gt;
  &lt;/scriptExecutable&gt;
&lt;/task&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, the <code>NS_PRE</code> generic information can be used to enter a single line command which will be executed in the cluster just before
the ProActive node starts. It can be used for example to load linux modules required by the task execution.</p>
</div>
</div>
<div class="sect4">
<h5 id="_native_scheduler_node_life_cycle"><a class="anchor" href="ProActiveAdminGuide.html#_native_scheduler_node_life_cycle"></a><a class="link" href="ProActiveAdminGuide.html#_native_scheduler_node_life_cycle">Native Scheduler Node Life Cycle</a></h5>
<div class="paragraph">
<p>As soon as tasks containing the <code>NS</code> generic information are pending, the target Native Scheduler node source will try to deploy ProActive Nodes to execute them.</p>
</div>
<div class="paragraph">
<p>The node will first appear in <code>Deploying</code> <a href="ProActiveAdminGuide.html#_node_states"><strong>state</strong></a>. If some error occurs prior to the <code>nsSubmitCommand</code> execution (SSH connection, command syntax), the node state will change to <code>Lost</code>, with some explanation about the failure displayed.</p>
</div>
<div class="paragraph">
<p>If the node remains in <code>Deploying</code> state, it is possible to monitor the job execution on the native scheduler itself, by logging into the head node, and use the native scheduler command tools.</p>
</div>
<div class="paragraph">
<p>Example using the PBS <code>qstat</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@osboxes:/tmp/activeeon_enterprise-node-linux-x64-8.1.0-SNAPSHOT/logs# qstat

Job ID                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
241.osboxes                STDIN            osboxes                0 R batch

root@osboxes:/tmp/activeeon_enterprise-node-linux-x64-8.1.0-SNAPSHOT/logs# qstat -f 241

Job Id: 241.osboxes
    Job_Name = STDIN
    Job_Owner = osboxes@osboxes
    job_state = R
    queue = batch
    server = osboxes
    Checkpoint = u
    ctime = Fri May  4 10:13:06 2018
    Error_Path = osboxes:/tmp/activeeon_enterprise-node-linux-x64-8.1.0-SNAPSH
	OT/logs/Node-osboxes_852t0.out
    exec_host = osboxes/0
    Hold_Types = n
    Join_Path = oe
    Keep_Files = n
    Mail_Points = a
    mtime = Fri May  4 10:13:06 2018
    Output_Path = osboxes:/tmp/activeeon_enterprise-node-linux-x64-8.1.0-SNAPS
	HOT/logs/Node-osboxes_852t0.out
    Priority = 0
    qtime = Fri May  4 10:13:06 2018
    Rerunable = True
    Resource_List.walltime = 01:00:00
    Resource_List.nodes = 1
    Resource_List.nodect = 1
    Resource_List.neednodes = 1
    session_id = 6486
    substate = 42
    Variable_List = PBS_O_QUEUE=batch,PBS_O_HOME=/home/osboxes,
	PBS_O_LOGNAME=osboxes,
	PBS_O_PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/b
	in:/usr/games:/usr/local/games,PBS_O_MAIL=/var/mail/osboxes,
	PBS_O_SHELL=/bin/bash,PBS_O_LANG=fr_FR.UTF-8,
	PBS_O_WORKDIR=/home/osboxes,PBS_O_HOST=osboxes,PBS_O_SERVER=osboxes
    euser = osboxes
    egroup = osboxes
    hashname = 241.osboxes
    queue_rank = 237
    queue_type = E
    comment = Job started on Fri May 04 at 10:13
    etime = Fri May  4 10:13:06 2018
    submit_args = -o /tmp/activeeon_enterprise-node-linux-x64-8.1.0-SNAPSHOT/l
	ogs/Node-osboxes_852t0.out -e /tmp/activeeon_enterprise-node-linux-x64
	-8.1.0-SNAPSHOT/logs/Node-osboxes_852t0.out -j oe
    start_time = Fri May  4 10:13:06 2018
    Walltime.Remaining = 3587
    start_count = 1
    fault_tolerant = False
    job_radix = 0
    submit_host = osboxes
    init_work_dir = /home/osboxes
    request_version = 1</pre>
</div>
</div>
<div class="paragraph">
<p>When the deployment is successful, the ProActive Node state will change to <code>Free</code> and shortly after to <code>Busy</code> as soon as the associated task will be deployed on the node.
After the task completes, the node will be removed and the <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster job</a> will be cancelled using the <code>nsKillCommand</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_troubleshooting"><a class="anchor" href="ProActiveAdminGuide.html#_troubleshooting"></a><a class="link" href="ProActiveAdminGuide.html#_troubleshooting">Troubleshooting</a></h5>
<div class="paragraph">
<p>If the <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster job</a> is in <em>running</em> state, but the ProActive Node associated remains in <code>Deploying</code> state, it probably means there is a connection issue between the ProActive Node and the Resource Manager.
If the default ProActive Network Protocol is used (<code>PNP</code>), it is necessary to have a two way connection between the cluster and ProActive server. You can refer to the <a href="ProActiveAdminGuide.html#_available_network_protocols"><strong>network protocols</strong></a> documentation for more info.</p>
</div>
<div class="paragraph">
<p>To troubleshoot node deployment, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>inspect the output of the <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster job</a> if provided in the <code>nsSubmitCommand</code></p>
</li>
<li>
<p>add the following log4j loggers to the ProActive Scheduler Server <code>config/log/server.properties</code><br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">log4j.logger.org.ow2.proactive.scheduler.policy=DEBUG
log4j.logger.org.ow2.proactive.scheduler.util=DEBUG
log4j.logger.org.ow2.proactive.nativescheduler=DEBUG</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>inspect the ProActive Scheduler server logs.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_node_source_infrastructures"><a class="anchor" href="ProActiveAdminGuide.html#_node_source_infrastructures"></a><a class="link" href="ProActiveAdminGuide.html#_node_source_infrastructures">6.4. Node Source Infrastructures</a></h3>
<div class="paragraph">
<p>A <strong>Node Source Infrastructure</strong>, also called <strong>Infrastructure Manager</strong>, is responsible for deploying ProActive Nodes inside a defined <a href="ProActiveAdminGuide.html#_deploy_nodes_from_proactive_rm"><strong>Node Source</strong></a>. In most of the cases, it knows how to launch a set of ProActive Nodes
on a remote machine. For instance the SSH infrastructure manager connects via SSH to a remote machine and launches
nodes.</p>
</div>
<div class="paragraph">
<p>When creating a node source, a Node Source Infrastructure and a <a href="ProActiveAdminGuide.html#_node_source_policies">Node Source Policy</a> must be chosen.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
New Node Source Infrastructures can be dynamically plugged into the Resource Manager. In order to do that, it is required to add classes extending the <a href="../javadoc/org/ow2/proactive/resourcemanager/nodesource/infrastructure/InfrastructureManager.html">InfrastructureManager class</a> in the server class path and update the infrastructure implementation list in the configuration file (PROACTIVE_HOME/config/rm/nodesource/infrastructures).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Node Sources can be created using the Resource Manager portal or the command line (see <a href="ProActiveAdminGuide.html#_command_line_examples">Command Line Examples</a> for more information).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When using the command line, the order of parameters is important, and each infrastructure section below describes the correct parameter order. Each section shows as well the fully qualified name of the infrastructure, to pass on the command line. On the Resource Manager portal, the order of parameters displayed on the interface is slightly different as parameters are grouped into categories.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_default_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_default_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_default_infrastructure">6.4.1. Default Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.DefaultInfrastructureManager</code></p>
</div>
<div class="paragraph">
<p><strong>Default Infrastructure</strong> is designed to be used with ProActive
agent. It cannot perform an automatic deployment but any users
(including an agent) can add already existing nodes into it. In order to
create a node source with this infrastructure, use the Resource Manager portal or run the following
command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns defaultns -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.DefaultInfrastructureManager</pre>
</div>
</div>
<div class="paragraph">
<p>This infrastructure has no parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_local_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_local_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_local_infrastructure">6.4.2. Local Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure</code></p>
</div>
<div class="paragraph">
<p><strong>Local Infrastructure</strong> can be used to start nodes locally, i.e,
on the host running the Resource Manager. In order to create a node
source with this infrastructure, use the Resource Manager portal or run the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$PROACTIVE_HOME/bin/proactive-client --createns localns -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure credentialsPath numberOfNodes timeout javaProperties</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>credentialsPath</strong> - (Optional) The absolute path of the credentials file used
to set the provider of the nodes. By default it will use the connected user credentials.</p>
</li>
<li>
<p><strong>maxNodes</strong> - The number of nodes to deploy.</p>
</li>
<li>
<p><strong>nodeTimeout</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>paProperties</strong> - Java options appended to the command used to start the node on the remote host.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ssh_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_ssh_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_ssh_infrastructure">6.4.3. SSH Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.SSHInfrastructure</code></p>
</div>
<div class="paragraph">
<p>This infrastructure allows to deploy nodes over SSH.
It is deprecated in favor of <a href="ProActiveAdminGuide.html#_ssh_infrastructure_v2">SSH Infrastructure V2</a>
This infrastructure needs 10 arguments, described hereafter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>hostsList</strong> - Path to a file containing the hosts on which
resources should be acquired. This file should contain one host per
line, described as a host name or a public IP address, optionally
followed by a positive integer describing the number of runtimes to
start on the related host (default to 1 if not specified). Example:</p>
<div class="literalblock">
<div class="content">
<pre>rm.example.com
test.example.net 5
192.168.9.10 2</pre>
</div>
</div>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>maxDeploymentFailure</strong> - Maximum number of failed attempts to deploy on host before discarding it.</p>
</li>
<li>
<p><strong>waitBetweenDeploymentFailures</strong> - The time in milliseconds that the Resource Manager waits before retrying to
acquire a node for which the deployment failed before.</p>
</li>
<li>
<p><strong>sshOptions</strong> - Options you can pass to the SSHClient executable (
-l mysuser to specify the user for instance ).</p>
</li>
<li>
<p><strong>javaPath</strong> - Path to the java executable on the remote hosts.</p>
</li>
<li>
<p><strong>schedulingPath</strong> - Path to the Scheduler Node installation
directory on the remote hosts.</p>
</li>
<li>
<p><strong>targetOs</strong> - One of 'LINUX', 'CYGWIN' or 'WINDOWS' depending on
the machines' ( in Hosts List file ) operating system.</p>
</li>
<li>
<p><strong>javaOptions</strong> - Java options appended to the command used to
start the node on the remote host.</p>
</li>
<li>
<p><strong>rmCredentialsPath</strong> - (Optional) The absolute path of the 'rm.cred' file to
make the deployed nodes able to register to the Resource Manager (
config/authentication/rm.cred ). By default it will use the currently connected user credentials.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ssh_infrastructure_v2"><a class="anchor" href="ProActiveAdminGuide.html#_ssh_infrastructure_v2"></a><a class="link" href="ProActiveAdminGuide.html#_ssh_infrastructure_v2">6.4.4. SSH Infrastructure V2</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.SSHInfrastructureV2</code></p>
</div>
<div class="paragraph">
<p>This infrastructure allows to deploy nodes over SSH.
This infrastructure needs 17 arguments, described hereafter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>hostsList</strong> - Path to a file containing the hosts on which
resources should be acquired. This file should contain one host per
line, described as a host name or a public IP address, optionally
followed by a positive integer describing the number of runtimes to
start on the related host (default to 1 if not specified). Example:</p>
<div class="literalblock">
<div class="content">
<pre>rm.example.com
test.example.net 5
192.168.9.10 2</pre>
</div>
</div>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>maxDeploymentFailure</strong> - Maximum number of failed attempts to deploy on host before discarding it.</p>
</li>
<li>
<p><strong>waitBetweenDeploymentFailures</strong> - The time in milliseconds that the Resource Manager waits before retrying to
acquire a node for which the deployment failed before.</p>
</li>
<li>
<p><strong>sshPort</strong> - Port used for the SSH connection.</p>
</li>
<li>
<p><strong>sshUsername</strong> - Username of the SSH connection.</p>
</li>
<li>
<p><strong>sshPassword </strong> - Password of the SSH connection.</p>
</li>
<li>
<p><strong>sshPrivateKey </strong> - Alternately, use a private key to authenticate the SSH connection.</p>
</li>
<li>
<p><strong>sshOptions</strong> - Options you can pass to the SSHClient executable.</p>
</li>
<li>
<p><strong>javaPath</strong> - Path to the java executable on the remote hosts.</p>
</li>
<li>
<p><strong>schedulingPath</strong> - Path to the Scheduler Node installation
directory on the remote hosts.</p>
</li>
<li>
<p><strong>targetOs</strong> - One of 'LINUX', 'CYGWIN' or 'WINDOWS' depending on
the machines' ( in Hosts List file ) operating system.</p>
</li>
<li>
<p><strong>javaOptions</strong> - Java options appended to the command used to
start the node on the remote host.</p>
</li>
<li>
<p><strong>deploymentMode</strong> - Specifies how the ProActive node command is started.
The deploymentMode can take the following values:</p>
<div class="ulist">
<ul>
<li>
<p><em>autoGenerated</em>: when this mode is selected the command to start the
ProActive node will be generated automatically. As a result, the ssh call to
the nodes will start the ProActive nodes on the infrastructure without modifications to
the startup command. This mode is selected by default.</p>
</li>
<li>
<p><em>useStartupScript</em>: starts the ProActive node using the script in the variable
<code>%startupScriptStandard%</code>, allowing the user to modify the startup command of the hosts.
This mode uses the ProActive node agent identified in the <code>%schedulingPath%</code> variable
and the Java Runtime Environment identified in the <code>%javaPath%</code> variable.</p>
</li>
<li>
<p><em>useNodeJarStartupScript</em>: enables connecting to the SSHInfrastructureV2
by launching <em>node.jar</em>. This mode uses <code>%nodeJarUrl%</code> and <code>%startupScriptWitNodeJarDownload%</code>
variables to generate the startup command.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
if deploymentMode field was set to an empty string, the <code>autoGenerated</code> mode will be automatically selected.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>nodeJarUrl</strong> - The full URL path to download the ProActive <em>node.jar</em>
on each host added to the hostsList. The URL have to be accessible from the hosts.
For example, <code>try.activeeon.com/rest/node.jar</code>.
Used only when <code>useNodeJarStartupScript</code> is selected.</p>
</li>
<li>
<p><strong>startupScriptStandard</strong> - Nodes startup script to launch the ProActive nodes using a ProActive node agent.
The script by default locates Java Runtime Environment and node agent directory using <code>%javaPath%</code> and <code>%schedulingPath%</code> variables respectively.
The user can modify or extend this script to execute commands on the host before or after the Proactive node startup.
Used only when <code>useStartupScript</code> is selected.</p>
</li>
<li>
<p><strong>startupScriptWitNodeJarDownload</strong> - Nodes startup script to launch the ProActive nodes using <em>node.jar</em>.
To run ProActive nodes, this script is also expected to download and install the Java Runtime Environment,
then download and execute ProActive <em>node.jar</em>, if they are not already provided by the host.
It uses <code>%nodeJarUrl%</code> variable to get the full URL path for downloading the <em>node.jar</em> file.
The user can modify or extend this script to execute commands on the host before or after the ProActive node startup.
Used only when <code>useNodeJarStartupScript</code> is selected.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the deployment mode <code>autoGenerated</code> is selected, the startup scripts will be disregarded.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cli_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_cli_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_cli_infrastructure">6.4.5. CLI Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.CLIInfrastructure</code></p>
</div>
<div class="paragraph">
<p>This generic infrastructure allows to deploy nodes using deployment
script written in arbitrary language. The infrastructure just launches
this script and waits until the ProActive node is registered in the
Resource Manager. Command line infrastructure could be used when you
prefer to describe the deployment process using shell scripts instead of
Java. Script examples can be found in
PROACTIVE_HOME/samples/scripts/deployment. The deployment script has 4
parameters: HOST_NAME, NODE_NAME, NODE_SOURCE_NAME, RM_URL. The
removal script has 2 parameters: HOST_NAME and NODE_NAME.</p>
</div>
<div class="paragraph">
<p>This infrastructure needs 7 arguments, described hereafter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>hostsList</strong> - Path to a file containing the hosts on which
resources should be acquired. This file should contain one host per
line, described as a host name or a public IP address, optionally
followed by a positive integer describing the number of runtimes to
start on the related host (default to 1 if not specified). Example:</p>
<div class="literalblock">
<div class="content">
<pre>rm.example.com
test.example.net 5
192.168.9.10 2</pre>
</div>
</div>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>maxDeploymentFailure</strong> - Maximum number of failed attempts to deploy on host before discarding it.</p>
</li>
<li>
<p><strong>waitBetweenDeploymentFailures</strong> - The time in milliseconds that the Resource Manager waits before retrying to
acquire a node for which the deployment failed before.</p>
</li>
<li>
<p><strong>interpreter</strong> - Path to the script interpreter (bash by default).</p>
</li>
<li>
<p><strong>deploymentScript</strong> - A script that launches a ProActive Node and
registers it to the RM.</p>
</li>
<li>
<p><strong>removalScript</strong> - A script that removes the node from the
Resource Manager.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ec2_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_ec2_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_ec2_infrastructure">6.4.6. EC2 Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.AWSEC2Infrastructure</code></p>
</div>
<div class="paragraph">
<p>The Elastic Compute Cloud, aka <strong>EC2</strong>, is an Amazon Web Service, that
allows its users to use machines (instances) on demand on the cloud. An
EC2 instance is a Xen virtual machine, running on different kinds of
hardware, at different prices, but always paid by the hour, allowing
lots of flexibility. Being virtual machines, instances can be launched
using custom operating system images, called <strong>AMI</strong> (Amazon Machine
Image). For the Resource Manager to use EC2 instances as computing
nodes, a specific EC2 Infrastructure as well as AMI creation utilities
are provided.</p>
</div>
<div class="sect4">
<h5 id="_pre_requisites"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites">Pre-Requisites</a></h5>
<div class="paragraph">
<p>The configuration of the AWS EC2 infrastructure is subjected to several requirements.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The administrator needs both an <strong>AWS access key</strong> and an <strong>AWS secret access key</strong> to enable ProActive to authenticate against AWS.
Please refer to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html?icmpid=docs_iam_console#Using_CreateAccessKey">the AWS documentation</a> to learn how to get them.</p>
</li>
<li>
<p>The permissions for using a supported <strong>AWS region</strong>.
Currently we only support the following AWS regions: ap-south-1, eu-west-3, eu-west-2, eu-west-1, ap-northeast-2, ap-northeast-1, sa-east-1, ca-central-1, ap-southeast-1, ap-southeast-2, eu-central-1, us-east-1, us-east-2, us-west-1, us-west-2.</p>
</li>
<li>
<p>Enough resources quota (including the number of instances, subnets, key pairs, etc) for creating your node source underlying instances.
The number of maximum allocated instances is to be configured by the administrator,
but has also to comply with the limitation of the regions.
Detailed information is available on <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_ec2">Amazon EC2 Limits Documentation</a>.</p>
</li>
<li>
<p>The administrator must be in possession of a valid <strong>AMI ID</strong> to provision instances operating ProActive node.
Currently we only support the Linux operating system for AWS.</p>
</li>
<li>
<p>The Resource Manager should be accessible from the AWS cloud.
Please consider replacing PNP by PAMR as communication protocol if the Resource Manager is located behind a NAT gateway.
You can get additional information about the PAMR protocol in the section <a href="ProActiveAdminGuide.html#_installation_on_a_cluster_with_firewall">Installation on a Cluster with Firewall</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration">Infrastructure Configuration</a></h5>
<div class="paragraph">
<p>To use a cluster of AWS instances as a computing resource for the ProActive scheduler, the administrator has to create a node source in the Resource Manager with the <strong>AWSEC2Infrastructure</strong> profile.
The configuration form exposes the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>awsKey</strong>: Your AWS access key ID (e.g., AKIAIOSFODNN7EXAMPLE) which is retrieved in the section <a href="ProActiveAdminGuide.html#_pre_requisites">Pre-Requisites</a>.</p>
</li>
<li>
<p><strong>awsSecretKey</strong>: Your AWS secret access key (e.g., wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY) retrieved in the section <a href="ProActiveAdminGuide.html#_pre_requisites">Pre-Requisites</a>.</p>
</li>
<li>
<p><strong>numberOfInstances</strong>: Total number of AWS instances (i.e., Virtual Machines) to create for this infrastructure.</p>
</li>
<li>
<p><strong>numberOfNodesPerInstance</strong>: Total number of ProActive Nodes to deploy in each created AWS instance.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If all the nodes of an AWS instance are removed, the instance will be terminated. For more information on the terminated state in AWS please see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/terminating-instances.html">AWS Terminating Instances</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>image</strong>: Defines which VM image (AMI) will be used to create the AWS instances.
The value to provide is the AWS region together with the unique AMI ID, for example: <code>eu-west-1/ami-bff32ccc</code>.
This is an optional property. When no image is specified by the user, the default value <code>eu-west-3/ami-03bca18cb3dc173c9</code> is used.
Currently only Linux images are supported for the EC2 infrastructure. Please use <a href="ProActiveAdminGuide.html#_aws_autoscaling_infrastructure">AWS Autoscaling Infrastructure</a> for Windows images.
Make sure the image is from a supported region (listed in the section <a href="ProActiveAdminGuide.html#_pre_requisites">Pre-Requisites</a>) and using Linux operating system.
More information about finding a Linux AMI ID is available on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/finding-an-ami.html">AWS EC2 guide for finding an AMI</a>.</p>
</li>
<li>
<p><strong>vmUsername</strong>: Specifies the default username of the VM image. This username is used to connect to AWS instances.
Note that you should specify a username already provided in your VM image.
If you are using a public AMI provided by Amazon Web Service, you can find the default username of your image <a href="https://alestic.com/2014/01/ec2-ssh-username/">here</a>.
This is an optional property. When it is not specified, the default value <code>ubuntu</code> is used.</p>
</li>
<li>
<p><strong>vmKeyPairName</strong>: Defines the name of the AWS key pair for accessing AWS instances.
This is an optional property. When it&#8217;s not specified, a default key pair will be created or reused in the given region of the deployment.
If specified, the key pair must exit in AWS in the region of deployment, and the <code>vmPrivateKey</code> must be specified as well.</p>
</li>
<li>
<p><strong>vmPrivateKey</strong>: Defines the AWS private key file (a <code>.pem</code> file) corresponding to 'vmKeyPairName' for accessing AWS instances.
This is an optional property. When it&#8217;s not specified, a default key pair will be created or reused in the given region of the deployment.
If specified, the name of the key pair (<code>vmKeyPairName</code>) to which this private key belongs to must be specified as well.</p>
</li>
<li>
<p><strong>vmType</strong>: The AWS VM type required for each VM (e.g. t3.medium).
   An optional parameter, if not provided, selecting a specific vmType will be ignored.
   It only supports VM types supported by Apache Jclouds. The list of supported instances can be found at
<a href="https://jclouds.apache.org/reference/javadoc/2.1.x/org/jclouds/ec2/domain/InstanceType.html">Apache Jclouds Supported Instance Types</a>.
<strong>vmType</strong> accepts the AWS instance type corresponding to each of these constants (for example <code>m4.large</code>, corresponding to the jclouds
   constant <code>InstanceType.M4_LARGE</code> will be accepted). See <a href="https://aws.amazon.com/ec2/instance-types/">AWS EC2 Instance Types</a> for the full list of AWS instance types.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Once the vmType parameter is set, it will override the parameters set for ram and cores.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ram</strong>: The minimum required amount of RAM (expressed in Mega Bytes) for each AWS instance that needs to be created.
This is an optional property. If not provided, the default value <code>2048</code> will be used.</p>
</li>
<li>
<p><strong>cores</strong>: The minimum required amount of virtual cores for each AWS instance that needs to be created.
This is an optional property. If not provided, the default value <code>2</code> will be used.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the combination between RAM and CORES does not match any existing AWS instance type, then the closest to the specified parameters will be selected.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>securityGroupIds</strong>: This option allows you to specify the id(s) of the security group(s) configured as a virtual firewall(s) to control inbound and outbound traffic for the EC2 instances hosting the ProActive nodes.
This is an optional property. If not provided, a security group will be automatically created and used.
More information regarding Amazon EC2 Security Group available on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html">AWS EC2 Security Groups</a>.</p>
</li>
<li>
<p><strong>subnetId</strong>: The subnetId option allows you to launch the ProActive nodes on EC2 instances, which will run into an existing subnet added to a specific Virtual Private Cloud.
This is an optional property.
More information regarding Amazon EC2 Virtual Private Cloud (Amazon VPC) available on <a href="https://aws.amazon.com/vpc/">AWS EC2 Virtual Private Cloud</a> and Amazon EC2 Subnet available on <a href="https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html">AWS EC2 Virtual Private Cloud and Subnet</a></p>
</li>
<li>
<p><strong>rmHostname</strong>: The hostname or the public IP address of the Resource Manager.
This address needs to be accessible from the AWS cloud.
For example, <code>try.activeeon.com</code>.</p>
</li>
<li>
<p><strong>connectorIaasURL</strong>: Connector-iaas is a ProActive service used to interact with IaaS like AWS.
By default it runs on the following URL <em>rmHostname/connector-iaas</em>.
For example, <code>http://try.activeeon.com:8080/connector-iaas</code>.</p>
</li>
<li>
<p><strong>nodeJarURL</strong>: The full URL path of the <em>node.jar</em> to download the ProActive node.jar on each new created AWS instance.
The URL needs to be accessible from the AWS cloud.
For example, <code>try.activeeon.com/rest/node.jar</code>.</p>
</li>
<li>
<p><strong>additionalProperties</strong>: Additional Java command properties to be added when starting each ProActive node JVM in AWS instances (e.g. <code>-Dpropertyna
me=propertyvalue</code>). This is an optional property.</p>
</li>
<li>
<p><strong>nodeTimeout</strong>: The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>startupScript</strong>: VM startup script to launch the ProActive nodes.
To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment, then download and and execute ProActive node.jar, if they are not already provided by the VM image.
The script can use <a href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">some arguments</a>. For example, it can use <code>%nodeJarUrl%</code> to represent the full URL path for downloading the <em>node.jar</em> file. These arguments will be interpreted by EC2 Infrastructure later.
This is an optional property. If left blank, the script is automatically generated for the Linux OS. Here is the default value of startupScript:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; mv jre1.8.0_382b05/ jre; fi
wget -nv %nodeJarUrl%
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
</li>
<li>
<p><strong>spotPrice</strong>: This parameter is only used when you want to deploy ProActive nodes on AWS spot instances. It specifies the maximum price that you are willing to pay per hour per instance (your bid price). When the spot price is too low to be satisfied within the node-running timeout (20 minutes by default, configurable through <code>connector-iaas.jclouds.compute.timeout.node-running</code> in the configuration file <em>dist/war/connector-iaas/WEB-INF/classes/application.properties</em>), the node source deployment will be failed and the related spot requests will be cancelled. This is an optional property. More information regarding Amazon spot instances available on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html">AWS Spot Instances</a>. For the current spot instance prices, see <a href="https://aws.amazon.com/ec2/spot/pricing/">Amazon EC2 Spot Instances Pricing</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using this configuration, you can start a ProActive Resource Manager and Scheduler using the <strong>/bin/proactive-server</strong> script.
An AWS EC2 NodeSource can now be added using the <strong>Create Node Source</strong> panel in the Resource Manager Portal or the command line interface:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns ec2 -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.AWSEC2Infrastructure awsKey awsSecretKey numberOfInstances numberOfNodesPerInstance image vmUsername vmKeyPairName vmPrivateKey vmType ram cores securityGroupIds subnetId rmHostname connectorIaasURL nodeJarURL additionalProperties nodeTimeout startupScript spotPrice</pre>
</div>
</div>
<div class="paragraph">
<p>As AWS is a paying service, when the ProActive server is stopped normally (without removing the created infrastructure), all the created AWS instances will be terminated. When the ProActive server is restarted, these instances will be re-configured as per the previous settings.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If ProActive server is forcibly killed, the created AWS instances will not be terminated. And, when ProActive server is restarted, the infrastructure will be re-configured as per the previous settings. If the instances were deleted at the AWS side, they will be re-created and re-configured.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_aws_autoscaling_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_aws_autoscaling_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_aws_autoscaling_infrastructure">6.4.7. AWS Autoscaling Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.AwsAutoScalingInfrastructure</code></p>
</div>
<div class="paragraph">
<p>Similarly to the EC2 Infrastructure, the <strong>AWS Autoscaling Infrastructure</strong> operates AWS EC2 service to provide computing nodes to the Resource Manager.
However, it implements a different instance management strategy that reduces the delay of node acquisition and node removal process and facilitates inter-node collaboration in the same cluster, thanks to the following changes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The instances operating the nodes are allocated from a common instance template.</p>
</li>
<li>
<p>The nodes share the same networking infrastructure through a common Virtual Private Cloud (VPC).
The infrastructure supports networking autoconfiguration if no parameter is supplied.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The node source using empty policy will not benefit from this latter management strategy. The deployment with empty policy doesn&#8217;t use the shared instance template and networking configuration.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_pre_requisites_2"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites_2"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites_2">Pre-Requisites</a></h5>
<div class="paragraph">
<p>The configuration of the AWS Autoscaling infrastructure is subjected to several requirements.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The administrator needs both an <strong>AWS access key</strong> and an <strong>AWS secret access key</strong> to enable ProActive to authenticate against AWS.
Please refer to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html?icmpid=docs_iam_console#Using_CreateAccessKey">the AWS documentation</a> to learn how to get them.</p>
</li>
<li>
<p>The <strong>AWS region</strong> that will support the node cluster must not have reached its resources quota.
It has to be able to allocate one instance template in every case situation.
If the network autoconfiguration has to be be triggered, the region has to be able to provide one VPC, one subnet, one internet gateway and one security group.
The number of maximum allocated instances is to be configured by the administrator, but has also to comply with the limitation of the regions.
Detailed information is available in AWS documentation for <a href="https://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html#limits_vpc">VPC</a> and <a href="https://aws.amazon.com/fr/ec2/faqs/#How_many_instances_can_I_run_in_Amazon_EC2">Instances</a>.</p>
</li>
<li>
<p>The administrator must be in possession of a valid <strong>AWS keypair</strong> and the ID of the <strong>Amazon Machine Image (AMI)</strong> to provision instances operating ProActive node.
If the AMI to use does not propose the Linux operating system, the administrator must supply a <strong>provision script</strong> to (i) download a Java Runtime Environment (JRE), (ii) download ProActive Node agent (node.jar), (iii) and start up the ProActive agent.</p>
</li>
<li>
<p>Optionally, if networking autoconfiguration is not triggered, the administrator has to configure (i) a public <strong>VPC</strong>, (ii) a <strong>Subnet</strong> complying with with VPC CIDR configuration, (iii) an Internet gateway for that VPC and a (iv) Security Group authorizing HTTPS connection to Internet and PNP or PAMR connection to the Resource Manager.
The administrator must be in possession of the IDs of the VPC, of the Subnet and of the Security Group.</p>
</li>
<li>
<p>The Resource Manager has to be accessible from the AWS cloud.
Please consider replacing PNP by PAMR as communication protocol if the Resource Manager is located behind a NAT gateway.
You can get additional information about the PAMR protocol in the section <a href="ProActiveAdminGuide.html#_installation_on_a_cluster_with_firewall">Installation on a Cluster with Firewall</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration_2"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration_2"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration_2">Infrastructure Configuration</a></h5>
<div class="paragraph">
<p>To use a cluster of AWS instances as a computing resource for the ProActive scheduler, the administrator has to create a NodeSource in the Resource Manager with the <strong>AwsAutoScalingInfrastructure</strong> profile.
The configuration form exposes the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>vmGroupTagPrefix:</strong> Each instance prepared by the connector is flagged with the tag named <strong>vmGroupName</strong>.
This tag is valued with this configuration option and the Node Source name.
Concurrent ProActive schedulers can therefore operate concurrent clusters in the same AWS region, with the same node source name, provided that they diverge on the affected value to this parameter.
This option is mandatory.</p>
</li>
<li>
<p><strong>awsKey:</strong> This field must be filled with the content of the AWS key from the administrator.
This option is mandatory.</p>
</li>
<li>
<p><strong>awsSecretKey:</strong> The administrator must complete this field with the content of their secret access key.
This option is mandatory.</p>
</li>
<li>
<p><strong>maxVms:</strong> This parameter defines the number of maximum tolerated instances on the infrastructure: the instance allocations will be systematically blocked if the Resource Manager tries to overpass this threshold.
This option is mandatory and cannot exceed 100.</p>
</li>
<li>
<p><strong>defaultInstanceType:</strong> This parameter defines the instance type to use for AWS instance operating ProActive.
This parameter should be choosen according to the expected processing to be performed on the node source.
This option is mandatory and has to be filled after one AWS InstanceType name (e.g. t3.large).</p>
</li>
<li>
<p><strong>amiId:</strong> The administrator defines in this field the ID of the AMI to use to bootstrap instance operating ProActive nodes.
This option is mandatory, has to refer to an existing AMI in the region, and has to comply with AMI ID format.</p>
</li>
<li>
<p><strong>publicSshKey:</strong> The administrator has to provide the name of the AWS keypair to be use to operate the instance supporting nodes.
This option is mandatory, and must refer to an existing AWS keypair in the region.</p>
</li>
<li>
<p><strong>defaultVpcId:</strong> This parameter can be filled with the ID of the VPC to use to operate instance operating nodes.
If specified, this parameter has to refer to an existing VPC in the region and comply with the VPC ID format.
If left blank, the connector will, first, try to get the default VPC ID in the specified region if set, otherwise it will trigger networking autoconfiguration.</p>
</li>
<li>
<p><strong>defaultSubNetId:</strong> The administrator can define which subnet has to be attached to the the instance supporting nodes.
If specified, this parameter has to refer to an existing subnet in the region affected to the specified VPC, and has to comply with the subnet ID format.
This parameter has to be filled only if the <strong>defaultVpcId</strong> is also completed.
Otherwise, this parameter has to be left blank to trigger networking autoconfiguration.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please do not trigger networking autoconfiguration if you operate ProActive on AWS with PNP protocol.
Otherwise, a new and distinct VPC will be used to operate the nodes created by the NodeSource, preventing their communication with the Resource Manager.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>defaultSecurityGroup:</strong> This parameter receives the ID of the security group to spawn instances into.
If this parameter does not meet the requirement regarding the provided VPC and subnet, a new security group will be generated by default and will be re-used if the same deployment scenario is repeated.
This parameter is mandatory, and has to comply with the format of the ID of the AWS security groups.</p>
</li>
<li>
<p><strong>region:</strong> The administrator specifies here the AWS region to allocate the cluster into.
This parameter is mandatory and has to be configured after the name of an AWS region.
Please see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions">the related documentation</a> to see the available region names.</p>
</li>
<li>
<p><strong>rmUrl:</strong> This field receives the URL to access the Resource Manager from the nodes.
The URL must comply with the specification of the communication protocols used by ProActive, and can therefore be prefixed with <strong>pnp://</strong>, <strong>pnps://</strong> or <strong>pamr://</strong>.
This parameter is mandatory.</p>
</li>
<li>
<p><strong>rmHostname:</strong> This field is to be filled with the domain name or the IP of the host operating the Resource Manager.
This option is mandatory.</p>
</li>
<li>
<p><strong>nodeJarURL:</strong> URL used to download the node jar on the VM.</p>
</li>
<li>
<p><strong>additionalProperties:</strong> Additional parameters to be used when invoking PA Agent (not used if an externalStartupScript is provided).</p>
</li>
<li>
<p><strong>externalStartupScript:</strong> The administrator has to provide a script to configure AWS instances to work with ProActive.
Usually, if not provided by the AMI, this script is expected to download the Java Runtime Environment and ProActive node.jar agent file.
This field is expected to contain the content of the script, and start with a Shebang, as an AWS imposes it.
If left blank, the script is automatically generated for the Linux OS.</p>
</li>
<li>
<p><strong>maxNodePerVM:</strong> The administrator specifies the amount of nodes to be deployed on each AWS instance.
This parameter is mandatory, and has to be an integer equal or greater than one.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please ensure this parameter is aligned with the capacity of the specified instance type mentioned in the <strong>defaultInstanceType</strong> field.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>deploymentTimeOut:</strong> This field contains the delay in seconds for a node to be deployed and to contact back the Resource Manager before being declared as lost.
This parameter is mandatory.</p>
</li>
<li>
<p><strong>cleanDelay:</strong>	The administrator can define the periodicity in seconds for unused instance removal.
This parameter is mandatory.</p>
</li>
<li>
<p><strong>spotPrice</strong>: This parameter is only used when you want to deploy ProActive nodes on AWS spot instances. It specifies the maximum price that you are willing to pay per hour per instance (your bid price). If your bid price is lower than the current spot instance price for your specified instance type, the node source deployment will be failed immediately. This is an optional property. More information regarding Amazon spot instances available on <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-spot-instances.html">AWS Spot Instances</a>. For the current spot instance prices, see <a href="https://aws.amazon.com/ec2/spot/pricing/">Amazon EC2 Spot Instances Pricing</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using this configuration, you can start a Resource Manager and a Scheduler using the <strong>/bin/proactive-server</strong> script  as explained in section <a href="ProActiveAdminGuide.html#_run_the_proactive_scheduler">Get Started</a>.
An AWS Autoscaling NodeSource can now be added using the <strong>Create Node Source</strong> panel in the Resource Manager or the command line interface:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns awsAutoScaling -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.AwsAutoscalingInfrastructure vmGroupTagPrefix awsKey awsSecretKey maxVms defaultInstanceType amiId publicSshKey defaultVpcId defaultSubNetId defaultSecurityGroup region rmUrl rmHostname nodeJarURL additionalProperties externalStartupScript maxNodePerVM deploymentTimeOut cleanDelay spotPrice</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When ProActive server is stopped (without removing the created infrastructure), AWS instances will not be terminated. And when ProActive server is restarted, the infrastructure will be re-configured as per the previous settings. If the instances were deleted at the cloud side, they will be re-created and re-configured.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_openstack_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_openstack_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_openstack_infrastructure">6.4.8. OpenStack Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.OpenstackInfrastructure</code></p>
</div>
<div class="paragraph">
<p>To use OpenStack instances as computing nodes, a specific OpenStack Infrastructure
can be created using the Resource Manager. This section describes briefly how to make it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, you need to have an admin account on your OpenStack server. For more information see
<a href="https://docs.openstack.org/icehouse/install-guide/install/yum/content/keystone-users.html">OpenStack users and tenants</a>.</p>
</li>
<li>
<p>The creation of OpenStack Infrastructure asks for an authentication to the OpenStack server and a deployment of instances that will host ProActive nodes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Use the proper admin username and password to fill in the properties <strong>username</strong> and <strong>password</strong> and perform the basic OpenStack authentication. Those two parameters should never change, except if you need for some reason to handle multiple OpenStack accounts.</p>
</div>
<div class="paragraph">
<p>For more information regarding OpenStack authentication mode see <a href="https://docs.openstack.org/security-guide/identity/authentication.html">OpenStack authentication mode</a>.</p>
</div>
<div class="paragraph">
<p>Other properties needed for the authentication are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>domain:</strong> The name of the domain to use that refers to the collection of projects and users defining administrative boundaries for managing Identity entities. For more information see <a href="https://docs.openstack.org/security-guide/identity/domains.html">OpenStack domain</a>.</p>
</li>
<li>
<p><strong>endpoint:</strong> The hostname or the IP address of the OpenStack server. This address needs to be accessible from the Resource Manager.</p>
</li>
<li>
<p><strong>scopePrefix:</strong> The scope prefix to use. It can be project, projectId, domain or domainId.</p>
</li>
<li>
<p><strong>scopeValue:</strong> The value of the scope prefix.</p>
</li>
<li>
<p><strong>region:</strong> The Region for networks and compute resources to use.</p>
</li>
<li>
<p><strong>identityVersion:</strong> The REST API version of OpenStack installation. For more information see <a href="https://docs.openstack.org/keystone/pike/contributor/http-api.html">OpenStack API Version</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties needed for the deployment of instance are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>image:</strong> Defines which image will be used to create the OpenStack instance. The value to provide is the unique image Id.</p>
</li>
<li>
<p><strong>flavor:</strong> Defines the size of the instance. The value to provide is the flavor name or the flavor Id. For more information see <a href="https://docs.openstack.org/openstack-ops/content/flavors.html">OpenStack flavors</a>.</p>
</li>
<li>
<p><strong>networkId:</strong>  Defines the identifier of the network to be attached to the instance. This value can be blank to leave the selection to OpenStack.</p>
</li>
<li>
<p><strong>publicKeyName:</strong> Defines the name of the public key to use for a remote connection when the instance is created.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
In order to use publicKeyName, the key pair needs to be created and imported first on the OpenStack server. For more information see <a href="https://docs.openstack.org/python-openstackclient/pike/cli/command-objects/keypair.html">OpenStack key pair management</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>numberOfInstances:</strong> Total number of OpenStack instances to create for this infrastructure.</p>
</li>
<li>
<p><strong>numberOfNodesPerInstance:</strong> Total number of ProActive Nodes to deploy in each OpenStack created instance.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If all the nodes of an OpenStack instance are removed, the instance will be terminated.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other properties for the node deployment in the <strong>Create OpenStack Node Source</strong> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>connectorIaasURL:</strong> Connector-iaas is a ProActive service used to interact with IaaS like OpenStack. By default it runs on the following URL <strong>rmHostname/connector-iaas</strong>.</p>
</li>
<li>
<p><strong>rmHostname:</strong> The hostname or the public IP address of the Resource Manager. This address needs to be accessible from the OpenStack server.</p>
</li>
<li>
<p><strong>downloadCommand:</strong> The command to download the ProActive <strong>node.jar</strong>. This command is executed in all the newly created OpenStack instances.
The full URL path of the <strong>node.jar</strong> to download needs to be accessible from the OpenStack cloud.</p>
</li>
<li>
<p><strong>additionalProperties:</strong> Additional Java command properties to be added when starting each ProActive node JVM in OpenStack instances (e.g. \"-Dpropertyname=propertyvalue\").</p>
</li>
<li>
<p><strong>nodesInitDelay:</strong> Estimated startup time (expressed in millisecond) of the nodes, including the startup time of VMs. After this timeout expired, the nodes will be considered as lost.</p>
</li>
<li>
<p><strong>startupScript:</strong> VM startup script to launch the ProActive nodes.
To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment, then download and and execute ProActive node.jar, if they are not already provided by the VM image.
The script can use <a href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">some arguments</a>. For example, it can use <code>%nodeJarUrl%</code> to represent the full URL path for downloading the <em>node.jar</em> file. These arguments will be interpreted by Openstack Infrastructure later.
This is an optional property. If left blank, the script is automatically generated for the Linux OS. Here is the default value of startupScript:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; mv jre1.8.0_382b05/ jre; fi
wget -nv %nodeJarUrl%
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using this configuration, you can start a Resource Manager and a
Scheduler using the <strong>/bin/proactive-server</strong> script. An OpenStack NodeSource can
now be added using the <strong>Create Node Source</strong> panel in the Resource Manager or the command line interface:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns openstack -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.OpenStackInfrastructure username password endpoint rmHostname connectorIaasURL image flavor publicKeyName numberOfInstances numberOfNodesPerInstance downloadCommand additionalProperties nodesInitDelay startupScript</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When ProActive server is stopped (without removing the created infrastructure), OpenStack instances will not be terminated. And when ProActive server is restarted, the infrastrucutre will be re-configured as per the previous settings. If the instances were deleted at the OpenStack Cloud side, they will be re-created and re-configured.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_vmware_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_vmware_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_vmware_infrastructure">6.4.9. VMware Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.VMWareInfrastructure</code></p>
</div>
<div class="paragraph">
<p>To use VMware instances as computing nodes, a specific VMware Infrastructure
can be created using the Resource Manager. This section describes briefly how to make it.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, you need to have an admin account on your VMware server.For more information see
<a href="https://pubs.vmware.com/vsphere-51/topic/com.vmware.vsphere.security.doc/GUID-670B9B8C-3810-4790-AC83-57142A9FE16F.html">VMware users</a>.</p>
</li>
<li>
<p>Use the login and password information to fill in the properties <strong>vmware_username</strong>,
<strong>vmware_password</strong> in the <strong>Create Node Source</strong> panel located in the Resource Manager.
Those two parameters should never change, except if you need for
some reason to handle multiple VMware accounts. Other properties in the
<strong>Create Node Source</strong> are:</p>
<div class="ulist">
<ul>
<li>
<p><strong>endpoint:</strong> The hostname or the IP address of the VMware server. This address needs to be accessible from the Resource Manager.</p>
</li>
<li>
<p><strong>rmHostname:</strong> The hostname or the public IP address of the Resource Manager. This address needs to be accessible from the VMware server.</p>
</li>
<li>
<p><strong>connectorIaasURL:</strong> Connector-iaas is a service embedded in the Scheduler used to interact with IaaS like VMware. By default it runs on the following URL <strong>rmHostname/connector-iaas</strong>.</p>
</li>
<li>
<p><strong>image:</strong> Defines which image will be used to create the VMware instance. The
value to provide is the VMware folder together with the unique image Id, for example: <code>ActiveEon/ubuntu</code>.</p>
</li>
<li>
<p><strong>minRam:</strong> The minimum required amount of RAM expressed in Mega Bytes for each VMware instance that needs to be created.</p>
</li>
<li>
<p><strong>minCores:</strong> The minimum required amount of virtual cores for each VMware instance that needs to be created.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the combination between RAM and CORES does not match any existing VMware instance type, then the closest to the specified parameters will be selected.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>vmUsername:</strong> Defines the username to log in the instance when it is created.</p>
</li>
<li>
<p><strong>vmPassword:</strong> Defines the password to log in the instance when it is created.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The username and password are related to the image.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>numberOfInstances:</strong> Total number of VMware instances to create for this infrastructure.</p>
</li>
<li>
<p><strong>numberOfNodesPerInstance:</strong> Total number of ProActive Nodes to deploy in each VMware created instance.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If all the nodes of an VMware instance are removed, the instance will be terminated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>downloadCommand:</strong> The command to download the ProActive <strong>node.jar</strong>. This command is executed in all the newly created VMware instances.
The full URL path of the <strong>node.jar</strong> to download, needs to be accessible from the VMware cloud.</p>
</li>
<li>
<p><strong>additionalProperties:</strong> Additional Java command properties to be added when starting each ProActive node JVM in VMware instances (e.g. \"-Dpropertyname=propertyvalue\").</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Using this configuration, you can start a Resource Manager and a
Scheduler using the <strong>/bin/proactive-server</strong> script. An VMware NodeSource can
now be added using the <strong>Create Node Source</strong> panel in the Resource Manager or the command line interface:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns vmware -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.VmwareInfrastructure username password endpoint rmHostname connectorIaasURL image ram cores vmusername vmpassword numberOfInstances numberOfNodesPerInstance downloadCommand additionalProperties</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When ProActive server is stopped (without removing the created infrastructure), VMware instances will not be terminated. And when ProActive server is restarted, the infrastrucutre will be re-configured as per the previous settings. If the instances were deleted at the VMware server side, they will be re-created and re-configured.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_gce_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_gce_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_gce_infrastructure">6.4.10. GCE Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.GCEInfrastructure</code></p>
</div>
<div class="paragraph">
<p>Google Compute Engine, aka GCE, delivers virtual machines running on Google&#8217;s infrastructure.
To use GCE virtual machines as computing nodes, a specific GCE Infrastructure needs to be created using the Resource Manager.
This section describes briefly how to make it.</p>
</div>
<div class="sect4">
<h5 id="_pre_requisites_3"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites_3"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites_3">Pre-Requisites</a></h5>
<div class="paragraph">
<p>First, to use the GCE Infrastructure in the Resource Manager, proper Google Cloud credentials are needed for an authentication to the Google Cloud Platform APIs.
To obtain them, you can take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <a href="https://console.developers.google.com">Developer Console</a>.</p>
</li>
<li>
<p>Log in with an account which has the permissions to create service accounts and service account keys (i.e., granted the <em>Service Account Admin</em> and <em>Service Account Key Admin</em> role).</p>
</li>
<li>
<p>Following the document <a href="https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating_a_service_account">Creating a service account</a> to create a service account <strong>granted the <em>Compute Admin</em> role</strong></p>
</li>
<li>
<p>Following the document <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys#creating_service_account_keys">Creating service account keys</a> to create a service key of the type <strong><em>JSON</em></strong>, a JSON file for the created service account key should be downloaded to your machine.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information regarding Google Cloud service accounts see
<a href="https://cloud.google.com/compute/docs/access/service-accounts">Google Cloud Service Accounts</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration_3"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration_3"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration_3">Infrastructure Configuration</a></h5>
<div class="paragraph">
<p>Now, you are ready to create a new node source of the type <em>GCE Infrastructure</em>.
The properties needed for the node deployment in the <em>Create GCE Node Source</em> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>gceCredential</strong>: The credentials to perform the basic Google Cloud Platform authentication.
Upload the JSON file of a Google Cloud service account key (downloaded in the section Pre-Requisites) to fill in this property.</p>
</li>
<li>
<p><strong>totalNumberOfInstances</strong>: Total number of GoogleComputeEngine instances to create for this infrastructure.</p>
</li>
<li>
<p><strong>numberOfNodesPerInstance</strong>: Total number of ProActive Nodes to deploy in each created GoogleComputeEngine instance.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If all the nodes of a GoogleComputeEngine instance are removed, the instance will be terminated.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>vmUsername</strong>: Defines the user name that will be used to connect to GoogleComputeEngine instances.
If not provided, then GoogleComputeEngine instances will be accessed as the default user.
If specified, the corresponding <code>vmPublicKey</code> and <code>vmPrivateKey</code> must be specified as well.</p>
</li>
<li>
<p><strong>vmPublicKey</strong>: Defines the public key to grant a user specified access for the created GoogleComputeEngine instances.
If specified, the corresponding <code>vmUsername</code> and <code>vmPrivateKey</code> must be specified as well.</p>
</li>
<li>
<p><strong>vmPrivateKey</strong>: Defines the private key that will be used to connect to GoogleComputeEngine instances.
If specified, the corresponding <code>vmUsername</code> and <code>vmPublicKey</code> must be specified as well.</p>
</li>
<li>
<p><strong>image</strong>: Defines which image will be used to create the GoogleComputeEngine instance.
The value to provide is the unique name of the image.
If not provided, the default value "debian-9-stretch-v20190326" will be used.
For more information see <a href="https://cloud.google.com/compute/docs/images/">Google Compute Engine Images List</a>.</p>
</li>
<li>
<p><strong>region</strong>: The geographic zone for Google Cloud Platform resources to use.
If not provided, the default value "us-central1-a" will be used.
For more information see <a href="https://cloud.google.com/compute/docs/regions-zones/">Google Compute Engine Regions and Zones</a>.</p>
</li>
<li>
<p><strong>machineType</strong>: The machine type required for each VM (e.g. n2-standard-2).
An optional parameter, if not provided, selecting a specific machineType will be ignored.
For more information see <a href="https://cloud.google.com/compute/docs/machine-resource/">Google Compute Engine Machine Families Resource</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Once the machineType parameter is set, it will override the parameters set for ram and cores
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ram</strong>: The minimum required amount of RAM (expressed in Mega Bytes) for each GoogleComputeEngine instance to be created.
If not provided, the default value 1740 will be used.</p>
</li>
<li>
<p><strong>cores</strong>: The minimum required amount of virtual cores for each GoogleComputeEngine instance to be created.
If not provided, the default value 1 will be used.</p>
</li>
<li>
<p><strong>rmHostname</strong>: The hostname or the public IP address of the Resource Manager. This address needs to be accessible from the GoogleComputeEngine server.</p>
</li>
<li>
<p><strong>connectorIaasURL</strong>: Connector-iaas is a ProActive service used to interact with IaaS like GoogleComputeEngine.
By default it runs on the following URL <em>rmHostname/connector-iaas</em>.</p>
</li>
<li>
<p><strong>nodeJarURL</strong>: The full URL path of the <em>node.jar</em> to download the ProActive node.jar on each new created GoogleComputeEngine instance.
The URL needs to be accessible from the GoogleComputeEngine server.</p>
</li>
<li>
<p><strong>additionalProperties</strong>: Additional Java command properties to be added when starting each ProActive node JVM in GoogleComputeEngine instances (e.g. "-Dpropertyname=propertyvalue").</p>
</li>
<li>
<p><strong>nodeTimeout</strong>: The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>startupScript:</strong> VM startup script to launch the ProActive nodes.
To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment, then download and and execute ProActive node.jar, if they are not already provided by the VM image.
The script can use <a href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">some arguments</a>. For example, it can use <code>%nodeJarUrl%</code> to represent the full URL path for downloading the <em>node.jar</em> file. These arguments will be interpreted by GCE Infrastructure later.
This is an optional property. If left blank, the script is automatically generated for the Linux OS. Here is the default value of startupScript:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; mv jre1.8.0_382b05/ jre; fi
wget -nv %nodeJarUrl%
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using this configuration, you can start a Resource Manager and a Scheduler using the <strong>/bin/proactive-server</strong> script.
A GoogleComputeEngine NodeSource can now be added using the <strong>Create Node Source</strong> panel in the Resource Manager or the command line interface:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns googlecomputeengine -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.GCEInfrastructure gceCredential totalNumberOfInstances numberOfNodesPerInstance vmUsername vmPublicKey vmPrivateKey image region machineType ram cores rmHostname connectorIaasURL nodeJarURL additionalProperties nodeTimeout startupScript</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When ProActive server is stopped, GoogleComputeEngine instances will be automatically deleted. And when ProActive server is restarted, the infrastructure will be recovered as per the previous settings. The required GoogleComputeEngine instances will be re-created and re-configured.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_azure_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_azure_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_azure_infrastructure">6.4.11. Azure Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.AzureInfrastructure</code></p>
</div>
<div class="paragraph">
<p>The Resource Manager allows to deploy ProActive nodes on the Microsoft Azure cloud. This infrastructure will create and manage virtual machines (VMs) with your custom Azure image and host ProActive nodes on them. In this section we will guide you through the requirements and configuration needed to setup an Azure infrastructure.</p>
</div>
<div class="sect4">
<h5 id="_pre_requisites_4"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites_4"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites_4">Pre-Requisites</a></h5>
<div class="paragraph">
<p>To create an Azure infrastructure, ProActive relies on an existing Azure user account with a valid subscription. In particular, you will require:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Azure account:</strong> You should have a valid Azure account, linked to an Azure subscription with enough budget and core quota to deploy the VMs (and their underlying resources) that you request.</p>
</li>
<li>
<p><strong>Azure privileges:</strong> If your account does not have full Admin privileges on your subscription, please make sure you have rights to:</p>
<div class="ulist">
<ul>
<li>
<p>Access a <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview#resource-groups">resource group</a> of your choice.</p>
</li>
<li>
<p>Create VMs in that resource group.</p>
</li>
<li>
<p>Delete VMs in that resource group.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Service Principal credentials:</strong> ProActive uses Azure Resource Manager API to create Azure instances in the infrastructure. This API requires a set of Active Directory <em>service principal credentials</em> for non-interactive login (client, secret, tenant). If you do not have them, you can create them via the <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">Azure Portal</a> or <a href="https://learn.microsoft.com/en-us/cli/azure/azure-cli-sp-tutorial-1">Azure CLI</a>. Please ask your administrator in case you do not have the privileges to create them. The credentials should be strings of hexadecimal values like <em>1a2b3c4d-5e6f-1a2b-3c4d-5e6f-1a2b3c4d5e6f</em>.</p>
</li>
<li>
<p><strong>Custom Azure image:</strong> ProActive will create the infrastructure&#8217;s instances from an Azure image. You can either use a <em>known image</em> or a custom Linux image available on the resource group of your choice. If you do not have one, you can create it by following <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/tutorial-custom-images">this tutorial</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration_4"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration_4"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration_4">Infrastructure Configuration</a></h5>
<div class="paragraph">
<p>Once all the pre-requisites are met, you are ready to create an Azure infrastructure. On the ProActive&#8217;s Resource Manager portal, select <em>AzureInfrastructure</em> from the Infrastructure drop-down list.</p>
</div>
<div class="paragraph">
<p>The following fields are available to configure your Azure infrastructure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>clientId:</strong> Corresponds to the Service Principal <em>application ID</em>.</p>
</li>
<li>
<p><strong>secret:</strong> Corresponds to the <em>secret</em> value (password) of the Service Principal.</p>
</li>
<li>
<p><strong>domain:</strong> Corresponds to the Azure <em>domain</em>, <em>tenant ID</em>, or <em>directory ID</em> of your Active Directory.</p>
</li>
<li>
<p><strong>subscriptionId:</strong> The <em>ID</em> of your Azure subscription.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next four parameters are optional, and apply to advanced Azure endpoint configurations only.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>authenticationEndpoint:</strong> Azure Authentication endpoint.</p>
</li>
<li>
<p><strong>managementEndpoint:</strong> Azure Management endpoint.</p>
</li>
<li>
<p><strong>resourceManagerEndpoint:</strong> Azure Resource Manager endpoint.</p>
</li>
<li>
<p><strong>graphEndpoint:</strong> Azure AD Graph endpoint.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>* * * * *</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>rmHttpUrl:</strong> Here you should provide your server&#8217;s URL or public IP (e.g. try.activeeon.com). A default value will be generated from the system properties but you might need to modify it according to your network configuration so that it is accessible from your Azure nodes.</p>
</li>
<li>
<p><strong>connectorIaasUrl:</strong> The URL of your <em>Connector IaaS</em> service. A default value will be generated as well (e.g. http://try.activeeon.com:8080/connector-iaas).</p>
</li>
<li>
<p><strong>image:</strong> Can be, either:</p>
<div class="ulist">
<ul>
<li>
<p>the name or id of your <strong>custom image</strong>. The image should be located within the provided subscription and accessible to the service principal. It should also be located in the Azure region that you define in your configuration (see <strong>region</strong> parameter below).</p>
</li>
<li>
<p>the name of a <strong>known image</strong>, as described in the table below:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Linux <a href="https://github.com/Azure/azure-libraries-for-java/blob/master/azure-mgmt-compute/src/main/java/com/microsoft/azure/management/compute/KnownLinuxVirtualMachineImage.java">[link to source]</a></th>
<th class="tableblock halign-left valign-top">Windows <a href="https://github.com/Azure/azure-libraries-for-java/blob/master/azure-mgmt-compute/src/main/java/com/microsoft/azure/management/compute/KnownWindowsVirtualMachineImage.java">[link to source]</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UBUNTU_SERVER_14_04_LTS<br>
UBUNTU_SERVER_16_04_LTS<br>
UBUNTU_SERVER_18_04_LTS (<em>default value</em>)<br>
DEBIAN_9<br>
DEBIAN_10<br>
CENTOS_8_1<br>
OPENSUSE_LEAP_15_1<br>
SLES_15_SP1<br>
REDHAT_RHEL_8_2<br>
ORACLE_LINUX_8_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WINDOWS_DESKTOP_10_20H1_PRO<br>
WINDOWS_SERVER_2019_DATACENTER<br>
WINDOWS_SERVER_2019_DATACENTER_WITH_CONTAINERS<br>
WINDOWS_SERVER_2016_DATACENTER<br>
WINDOWS_SERVER_2012_R2_DATACENTER</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Due to a recent change in Debian images that disables VM Extensions, Debian images (<em>DEBIAN_9</em>, <em>DEBIAN_10</em>) are not supported anymore.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>imageOSType:</strong> Image OS type (A choice between <em>linux</em> and <em>windows</em>). The default value is <em>linux</em>.</p>
</li>
<li>
<p><strong>vmSizeType:</strong> The size of the VMs to be deployed. The default value is <em>Standard_D1_v2</em>. Azure provides an extensive list of <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes">Linux VM sizes</a>. If you want to know the available sizes for a specific region or subscription you can use <a href="https://docs.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-list-sizes">Azure CLI command</a> <code>az vm list-sizes -l {your location}</code>.</p>
</li>
<li>
<p><strong>vmUsername:</strong> Provide a user name for the VM.</p>
</li>
<li>
<p><strong>vmPassword:</strong> Provide a password for your VM. Here is a guideline for <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/faq#what-are-the-password-requirements-when-creating-a-vm">Linux passwords on Azure</a>.</p>
</li>
<li>
<p><strong>vmPublicKey:</strong> An optional public RSA key to connect to your VMs via SSH protocol.</p>
</li>
<li>
<p><strong>resourceGroup:</strong> The name of the resource group of your choice. If left blank, the resource group of the image will be used by default.</p>
</li>
<li>
<p><strong>region:</strong> The Azure region where the VMs will be deployed. For a list of the regions supported by your subscription, you can use the <a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list-locations">CLI command</a> <code>az account list-locations -o table</code>, the right name to use is the one in the column <em>name</em>.</p>
</li>
<li>
<p><strong>numberOfInstances:</strong> Total instances (VMs) to be created. The default value is <em>1</em>.</p>
</li>
<li>
<p><strong>numberOfNodesPerInstances:</strong> The number of ProActive nodes to be launched in each VM. The default value is <em>1</em>.</p>
</li>
<li>
<p><strong>downloadCommand:</strong> Command used to download ProActive&#8217;s node.jar worker. If left blank a default command will be generated.</p>
</li>
<li>
<p><strong>privateNetworkCIDR:</strong> An optional network Classless Inter-Domain Routing to allocate the new VMs within the private network. The default value is <em>10.0.0.0/24</em>.</p>
</li>
<li>
<p><strong>staticPublicIP:</strong> A boolean flag to determine whether the public IPs of the infrastructure&#8217;s VMs should be static. The default value is <em>true</em>.</p>
</li>
<li>
<p><strong>additionalProperties:</strong> Additional JVM properties to configure your ProActive node. The default values allow to handle both PNP and PAMR protocols. You can add your own properties but be aware that removing the current values might cause the deployment to fail.</p>
</li>
<li>
<p><strong>linuxStartupScript:</strong> Linux VM startup script to launch the ProActive nodes.
To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment, then download and and execute ProActive node.jar, if they are not already provided by the VM image.
The script can use <a href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">some arguments</a>. For example, it can use <code>%nodeJarUrl%</code> to represent the full URL path for downloading the <em>node.jar</em> file. These arguments will be interpreted by Azure Infrastructure later.
This is an optional property. If left blank, the script is automatically generated. Here is the default value of linuxStartupScript:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; mv jre1.8.0_382b05/ jre; fi
wget -nv %nodeJarUrl%
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
</li>
<li>
<p><strong>windowsStartupScript:</strong> Powershell script to be run during Windows VM startup for launching the ProActive nodes.
This is an optional property. If left blank, the script is automatically generated. Here is the default value of windowsStartupScript:</p>
<div class="literalblock">
<div class="content">
<pre>$download=New-Object System.Net.WebClient;
$download.DownloadFile('http://javadl.oracle.com/webapps/download/AutoDL?BundleId=238729_478a62b7d4e34b78b671c754eaaf38ab', 'c:\jreInstall.exe');
$procInstall=Start-Process -FilePath 'c:\jreInstall.exe' -ArgumentList '/s REBOOT=ReallySuppress INSTALLDIR=c:\jre' -Wait -PassThru;
$procInstall.waitForExit();
$download.DownloadFile('%nodeJarUrl%', 'c:\node.jar');
Start-Process -NoNewWindow 'c:\jre\bin\java' -ArgumentList '-jar', 'c:\node.jar', '-Dproactive.communication.protocol=%protocol%', '-Dproactive.pamr.router.address=%rmHostname%', '-D%instanceIdNodeProperty%=%instanceId%', '-r', '%rmUrl%', '-s', '%nodeSourceName%', '-v', '%credentials%', '-w', '%numberOfNodesPerInstance%', '%additionalProperties%'</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following fields are the optional parameters of the Azure Billing Configuration section. The aim of this section is to configure the automatic cloud cost estimator. It is done by considering all the Azure resources related to your reservation (virtual machines, disks,..). This mechanism relies on the Azure Resource Usage and RateCard APIs (<a href="https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/usage-rate-card-overview" class="bare">https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/usage-rate-card-overview</a>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>resourceUsageRefreshFreqInMin:</strong> Periodical resource usage retrieving delay in min. The default value is 30.</p>
</li>
<li>
<p><strong>rateCardRefreshFreqInMin:</strong> Periodical rate card retrieving delay in min. The default value is 30.</p>
</li>
<li>
<p><strong>offerId:</strong> The Offer ID parameter consists of the "MS-AZR-" prefix, plus the Offer ID number. The default value is "MS-AZR-0003p" (Pay-As-You-Go offer).</p>
</li>
<li>
<p><strong>currency:</strong> The currency in which the resource rates need to be provided. The default value is "USD".</p>
</li>
<li>
<p><strong>locale:</strong> The culture in which the resource metadata needs to be localized. The default value is "en-US".</p>
</li>
<li>
<p><strong>regionInfo:</strong> The 2 letter ISO code where the offer was purchased. The default value is "US".</p>
</li>
<li>
<p><strong>maxBudget:</strong> Your max budget for the Azure resources related to the node source. Also used to compute your global cost in % of your budget. The default value is 50.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Azure infrastructure offers a simple interface to easily create ProActive nodes on Azure. If your project requires a dynamic and customizable set of Azure VMs, you can opt for an <a href="ProActiveAdminGuide.html#_azure_scale_set_infrastructure">Azure Scale Set Infrastructure</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_azure_scale_set_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_azure_scale_set_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_azure_scale_set_infrastructure">6.4.12. Azure Scale Set Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.AzureVMScaleSetInfrastructure</code></p>
</div>
<div class="paragraph">
<p>We provide a highly customizable infrastructure to deploy ProActive nodes using an <a href="https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/overview">Azure Scale Set</a>. This infrastructure will allow you to automatically adjust the number of deployed virtual machines (VM) in response to the current workload, and according to your configured parameters, e.g. min/max number of nodes, number of nodes per VM, or minimal up-time. Auto-scaling will help you increase your processing capacity during peak computation periods, while keeping your expenses low during less intensive or idle periods.</p>
</div>
<div class="paragraph">
<p>Whether you require to run your workflows on Linux or Windows, use standard or custom VM images, do some pre-configuration steps, or mount a shared file system, the Azure Scale Set infrastructure can handle it. This guide describes the requirements and the various configuration parameters available to deploy an Azure Scale Set infrastructure.</p>
</div>
<div class="sect4">
<h5 id="_pre_requisites_5"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites_5"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites_5">Pre-Requisites</a></h5>
<div class="paragraph">
<p>As in our standard <a href="ProActiveAdminGuide.html#_azure_infrastructure">Azure Infrastructure</a>, ProActive relies on an existing Azure user account with a valid subscription in order to deploy a Scale Set. These are the specific requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Azure account:</strong> You should have a valid Azure account, linked to an Azure subscription with enough budget and <a href="https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits">service quotas</a> to deploy the Scale Set that you request.</p>
</li>
<li>
<p><strong>Azure privileges:</strong> If your account does not have full Admin privileges on your subscription, please make sure you have rights to:</p>
<div class="ulist">
<ul>
<li>
<p>Create a <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview#resource-groups">resource group</a> in a region of your choice.</p>
</li>
<li>
<p>Create a Scale Set in that resource group, and create its underlying resources: Public IP Address, Load Balancer, Network Security Group and Virtual Network.</p>
</li>
<li>
<p>Create a Storage account in that resource group, and use its various services (in particular Blobs, Tables and Queues).</p>
</li>
<li>
<p>Delete a resource group.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Service Principal credentials:</strong> ProActive uses Azure Resource Manager API to manage the Scale Set and Storage resources. This API requires a set of Active Directory <em>service principal credentials</em> for non-interactive login (client, secret, tenant). If you do not have them, you can create them via the <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">Azure Portal</a> or <a href="https://learn.microsoft.com/en-us/cli/azure/azure-cli-sp-tutorial-1">Azure CLI</a>. Please ask your administrator in case you do not have the privileges to create them. The credentials should be strings of hexadecimal values like <em>1a2b3c4d-5e6f-1a2b-3c4d-5e6f-1a2b3c4d5e6f</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_scale_set_tagging"><a class="anchor" href="ProActiveAdminGuide.html#_scale_set_tagging"></a><a class="link" href="ProActiveAdminGuide.html#_scale_set_tagging">Scale Set Tagging</a></h5>
<div class="paragraph">
<p>The infrastructure can dynamically apply tags to the created Scale Set when the infrastructure is attached to a <a href="ProActiveAdminGuide.html#_dynamic_policy">Dynamic Policy</a>.</p>
</div>
<div class="paragraph">
<p>This feature can be used to track Scale Set usage information in Azure Cost Monitoring. For example, when several computing batches are run subsequently on a Scale Set, it will be possible to know an approximate cost of each individual batch.</p>
</div>
<div class="paragraph">
<p>When the Dynamic Policy triggers a scale up of the Scale Set and when pending tasks that triggered this scale up have the <a href="../user/ProActiveUserGuide.html#_resource_tags">RESOURCE_TAGS</a> Generic Information defined (a key/value structure), configured tags will be applied to the Scale Set.</p>
</div>
<div class="paragraph">
<p>Please note that Azure Scale Set <em>do not support individual instance tagging</em> and tags will only be applied <strong>globally on the Scale Set</strong>. Accordingly, in a cost monitoring scenario, it is only possible to track the cost of subsequent computing batches (batches that run one after another) and not parallel batches on the same Scale Set.</p>
</div>
<div class="paragraph">
<p>When a tag with a given name has been applied, any new application of the tag will overwrite the previous value.</p>
</div>
<div class="paragraph">
<p>When the Scale Set scales down to zero instances, all currently applied tags will be removed. <em>This is the only case where tags are removed from the Scale Set</em>.</p>
</div>
<div class="paragraph">
<p>Finally, please note that tags are applied only when the Scale Set scales up (regardless of its current size). If a pending task with tags defined simply reuse existing instances without triggering a scale up, its configured tags will not be applied to the Scale Set.</p>
</div>
<div class="paragraph">
<p>Example Scenario:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The scale set is idle with zero instance</p>
</li>
<li>
<p>5 tasks with tags &lt;batch=batch1,step=step1&gt; are pending and trigger a scale up to 0&#8594;5 instances. The tags &lt;batch=batch1,step=step1&gt; will be applied to the Scale Set.</p>
</li>
<li>
<p>2 tasks terminate and release 2 instances. The Scale Set scales down 5&#8594;3, and still contains tags &lt;batch=batch1,step=step1&gt;.</p>
</li>
<li>
<p>3 tasks with tags &lt;batch=batch1,step=step2&gt; are pending and trigger a scale up 3&#8594;6. The tags &lt;batch=batch1,step=step2&gt; will be applied to the Scale Set. The new value for the tag 'step' will overwrite the previous value.</p>
</li>
<li>
<p>The 6 running tasks terminate and release 6 instances. The Scale Set scales down 6&#8594;0. All tags currently applied on the scale set are removed.</p>
</li>
<li>
<p>5 tasks with tags &lt;batch=batch2,step=step1&gt; are pending and trigger a scale up to 0&#8594;5 instances. The tags &lt;batch=batch2,step=step1&gt; will be applied to the Scale Set.</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration_5"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration_5"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration_5">Infrastructure Configuration</a></h5>
<div class="paragraph">
<p>The Azure Scale Set Infrastructure offers a wide range of possibilities to configure your Scale Set so that:</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>You have in your VMs everything you need to execute your jobs.</p>
</li>
<li>
<p>You can control your expenses by defining size and limits of your VMs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The available configuration parameters are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>azureCredentialFile:</strong> Use the provided file selection tool to supply a file with your Azure Credentials. These credentials correspond to those generated with the Service Principal as mentioned in the Pre-Requisites sub-section. The file should be a four-line text document in a <code>.ini</code> like format, and must include the following elements:</p>
<div class="literalblock">
<div class="content">
<pre>client=xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
key=xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
tenant=xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
subscription=xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>client</em>:</strong> Corresponds to the Service Principal <em>application ID</em>.</p>
</li>
<li>
<p><strong><em>key</em>:</strong> Corresponds to the <em>secret</em> value (password) of the Service Principal.</p>
</li>
<li>
<p><strong><em>tenant</em>:</strong> Corresponds to the Azure <em>domain</em>, <em>tenant ID</em>, or <em>directory ID</em> of your Active Directory.</p>
</li>
<li>
<p><strong><em>subscription</em>:</strong> Is the <em>ID</em> of your Azure subscription.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can opt to place this file in <code>$PROACTIVE_HOME/config/authentication/azure.creds</code> so that it will available and automatically loaded in case you want to have multiple Azure node sources.</p>
</div>
</li>
<li>
<p><strong>maxVms:</strong> Define the maximum number of VMs to be deployed by the scale set at any time. The number cannot exceed 100. The default value is <em>100</em>, so you might want to adjust this value according to your budget and expected processing peaks.</p>
</li>
<li>
<p><strong>maxNodesPerVm:</strong> Define the number of ProActive worker nodes to be deployed per VM. As a guideline, you might want to allocate one node per VM core, but you can set the number to better match your processing requirements. Default value is <em>2</em>.</p>
</li>
<li>
<p><strong>machineType:</strong> Define the type of Azure VM that you want to use for your Scale Set. You can use any size from Azure&#8217;s Standard Tier, provided you have enough quota and budget to launch them. The default value is <em>Standard_D1_v2</em>, you should provide a valid type using a similar syntax (case insensitive). Azure provides an extensive list of VM sizes for <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes">Linux</a> and <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sizes">Windows</a> VMs. If you want to know the available sizes for a specific region or subscription you can use <a href="https://docs.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-list-sizes">Azure CLI command</a> <code>az vm list-sizes -l {your location}</code>.</p>
</li>
<li>
<p><strong>osType:</strong> A choice between <em>linux</em> and <em>windows</em>. Default value is <em>linux</em>.</p>
</li>
<li>
<p><strong>Image:</strong> There are four possible ways to specify the source image for your Scale Set VMs: <em>known images</em>, Azure Marketplace, Shared Image Gallery and Custom images. We describe each of them below.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Syntax summary</strong></p>
<div class="ulist">
<ul>
<li>
<p>Known image: <code>MY_KNOWN_IMAGE</code></p>
</li>
<li>
<p>Marketplace: <code>marketplace#publisher:offer:sku[:version]</code></p>
</li>
<li>
<p>Shared Image Gallery: <code>gallery#resourceGroup:gallery:image[:version]</code></p>
<div class="ulist">
<ul>
<li>
<p>Shared Image Gallery from non-default subscription: <code>gallery#sub#subsriptionId:resourceGroup:gallery:image[:version]</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Custom image: <code>custom#resourceGroup:customImage</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><em>Known image.</em></strong> Refers to commonly used images as defined in Azure&#8217;s SDK. Accepted values are simple strings, as listed in the following table:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Linux <a href="https://github.com/Azure/azure-libraries-for-java/blob/master/azure-mgmt-compute/src/main/java/com/microsoft/azure/management/compute/KnownLinuxVirtualMachineImage.java">[link to source]</a></th>
<th class="tableblock halign-left valign-top">Windows <a href="https://github.com/Azure/azure-libraries-for-java/blob/master/azure-mgmt-compute/src/main/java/com/microsoft/azure/management/compute/KnownWindowsVirtualMachineImage.java">[link to source]</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UBUNTU_SERVER_14_04_LTS<br>
  UBUNTU_SERVER_16_04_LTS<br>
  UBUNTU_SERVER_18_04_LTS (<em>default value</em>)<br>
  DEBIAN_9<br>
  DEBIAN_10<br>
  CENTOS_8_1<br>
  OPENSUSE_LEAP_15_1<br>
  SLES_15_SP1<br>
  REDHAT_RHEL_8_2<br>
  ORACLE_LINUX_8_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WINDOWS_DESKTOP_10_20H1_PRO<br>
  WINDOWS_SERVER_2019_DATACENTER<br>
  WINDOWS_SERVER_2019_DATACENTER_WITH_CONTAINERS<br>
  WINDOWS_SERVER_2016_DATACENTER<br>
  WINDOWS_SERVER_2012_R2_DATACENTER</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Due to a recent change in Debian images that disables VM Extensions, Debian images (<em>DEBIAN_9</em>, <em>DEBIAN_10</em>) are not supported anymore.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><em>Azure Marketplace.</em></strong> If you want to choose a particular image from Azure&#8217;s Marketplace, use the prefix <code>marketplace#</code> plus the image&#8217;s <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/cli-ps-findimage">URN</a> in the form <code>publisher:offer:sku[:version]</code>. Similarly to Azure CLI or PowerShell, ProActive allows you to specify a version of the image (with <code>:version</code>), or it will use the latest one if the version is omitted. Examples of valid inputs are:<br>
<code>marketplace#OpenLogic:CentOS:7.5</code><br>
<code>marketplace#OpenLogic:CentOS:7.5:latest</code><br>
<code>marketplace#credativ:Debian:8:8.0.201901221</code></p>
</li>
<li>
<p><strong><em>Shared Image Gallery:</em></strong> The prefix <code>gallery#</code> allows you to use images from an existing Azure <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/shared-image-galleries">Shared Image Gallery</a>. Append the name of your Resource Group, your Gallery and your Image as <code>resourceGroup:gallery:image</code>. Optionally, you can specify a version too (<code>:version</code>); if no version is given, the latest image version will be used by ProActive. For example:<br>
<code>gallery#proactive-rg:activeeon-gallery:my-image</code><br>
<code>gallery#myRG:myGallery:myImage:1.0</code></p>
<div class="ulist">
<ul>
<li>
<p><strong><em>Shared Image Gallery from non-default subscription</em></strong> You can use images from an existing Azure <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/shared-image-galleries">Shared Image Gallery</a> by manually specifying the subscription.<br>
The prefix <code>sub#</code> should be added and the <em>subscriptionId</em> should be provided in the next format: <code>gallery#sub#subsriptionId:resourceGroup:gallery:image[:version]</code> <br>
The non-default subscription must be accessible with your Azure Credentials provided in the <strong>azureCredentialFile</strong> configuration.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><em>Custom Image:</em></strong> ProActive allows you to use a <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/tutorial-custom-images">custom image</a> to create Scale Sets. Use the prefix <code>custom#</code> followed by the resource group and the custom image name. For example:<br>
<code>custom#proactive-rg:custom-ubuntu</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>sshPublicKey:</strong> Optional parameter. In case of Linux, use it to provide a public RSA key to connect to your VMs via SSH. In case of Windows, use it to define a password to connect to your VMs via Remote Desktop. In both cases, the default user is <em>activeeon</em>. If the field is left blank a password will be automatically generated and written in the Scheduler log.</p>
</li>
<li>
<p><strong>targetNetwork:</strong> Optional parameter. Use it to define a specific Azure Virtual Network subnet for your Scale Set. If defined, the format should be <em>{resourceGroupName}:{network}:{subnet}</em>, e.g. <em>myGroup:myVNet:default</em>.
If left unset, a new Virtual Network and subnet will be created inside the Resource Group.</p>
</li>
<li>
<p><strong>restrictStorageAccountToNetwork:</strong> Optional parameter. If <em>true</em> and a <em>targetNetwork</em> is specified, the storage account created by the infrastructure will be restricted to the provided network. In that case, the ProActive server must be deployed inside the provided network, as otherwise access to the storage account from the server would not be possible. Additionally, <em>Microsoft.Storage</em> must be enabled in the Service Endpoints section of the subnet configuration. More information about Service Endpoints is available in the <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview">Azure Documentation</a>.</p>
</li>
<li>
<p><strong>azureRegion:</strong> Defines the Azure region where the Resource Group and the Scale Set will be created. For the list of the regions supported by your subscription, you can use the <a href="https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-list-locations">CLI command</a> <code>az account list-locations -o table</code>, the right name to use is the one in the column <em>name</em>. The region name should be in lowercase without spaces, e.g. for the region <em>West US 2</em> use <em>westus2</em>. Default value is <em>westeurope</em>.</p>
</li>
<li>
<p><strong>instancePriority:</strong> Defines the type of VM instances to be deployed for the Scale Set.
It can be set to:</p>
<div class="ulist">
<ul>
<li>
<p>Regular: Regular instances are standard virtual machines.</p>
</li>
<li>
<p>Spot: Spot instances have the lowest priority among the three options and offer significant cost savings. They are allocated from surplus capacity and can be preempted with little notice if the capacity is needed for regular or Low-priority instances.</p>
</li>
<li>
<p>Low: Low-priority instances have a higher priority than Spot instances. These instances are cheaper than Regular but more expensive than Spot instances.
Note that this is to be deprecated in September 30th 2025. Learn more with the <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/spot-vms">Azure Spot documentation</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>evictionPolicy:</strong> This parameter allows you to specify what action should be taken when an instance is reclaimed by Azure due to capacity constraints when the instancePriority is set to Spot or Low.
It can be set to:</p>
<div class="ulist">
<ul>
<li>
<p>Delete: When an instance is evicted, it is immediately deleted, and any workloads running on the instance are terminated.</p>
</li>
<li>
<p>Deallocate: When an instance is evicted, it is deallocated but not immediately deleted.
In both cases, ProActive will be able to automatically reschedule any workloads (Tasks) on other available Nodes provided by another Node Source, for instance another Azure Scale Set with regular instances.
 Learn more with the <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/spot-vms">Azure Spot documentation</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>maxPrice:</strong> Defines the maximum price in USD that you are willing to pay for Low or Spot virtual machines in the scale set. By providing the value of -1, the VM won&#8217;t be evicted for pricing reasons. The max price will be the current price, up to the price for standard VMs. You&#8217;ll never be charged above the standard price.</p>
</li>
<li>
<p><strong>resourceGroupExistingName:</strong>  Optional parameter. Defines the existing Resource Group name where only the Azure Scale Set and Storage Account should be created. This parameter should correspond to the existing Azure Resource Group in the specified <strong>azureRegion</strong>.<br>
The Resource Group will be created with the Node Source unique name if the parameter <strong>resourceGroupExistingName</strong> is unset.<br>
In case the parameter is set, several conditions have to be met:</p>
<div class="ulist">
<ul>
<li>
<p>the deployment Scale Set template (to be specified in <strong>armTemplateUrl</strong>) should contain only a creation of next Azure resources inside Resource Group: the Scale Set and the Storage Account (no Azure Load Balancer, IP address, etc.)</p>
</li>
<li>
<p>the target Azure Virtual Network should be provided by the user in the <strong>targetNetwork</strong> parameter.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>rmUrl:</strong> Optional parameter. Provide your server&#8217;s URL or public IP (e.g. try.activeeon.com). If left unset, the default Resource Manager URL will be fetched from the system properties.</p>
</li>
<li>
<p><strong>rmCredentials:</strong> Optional parameter. Provide credentials to connect to the Resource Manager. If left blank, the credentials of the logged user will be used.</p>
</li>
<li>
<p><strong>deploymentTimeout:</strong> Delay before the Resource Manager can declare a deploying node as lost. To be set in <em>minutes</em>. You can set it to a reasonable time after which you expect the node to be running or marked as lost otherwise (e.g. <em>10</em> minutes). Default value is <em>120</em>.</p>
</li>
<li>
<p><strong>cleaningDelay:</strong> Periodical cleaning delay, expressed in <em>seconds</em>. Every <em>X</em> seconds the Resource Manager will remove from the Scale Set any VM that has been identified as idle. Default value is <em>60</em>. Note that setting a very short interval implies more frequent communication between the Resource Manager and Azure, which might impact on performance or responsiveness.</p>
</li>
<li>
<p><strong>externalStorageAccount:</strong> Optional parameter. Use it if you want to define a specific location of your ProActive node.jar worker; leave blank otherwise. If provided, the format should be: <em>{storageAccount}:{sas_key_token}[:has_node.jar]</em>.</p>
</li>
<li>
<p><strong>linuxInternalCustomStartupScriptUrl:</strong> If you are using Linux, provide a URL of a valid Linux bash script to configure your nodes. Otherwise, the parameter can be left empty.  We strongly recommend to use one of our default scripts listed below. You are free to copy the script and add custom steps, but be aware that any modification to the default script might cause the deployment to fail. Our startup scripts cover the minimum requirements to start ProActive; additional script engines like R can be installed through a <em>userCustomStartupScriptUrl</em>, where you can also add your custom configuration steps.<br></p>
<div class="paragraph">
<p>Sample scripts (might require some customization for specific versions or OS):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Debian 8 - <code>apt</code> based script, uses <code>systemd</code> for launching the node service. Default value.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/1d4194fefff12cc9c5046c2455bd457b/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/1d4194fefff12cc9c5046c2455bd457b/raw</a></p>
</div>
</li>
<li>
<p>CentOS 7 - <code>yum</code> based script, uses <code>systemd</code> for launching the node service.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/c6f303c2c832fa40691874ef76484e92/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/c6f303c2c832fa40691874ef76484e92/raw</a></p>
</div>
</li>
<li>
<p>CentOS 6 - <code>yum</code> based script, uses <code>init.d</code> for launching the node service.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/7d1c10ede4599a78ce95e0c9201f9746/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/7d1c10ede4599a78ce95e0c9201f9746/raw</a></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>windowsInternalCustomStartupScriptUrl:</strong> If you are using Windows, provide a URL of a valid Windows PowerShell script to configure your nodes. Otherwise, the parameter can be left empty. We strongly recommend to our default script (see link below). You are free to copy the script and add custom steps, but be aware that any modification to the default script might cause the deployment to fail. Our startup scripts cover the minimum requirements to start ProActive; additional script engines like R can be installed through a <em>userCustomStartupScriptUrl</em>, where you can also add your custom configuration steps.</p>
<div class="ulist">
<ul>
<li>
<p>Windows script - PowerShell script, compatible with Windows Server 2012 or later.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/100ea57c89d6a0975f051a062187bf51/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/100ea57c89d6a0975f051a062187bf51/raw</a></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>userCustomStartupScriptUrl:</strong> Optional parameter. Use it to provide a URL of a valid custom script (<em>.sh</em> for Linux, <em>.ps1</em> for Windows) that will be called at the VMs' startup. The script is called after the default ProActive configuration and before the node application is actually executed. You can use this script, for instance, to create directories, assign permissions, or download utilities. As a reference, we provide some sample user scripts:</p>
<div class="ulist">
<ul>
<li>
<p>Debian: <code>apt</code> based script, includes installation of Python3, R, or SciLab.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/fe7c6a89e248f7363f02fa75a641dd39/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/fe7c6a89e248f7363f02fa75a641dd39/raw</a></p>
</div>
</li>
<li>
<p>CentOS: <code>yum</code> based script, includes installation of Python3 and R.</p>
<div class="paragraph">
<p><a href="https://gist.githubusercontent.com/activeeon-bot/94cc622e7640832682f172e23256cd3f/raw" class="bare">https://gist.githubusercontent.com/activeeon-bot/94cc622e7640832682f172e23256cd3f/raw</a></p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that this user custom script will be run as root/admin user.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>nodePreCommand:</strong> Optional parameter. This multi-line field can be used to provide specific commands to execute right before launching the ProActive&#8217;s node.jar application. The main difference with the previous user custom script is that <em>nodePreCommand</em> will be run as <em>the same</em> user as node.jar. This field is thus useful for operations that require matching users, e.g. mounting a shared volume in Windows or creating non-root paths/files in Linux. Please note the OS-specific conditions for these commands:</p>
<div class="ulist">
<ul>
<li>
<p><strong><em>Linux:</em></strong> The commands will be appended as <code>ExecStartPre</code> lines to a <em>.service</em> file. Therefore, commands should include their full path, e.g. <code>mkdir</code> should be written as <code>/bin/mkdir</code> or <code>chown</code> as <code>/bin/chown</code>.</p>
</li>
<li>
<p><strong><em>Windows:</em></strong> The commands will be included in a <em>.bat</em> batch file and must therefore be DOS-compatible. As a guideline, here is an unofficial <a href="https://www.robvanderwoude.com/batchcommands.php">list of DOS commands</a> and a <a href="http://steve-jansen.github.io/guides/windows-batch-scripting/part-1-getting-started.html">scripting tutorial</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>jvmParameters:</strong> Add JVM parameters to configure your ProActive node, use the format <em>-Dproperty=value</em>. The default values allow for a correct deployment of the node. You can add your own parameters but be aware that removing the current values might cause the deployment to fail. A non-exhaustive list of node-related JVM parameters can be found in your configuration file <code>$PROACTIVE_HOME/config/network/node.ini</code></p>
</li>
<li>
<p><strong>armTemplateUrl:</strong> Optional parameter, for advanced configuration only. This parameter is intended for users familiar with <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authoring-templates">Azure Resource Management templates</a> willing to provide a custom resource configuration file. You should input a URL with a valid <em>.json</em> ARM template. If set, this file will override <a href="https://gist.github.com/activeeon-bot/0ae94e182edfa6099314ad023d2d7bc4">ProActive&#8217;s default ARM file</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following fields are the optional parameters of the Azure Billing Configuration section. The aim of this section is to configure the automatic cloud cost estimator. It is done by considering all the Azure resources related to your reservation (virtual machines, disks,..). This mechanism relies on the Azure Resource Usage and RateCard APIs (<a href="https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/usage-rate-card-overview" class="bare">https://docs.microsoft.com/en-us/azure/cost-management-billing/manage/usage-rate-card-overview</a>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>enableBilling:</strong> Enable billing information (<em>true</em>/<em>false</em>). If <em>true</em>, the following parameters will be considered. The default value is <em>false</em>.</p>
</li>
<li>
<p><strong>resourceUsageRefreshFreqInMin:</strong> Periodical resource usage retrieving delay in min. The default value is <em>30</em>.</p>
</li>
<li>
<p><strong>rateCardRefreshFreqInMin:</strong> Periodical rate card retrieving delay in min. The default value is <em>30</em>.</p>
</li>
<li>
<p><strong>offerId:</strong> The Offer ID parameter consists of the "MS-AZR-" prefix, plus the Offer ID number. The default value is <em>MS-AZR-0003p</em> (Pay-As-You-Go offer).</p>
</li>
<li>
<p><strong>currency:</strong> The currency in which the resource rates need to be provided. The default value is <em>USD</em>.</p>
</li>
<li>
<p><strong>locale:</strong> The culture in which the resource metadata needs to be localized. The default value is <em>en-US</em>.</p>
</li>
<li>
<p><strong>regionInfo:</strong> The 2 letter ISO code where the offer was purchased. The default value is <em>US</em>.</p>
</li>
<li>
<p><strong>maxBudget:</strong> Your max budget for the Azure resources related to the node source. Also used to compute your global cost in % of your budget. The default value is <em>50</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you can see, these parameters provide a lot of flexibility to configure your infrastructure. When creating your Azure Scale Set node source, the infrastructure should be coupled with a Dynamic Policy. This Policy will additionally define scalability parameters such as limits on the number of deployed nodes or the minimum idle time before a node can be deleted (to optimize node utilization).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kubernetes_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_kubernetes_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_kubernetes_infrastructure">6.4.13. Kubernetes Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.KubernetesInfrastructure</code></p>
</div>
<div class="paragraph">
<p>The Kubernetes allows to deploy ProActive Nodes on a <a href="https://kubernetes.io/">Kubernetes cluster</a>. This infrastructure aims at creating kubernetes pods containing ProActive Nodes. Each ProActive Node pod will connect and register inside the ProActive Resource Manager.</p>
</div>
<div class="paragraph">
<p>Interactions between the ProActive Resource Manager and the Kubernetes cluster is based on the Kubernetes Java SDK. Accordingly, it is not mandatory to install the Kubernetes command line on the ProActive server machine.</p>
</div>
<div class="sect4">
<h5 id="_pre_requisites_6"><a class="anchor" href="ProActiveAdminGuide.html#_pre_requisites_6"></a><a class="link" href="ProActiveAdminGuide.html#_pre_requisites_6">Pre-Requisites</a></h5>
<div class="ulist">
<ul>
<li>
<p>A Kubernetes cluster must be <strong>accessible</strong> from the ProActive server.</p>
</li>
<li>
<p>A <strong>Kubernetes configuration file</strong> with server url, credentials and other appropriate settings.</p>
</li>
<li>
<p>A <strong>Docker image</strong> which contains <strong>Java Runtime Environment version 8</strong> (earlier and later versions are currently not supported). This image will be used to start ProActive Nodes.</p>
</li>
<li>
<p>ProActive server started with the <a href="https://trydev2.activeeon.com/doc/admin/ProActiveAdminGuide.html.html#_proactive_message_routing">ProActive Message Routing</a> protocol.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_configuration_6"><a class="anchor" href="ProActiveAdminGuide.html#_infrastructure_configuration_6"></a><a class="link" href="ProActiveAdminGuide.html#_infrastructure_configuration_6">Infrastructure Configuration</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>kubeConfigFile:</strong>  Use the provided file selection tool to supply a file with your Kubernetes configuration and credentials.</p>
<div class="paragraph">
<p>Example configuration file:</p>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: v1
clusters:
- cluster:
    server: https://192.168.99.102:8443
    certificate-authority-data: LS0tLS1CRUdJTiBDRV...
  name: minikube
contexts:
- context:
    cluster: minikube
    user: minikube
  name: minikube
current-context: minikube
kind: Config
preferences: {}
users:
- name: minikube
  user:
    client-certificate-data: LS0tLS1CRUdJTiBDRV...
    client-key-data: LS0tLS1CRUdJTiBSU0E...</pre>
</div>
</div>
<div class="paragraph">
<p>It is advised to embed credentials and certificates in the configuation file, instead of pointing to files on the local file system.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>kubernetesNamespace:</strong> (Optional) Kubernetes namespace if different from <em>default</em> namespace.</p>
</li>
<li>
<p><strong>cleaningDelaySeconds:</strong> (Optional) Cleaning delay, in seconds until cleaning service starts. Default value is 120 seconds.</p>
</li>
<li>
<p><strong>cleaningFrequencySeconds:</strong> (Optional) Cleaning frequency, Kubernetes node cleaning is done every x seconds. Default value is 30 seconds.</p>
</li>
<li>
<p><strong>scale:</strong> Number of pods (ProActive Nodes) to create. This parameter is used when the <a href="https://trydev2.activeeon.com/doc/admin/ProActiveAdminGuide.html.html#_node_source_policies">Node Source Policy</a> is not a <a href="https://trydev2.activeeon.com/doc/admin/ProActiveAdminGuide.html.html#_dynamic_policy">Dynamic Policy</a>.</p>
</li>
<li>
<p><strong>image:</strong> (Optional) Docker image used to deploy ProActive Nodes. When it is not set, its default value <code>adoptopenjdk/openjdk8:latest</code> is used.</p>
</li>
<li>
<p><strong>nodeDeploymentTemplateFile:</strong> (Optional) Kubernetes deployment template file for deploying ProActive node pods. This template file informs Kubernetes about the environment needed to run ProActive nodes. Each node uses this template file to create its specific Kubernetes deployment environment.
The default Kubernetes template file creates an environment (i.e., a pod) where both a ProActive node and a Docker engine are started. This way, the tasks executed by the ProActive node can also run Docker commands. Such an environment is supported through a Docker-in-Docker approach (i.e., running a Docker daemon inside the Kubernetes host container system). Specifically, this environment consists of one pod with two containers (proactive-node and proactive-docker-daemon).
The template file can use the following macros, which will be interpreted and filled with the corresponding parameter values by Kubernetes Infrastructure later.</p>
<div class="ulist">
<ul>
<li>
<p><code>${STARTUP_SCRIPT}</code>: the value of the infrastructure parameter startupScript</p>
</li>
<li>
<p><code>${DOCKER_IMAGE}</code>: the value of the infrastructure parameter image</p>
</li>
<li>
<p><code>${NODE_NAME_LOWER_CASE}</code>: the lower case format of the expected ProActive node name which is a random string generated by the Kubernetes infrastructure</p>
</li>
<li>
<p><code>${NODE_SOURCE_NAME_LOWER_CASE}</code>: the lower case format of the node source name</p>
</li>
<li>
<p><code>${DEPLOYMENT_NAME}</code>: the generated Kubernetes deployment name which is unique for each ProActive Node</p>
</li>
<li>
<p><code>${KUBERNETES_NAMESPACE}</code>: the value of the infrastructure parameter kubernetesNamespace</p>
<div class="paragraph">
<p>Default nodeDeploymentTemplateFile:</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  labels:
    pa-node-name: ${NODE_NAME_LOWER_CASE}
    pa-node-source-name: ${NODE_SOURCE_NAME_LOWER_CASE}
  name: ${DEPLOYMENT_NAME}  # must be unique
  namespace: ${KUBERNETES_NAMESPACE}
spec:
  progressDeadlineSeconds: 2147483647
  replicas: 1
  revisionHistoryLimit: 2147483647
  selector:
    matchLabels:
      pa-node-name: ${NODE_NAME_LOWER_CASE}  # Label key and value are important so that the cleaning procedure finds this deployment
      pa-node-source-name: ${NODE_SOURCE_NAME_LOWER_CASE} # Label key and value are important so that the cleaning procedure finds this deployment
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        pa-node-name: ${NODE_NAME_LOWER_CASE}
        pa-node-source-name: ${NODE_SOURCE_NAME_LOWER_CASE}
    spec:
      containers:
        - name: proactive-node
          args:
            - -c
            - ${STARTUP_SCRIPT}
          command:
            - /bin/sh
          image: ${DOCKER_IMAGE}
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 64738 # PNP
              protocol: TCP
            - containerPort: 64739 # PNPS
              protocol: TCP
            - containerPort: 33647 # PAMR
              protocol: TCP
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          env:
            - name: DOCKER_HOST
              value: tcp://localhost:2375
          volumeMounts:
            - name: pa-node-data
              mountPath: /tmp
        - name: proactive-docker-daemon
          image: docker:1.12.6-dind
          resources:
              requests:
                  cpu: 20m
                  memory: 512Mi
          securityContext:
              privileged: true
          volumeMounts:
            - name: pa-node-data
              mountPath: /tmp
      volumes:
        - name: pa-node-data
          emptyDir: {}
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      terminationGracePeriodSeconds: 30</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>rmHostname:</strong> The hostname or the public IP address of the host operating the Resource Manager. This address needs to be accessible from the Kubernetes server. For example, <code>try.activeeon.com</code>.</p>
</li>
<li>
<p><strong>nodeJarURL:</strong> The full URL path of the node.jar to download the ProActive node.jar on each new created pod. The URL needs to be accessible from the Kubernetes pods. For example, <code>try.activeeon.com/rest/node.jar</code>.</p>
</li>
<li>
<p><strong>jvmProperties:</strong> Java options appended to the command used to start the node on the remote host. As the <a href="https://trydev2.activeeon.com/doc/admin/ProActiveAdminGuide.html.html#_proactive_message_routing">ProActive Message Routing</a> is required by the Kubernetes Infrastructure, PAMR properties must be defined.</p>
<div class="paragraph">
<p>Example:</p>
</div>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>-Dproactive.communication.protocol=pamr -Dproactive.useIPaddress=true -Dproactive.pamr.router.address=try.activeeon.com</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>startupScript:</strong> VM startup script to launch the ProActive nodes. To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment if it is not already installed in the specified image, then download and and execute ProActive node.jar. The script can use <a href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">some arguments</a>. For example, it can use <code>%nodeJarUrl%</code> to represent the full URL path for downloading the <em>node.jar</em> file. These arguments will be interpreted by Kubernetes Infrastructure later. This is an optional property. If left blank, a default script is automatically generated for the Linux OS.</p>
<div class="paragraph">
<p>Default startupScript:</p>
</div>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! command -v wget; then apt-get update; apt-get -y install wget; fi
wget -nv --no-check-certificate %nodeJarUrl%
if ! command -v java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; export PATH=/tmp/node/jre1.8.0_382b05/bin/:$PATH; fi
java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties%</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>nodeTimeout:</strong> (Optional) The estimated startup time of the nodes (expressed in millisecond). After this timeout, the node will be considered as lost. Default value is 10 minutes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_load_sharing_facility_lsf_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_load_sharing_facility_lsf_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_load_sharing_facility_lsf_infrastructure">6.4.14. Load Sharing Facility (LSF) Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.LSFInfrastructure</code></p>
</div>
<div class="paragraph">
<p>This infrastructure knows how to acquire nodes from LSF by submitting a
corresponding job. It will be submitted through SSH from the RM to the
LSF server. This is the static version of the LSF infrastructure, for a more dynamic mechanism, as described in <a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a>, use the <a href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">Native Scheduler Infrastructure</a> instead.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns lsf -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.LSFInfrastructure javaPath SSHOptions schedulingPath javaOptions maxNodes nodeTimeout LSFServer RMCredentialsPath bsubOptions</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>javaPath</strong> - path to the java executable on the remote hosts (ie
the LSF slaves).</p>
</li>
<li>
<p><strong>sshOptions</strong> - Options you can pass to the SSHClient executable (
-l inria to specify the user for instance )</p>
</li>
<li>
<p><strong>schedulingPath</strong> - path to the Scheduling/RM installation
directory on the remote hosts.</p>
</li>
<li>
<p><strong>javaOptions</strong> - Java options appended to the command used to start
the node on the remote host.</p>
</li>
<li>
<p><strong>maxNodes</strong> - maximum number of nodes this infrastructure can
simultaneously hold from the LSF server. That is useful considering
that LSF does not provide a mechanism to evaluate the number of
currently available or idle cores on the cluster. This can result to
asking more resources than physically available, and waiting for the
resources to come up for a very long time as the request would be
queued until satisfiable.</p>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>serverName</strong> - URL of the LSF server, which is responsible for
acquiring LSF nodes. This server will be contacted by the Resource
Manager through an SSH connection.</p>
</li>
<li>
<p><strong>rmCredentialsPath</strong> - Encrypted credentials file, as created by
the create-cred[.bat] utility. These credentials will be used by the
nodes to authenticate on the Resource Manager.</p>
</li>
<li>
<p><strong>submitJobOpt</strong> - Options for the bsub command client when
acquiring nodes on the LSF master. Default value should be enough in
most cases, if not, refer to the documentation of the LSF cluster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_portable_batch_system_pbs_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_portable_batch_system_pbs_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_portable_batch_system_pbs_infrastructure">6.4.15. Portable Batch System (PBS) Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.PBSInfrastructure</code></p>
</div>
<div class="paragraph">
<p>This infrastructure knows how to acquire nodes from PBS (i.e. Torque) by
submitting a corresponding job. It will be submitted through SSH from
the RM to the PBS server. This is the static version of the PBS infrastructure, for a more dynamic mechanism, as described in <a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a>, use the <a href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">Native Scheduler Infrastructure</a> instead.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns pbs -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.PBSInfrastructure javaPath SSHOptions schedulingPath javaOptions maxNodes nodeTimeout PBSServer RMCredentialsPath qsubOptions</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>javaPath</strong> - path to the java executable on the remote hosts (ie
the PBS slaves).</p>
</li>
<li>
<p><strong>sshOptions</strong> - Options you can pass to the SSHClient executable (
-l inria to specify the user for instance )</p>
</li>
<li>
<p><strong>schedulingPath</strong> - path to the Scheduling/RM installation
directory on the remote hosts.</p>
</li>
<li>
<p><strong>javaOptions</strong> - Java options appended to the command used to start
the node on the remote host.</p>
</li>
<li>
<p><strong>maxNodes</strong> - maximum number of nodes this infrastructure can
simultaneously hold from the PBS server. That is useful considering
that PBS does not provide a mechanism to evaluate the number of
currently available or idle cores on the cluster. This can result to
asking more resources than physically available, and waiting for the
resources to come up for a very long time as the request would be
queued until satisfiable.</p>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>serverName</strong> - URL of the PBS server, which is responsible for
acquiring PBS nodes. This server will be contacted by the Resource
Manager through an SSH connection.</p>
</li>
<li>
<p><strong>rmCredentialsPath</strong> - Encrypted credentials file, as created by
the create-cred[.bat] utility. These credentials will be used by the
nodes to authenticate on the Resource Manager.</p>
</li>
<li>
<p><strong>submitJobOpt</strong> - Options for the qsub command client when
acquiring nodes on the PBS master. Default value should be enough in
most cases, if not, refer to the documentation of the PBS cluster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_generic_batch_job_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_generic_batch_job_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_generic_batch_job_infrastructure">6.4.16. Generic Batch Job Infrastructure</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.infrastructure.GenericBatchJobInfrastructure</code></p>
</div>
<div class="paragraph">
<p><strong>Generic Batch Job infrastructure</strong> provides users with the capability to
add the support of new batch job scheduler by providing a class
extending
org.ow2.proactive.resourcemanager.nodesource.infrastructure.BatchJobInfrastructure.</p>
</div>
<div class="paragraph">
<p>This is the static version of the Generic Batch Job infrastructure, for a more dynamic mechanism, as described in <a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a>, use the <a href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">Native Scheduler Infrastructure</a> instead (generic also).</p>
</div>
<div class="paragraph">
<p>Once you have written the implementation of the desired class, you can create a node source
which makes usage of this infrastructure by running the following
command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client --createns pbs -infrastructure org.ow2.proactive.resourcemanager.nodesource.infrastructure.GenericBatchJobInfrastructure javaPath SSHOptions schedulingPath javaOptions maxNodes nodeTimeout BatchJobServer RMCredentialsPath subOptions implementationClassName implementationFile</pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>RMURL</strong> - URL of the Resource Manager from the batch job scheduler
nodes point of view - this is the URL the nodes will try to lookup
when attempting to register to the RM after their creation.</p>
</li>
<li>
<p><strong>javaPath</strong> - path to the java executable on the remote hosts (ie
the slaves of the batch job scheduler).</p>
</li>
<li>
<p><strong>sshOptions</strong> - Options you can pass to the SSHClient executable (
-l inria to specify the user for instance )</p>
</li>
<li>
<p><strong>schedulingPath</strong> - path to the Scheduling/RM installation
directory on the remote hosts.</p>
</li>
<li>
<p><strong>javaOptions</strong> - Java options appended to the command used to start
the node on the remote host.</p>
</li>
<li>
<p><strong>maxNodes</strong> - maximum number of nodes this infrastructure can
simultaneously hold from the batch job scheduler server.</p>
</li>
<li>
<p><strong>nodeTimeOut</strong> - The estimated startup time of the nodes (expressed in millisecond). After this timeout expired, the node will be considered as lost.</p>
</li>
<li>
<p><strong>serverName</strong> - URL of the batch job scheduler server, which is
responsible for acquiring nodes. This server will be contacted by
the Resource Manager through an SSH connection.</p>
</li>
<li>
<p><strong>rmCredentialsPath</strong> - Encrypted credentials file, as created by
the create-cred[.bat] utility. These credentials will be used by the
nodes to authenticate on the Resource Manager.</p>
</li>
<li>
<p><strong>submitJobOpt</strong> - Options for the submit command client when
acquiring nodes on the batch job scheduler master.</p>
</li>
<li>
<p><strong>implementationClassName</strong> - Fully qualified name of the implementation
of
org.ow2.proactive.resourcemanager.nodesource.infrastructure.BatchJobInfrastructure
provided by the end user.</p>
</li>
<li>
<p><strong>implementationFile</strong> - The absolute path of the implementation of
org.ow2.proactive.resourcemanager.nodesource.infrastructure.BatchJobInfrastructure.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_native_scheduler_infrastructure"><a class="anchor" href="ProActiveAdminGuide.html#_native_scheduler_infrastructure"></a><a class="link" href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">6.4.17. Native Scheduler Infrastructure</a></h4>
<div class="paragraph">
<p>The Native Scheduler Infrastructure allows to interact with a <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a> to deploy ProActive Nodes.
This mechanism is described in <a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a>. This infrastructure must be associated with a <a href="ProActiveAdminGuide.html#_native_scheduler_policy">Native Scheduler Policy</a> and cannot be associated with any other policy.
The infrastructure parameters are described hereafter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>RMCredentialsPath:</strong> path to a file which contains the credentials of an administrator user which will own the node source. The ProActive Scheduler Server release contains two admin users credentials files: <code>config/authentication/rm.cred</code> and <code>config/authentication/admin_user.cred</code></p>
</li>
<li>
<p><strong>NSFrontalHostAddress:</strong> the host name or IP address of the cluster <a href="ProActiveAdminGuide.html#_glossary_head_node">head node</a>.</p>
</li>
<li>
<p><strong>NSSchedulerHome:</strong> the location of the shared ProActive installation on <a href="ProActiveAdminGuide.html#_glossary_ns_node">cluster nodes</a> (cluster nodes must be able to access ProActive libraries in order to start ProActive Node). Example <code>/opt/proactive/activeeon_enterprise-node-linux-x64-8.1.0</code>.</p>
</li>
<li>
<p><strong>javaHome:</strong> similarly, cluster nodes must be able to access the java command in order to start ProActive Nodes. ProActive installation includes a Java Runtime Environment under the <code>jre</code> subfolder. Example: <code>/opt/proactive/activeeon_enterprise-node-linux-x64-8.1.0/jre</code>.</p>
</li>
<li>
<p><strong>jvmParameters:</strong> additional options which can be passed to the java command.</p>
</li>
<li>
<p><strong>sshOptions:</strong> additional options which can be passed to the SSH command used to connect to connect to the host name or IP address specified in the NSFrontalHostAddress parameter.</p>
</li>
<li>
<p><strong>NSNodeTimeoutInSeconds:</strong> timeout to wait for the deployment of ProActive Nodes on the cluster. As the time needed to deploy ProActive Nodes depends on the cluster load, this timeout should be a large value. If the timeout is reached, the ProActive Nodes will be in <code>"Lost"</code> <a href="ProActiveAdminGuide.html#_node_states">state</a>.</p>
</li>
<li>
<p><strong>ìmpersonationMethod:</strong> when a job is submitted to the native scheduler, the submission is performed under the current <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler_user">ProActive Scheduler user</a>. An impersonation is thus performed between the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler_process_user">scheduler server process</a> and the target <a href="ProActiveAdminGuide.html#_glossary_cluster_user">cluster user</a>.
This impersonation can be performed using 3 different strategies:</p>
<div class="ulist">
<ul>
<li>
<p><code>ssh</code>: in that case the <a href="ProActiveAdminGuide.html#_glossary_head_node">head node</a> is contacted using a SSH command with the current <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler_user">ProActive Scheduler user</a> and password. User/password combination between the ProActive Scheduler and the head node operating system must match.</p>
</li>
<li>
<p><code>none</code>: in that case the head node is contacted using a SSH command with the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler_process_user">ProActive Scheduler process user</a> (passwordless SSH). Submission to the native scheduler will be performed with the same account.</p>
</li>
<li>
<p><code>sudo</code>: similar to <code>none</code> regarding the connection to the head node, but a <code>sudo</code> command will be initiated to impersonate as the current <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler_user">ProActive Scheduler user</a>, before doing a job submission.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>alternateRMUrl:</strong> the URL used by the ProActive Nodes to contact <a href="ProActiveAdminGuide.html#_glossary_resource_manager">ProActive Resource Manager</a>. This URL is displayed on ProActive server startup. Example: <code>pnp://myserver:64738</code>.</p>
</li>
<li>
<p><strong>sshPort:</strong> port used for SSH connections.</p>
</li>
<li>
<p><strong>nsPreCommand:</strong> a Linux command which can be run before launching ProActive Nodes on the cluster. Can be used as a workaround when some system environment variables are not properly set when starting ProActive Nodes.</p>
</li>
<li>
<p><strong>nsSubmitCommand:</strong> this is the main command used to start ProActive Nodes on the cluster. Depending on the actual native scheduler implementation, <strong>nsSubmitCommand</strong> will vary, here are examples definitions:<br></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PBS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>qsub -N %NS_JOBNAME% -o %LOG_FILE% -j oe %NS_BATCH%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLURM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sbatch -J %NS_JOBNAME% -o %LOG_FILE% %NS_BATCH%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bsub -J %NS_JOBNAME% -o %LOG_FILE% -e %LOG_FILE% %NS_BATCH%</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The command can use patterns which will be replaced dynamically by the ProActive Resource Manager.<br></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%NS_JOBNAME%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains a configurable job name dynamically created by the resource manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%LOG_FILE%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains a log file path dynamically created by the resource manager and located in side the NSSchedulerHome installation. This log file is useful to debug errors during <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_job">cluster job</a> submission.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%PA_USERNAME%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the current ProActive Scheduler user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%NS_BATCH%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the arguments defined inside workflow tasks using the NS_BATCH generic information.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>nsKillCommand:</strong> this is the command used to kill ProActive Nodes started previously by the nsSubmitCommand. Similarly to nsSubmitCommand, <strong>nsKillCommand</strong> will vary for each native scheduler syntax:<br></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PBS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>qdel %NS_JOBID%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SLURM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scancel -n %NS_JOBNAME%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LSF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bkill -J %NS_JOBNAME%</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It can use the following patterns:<br></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%NS_JOBNAME%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains a configurable job name dynamically created by the resource manager.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%NS_JOBID%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the job id returned by the native scheduler when submitting the job. Currently, job id can only be used with PBS, when the setting <code>submitReturnsJobId</code> is set to <code>true</code>.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>submitReturnsJobId:</strong> is the <a href="ProActiveAdminGuide.html#_glossary_ns_cluster_jobid">cluster job id</a> returned plainly when calling the nsSubmitCommand. This is the behavior of PBS, and this is why this setting should be set to <code>true</code> when using PBS.</p>
</li>
<li>
<p><strong>nsJobName:</strong> a way to configure the <code>%NS_JOBNAME%</code> pattern. The following patterns can be used:<br></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%PA_TASKID%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the ProActive Task and Job ID associated with the node request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%PA_USERNAME%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the current ProActive Scheduler user.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>maxDeploymentFailure:</strong> number of attempts when starting a ProActive Node on the cluster using the nsSubmitCommand, after all attempts failed, the ProActive Node will be declared as <code>Lost</code>.</p>
</li>
<li>
<p><strong>singleConnectionUserName:</strong> user name for single SSH connection configuration. Single SSH connection credentials can be used when setting impersonation method to <em>sudo</em> or <em>none</em>. It must be used also when enabling the native scheduler metrics acquisition (see below).</p>
</li>
<li>
<p><strong>singleConnectionPassword:</strong> password for single SSH connection configuration. Single SSH connection credentials can be used when setting impersonation method to <em>sudo</em> or <em>none</em>. It must be used also when enabling the native scheduler metrics acquisition (see below).</p>
</li>
<li>
<p><strong>singleConnectionPrivateKey:</strong> private key for single SSH connection configuration. Single SSH connection credentials can be used when setting impersonation method to <em>sudo</em> or <em>none</em>. It must be used also when enabling the native scheduler metrics acquisition (see below).</p>
</li>
<li>
<p><strong>impersonationCommand:</strong> command to use when impersonation method is <em>sudo</em>.  The following patterns can be used:<br></p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%COMMAND%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the command to impersonate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%PA_USERNAME%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains the current ProActive Scheduler user.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>nativeSchedulerMetricsCommandFile:</strong> Native scheduler metrics are displayed on the Resource Manager portal when selecting the node source. In order to enable metrics display, the single SSH connection settings and the two metrics parameters must be defined. <code>nativeSchedulerMetricsCommandFile</code> contains a list of commands which will gather metrics. The file structure is as follows:</p>
<div class="ulist">
<ul>
<li>
<p>each metric must be a single line command</p>
</li>
<li>
<p>each command must be preceded by a comment line <code>#</code> containing the category and metric title separated by <code>|</code>.
+ Example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># PBS Metrics | Jobs
qstat</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>nativeSchedulerMetricsPeriod:</strong> Refresh period in seconds of native scheduler metrics. In order to enable metrics display, a value greater than zero must be defined. Default to <code>-1</code> (disabled)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_control_the_resource_usage"><a class="anchor" href="ProActiveAdminGuide.html#_control_the_resource_usage"></a><a class="link" href="ProActiveAdminGuide.html#_control_the_resource_usage">7. Control the resource usage</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_node_source_policies"><a class="anchor" href="ProActiveAdminGuide.html#_node_source_policies"></a><a class="link" href="ProActiveAdminGuide.html#_node_source_policies">7.1. Node Source Policies</a></h3>
<div class="paragraph">
<p>You can limit the utilization of resources connected to the ProActive Scheduler in different ways. When you create node
sources you can use a <strong>Node Source Policy</strong>. A node source policy is a set of rules and conditions which describes, inside a <a href="ProActiveAdminGuide.html#_deploy_nodes_from_proactive_rm"><strong>Node Source</strong></a>, when and how many nodes have to be acquired or released.</p>
</div>
<div class="paragraph">
<p>When creating a node source, a <a href="ProActiveAdminGuide.html#_node_source_infrastructures"><strong>Node Source Infrastructure</strong></a> and a Node Source Policy must be chosen.
Node Sources can be created using the Resource Manager portal or the command line (see <a href="ProActiveAdminGuide.html#_command_line_examples">Command Line Examples</a> for more information).</p>
</div>
<div class="paragraph">
<p>The Node Source Policy interacts internally with the associated <a href="ProActiveAdminGuide.html#_node_source_infrastructures"><strong>Node Source Infrastructure</strong></a> to request new nodes deployments or nodes removal.</p>
</div>
<div class="paragraph">
<p>Node Sources were designed in a way that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All logic related to node acquisition is encapsulated in the <strong>Infrastructure Manager</strong>.</p>
</li>
<li>
<p>Conditions and rules of node acquisition is described in the <strong>Node Source Policy</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the ProActive Resource Manager, there is always a default node source configured with a <strong>DefaultInfrastructureManager</strong> and a <strong>Static policy</strong>.
It is not able to deploy nodes anywhere but makes it possible to add existing nodes to the Scheduler (see <a href="ProActiveAdminGuide.html#run_node_manually">Deploy ProActive Nodes manually</a>)</p>
</div>
<div class="paragraph">
<p>Out of the box the Scheduler supports time slot policies, cron policies, load based policies and many others.
Please see detailed information about policies in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_policy_common_parameters"><a class="anchor" href="ProActiveAdminGuide.html#_policy_common_parameters"></a><a class="link" href="ProActiveAdminGuide.html#_policy_common_parameters">7.1.1. Common Parameters</a></h4>
<div class="paragraph">
<p>Each node source policy regardless its specifics has a common part where you describe users, groups or tenants permissions.
When you create a policy you must specify them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>nodeUsers</strong> - utilization permission that defines who can get nodes for computations from this node source. It has to take one of the following values:</p>
<div class="ulist">
<ul>
<li>
<p><code>ME</code> - only the node source creator</p>
</li>
<li>
<p><code>users=user1,user2;groups=group1,group2;tenants=tenant1,tenant2;tokens=t1,t2</code> - only specific users, groups, tenants or tokens. For example:</p>
<div class="ulist">
<ul>
<li>
<p>users=user1 - node access is limited to user1</p>
</li>
<li>
<p>tenants=tenant1 - node access is limited to users belonging to tenant1</p>
</li>
<li>
<p>users=user1;groups=group1 - node access is limited to user1 and all users from group group1</p>
</li>
<li>
<p>users=user1;tokens=t1 - node access is limited to user1 or anyone who specified token t1. If node access is protected by a token, node will not be found by the ProActive Resource Manager when trying to execute workflows, unless the corresponding token is specified inside the workflow(s).
To exclude specific users or groups use for example:</p>
</li>
<li>
<p>users=!user1,!user2;groups=!group1,!group2. Tokens can not be excluded, and mixing inclusion with exclusion is not permitted (i.e. users=user1,!user2;groups=!group1,group2).</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ALL</code> - everybody can use nodes from this node source</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To specify a token inside a chosen workflow, add the key/value pair <strong>NODE_ACCESS_TOKEN:&lt;token&gt;</strong> to its generic information.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>nodeProviders</strong> - provider permission defines who can add nodes to this node source. It should take one of the following values:</p>
<div class="ulist">
<ul>
<li>
<p><code>ME</code> - pnly the node source creator</p>
</li>
<li>
<p><code>users=user1,user2;groups=group1,group2;tenants=tenant1,tenant2</code> - only specific users, groups or tenants (for our example user1, user2, group1, group2, tenant1 or tenant2). It is also possible to specify only groups, only users or only tenants.</p>
</li>
<li>
<p><code>ALL</code> - everybody can add nodes to this node source</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The user who created the node source is the administrator of this node source. He can add and removed nodes to it, remove the node source itself,
but cannot use nodes if usage policy is set to <strong>PROVIDER</strong> or <strong>PROVIDER_GROUPS</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Node source policy user restrictions are not enforced for members of the <span class="underline">deprecated</span> <code>admin</code> group, they will have no effect on such users (see <a href="ProActiveAdminGuide.html#_user_permissions">User Permissions</a>).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
New Node Source policies can be dynamically plugged into the Resource Manager. In order to do that, it is required to add classes extending the <a href="../javadoc/org/ow2/proactive/resourcemanager/nodesource/policy/NodeSourcePolicy.html">NodeSourcePolicy class</a> in the server class path and update the policy implementation list in the configuration file (PROACTIVE_HOME/config/rm/nodesource/policies).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_static_policy"><a class="anchor" href="ProActiveAdminGuide.html#_static_policy"></a><a class="link" href="ProActiveAdminGuide.html#_static_policy">7.1.2. Static Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.StaticPolicy</code></p>
</div>
<div class="paragraph">
<p><strong>Static node source policy</strong> starts node acquisition when nodes are added
to the node source and never removes them. Nevertheless, nodes can be
removed by user request. To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_restart_down_node_policy"><a class="anchor" href="ProActiveAdminGuide.html#_restart_down_node_policy"></a><a class="link" href="ProActiveAdminGuide.html#_restart_down_node_policy">7.1.3. Restart Down Node Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.RestartDownNodePolicy</code></p>
</div>
<div class="paragraph">
<p><strong>Restart down node policy</strong> automatically redeploy nodes when they are disconnected from the Resource Manager (for example after a network failure or a machine reboot).
To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>checkNodeStateEach</strong> - interval in milliseconds used to check nodes availability. For example, if this interval is set to 30 minutes the policy will redeploy nodes after a disconnection of 30 minutes.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_time_slot_policy"><a class="anchor" href="ProActiveAdminGuide.html#_time_slot_policy"></a><a class="link" href="ProActiveAdminGuide.html#_time_slot_policy">7.1.4. Time Slot Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.TimeSlotPolicy</code></p>
</div>
<div class="paragraph">
<p><strong>Time slot policy</strong> is aimed to acquire nodes for a specific time window with an
ability to do it periodically. To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>acquireTime</strong> - Absolute acquire date (e.g. "6/3/10 1:18:45 PM
CEST").</p>
</li>
<li>
<p><strong>releaseTime</strong> - Absolute releasing date (e.g. "6/3/10 2:18:45 PM
CEST").</p>
</li>
<li>
<p><strong>period</strong> - Period time in millisecond (default is 86400000).</p>
</li>
<li>
<p><strong>preemptive</strong> - Preemptive parameter indicates the way of releasing
nodes. If it is true, nodes will be released without waiting the end
of jobs running on (default is false).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cron_policy"><a class="anchor" href="ProActiveAdminGuide.html#_cron_policy"></a><a class="link" href="ProActiveAdminGuide.html#_cron_policy">7.1.5. Cron Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.CronPolicy</code></p>
</div>
<div class="paragraph">
<p><strong>Cron policy</strong> is aimed to acquire and remove nodes at a specific time
defined in the cron syntax. To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>nodeAcquision</strong> - The time policy will trigger the deployment of
all nodes (e.g. "0 12 \* \* \*" every day at 12.00).</p>
</li>
<li>
<p><strong>nodeRemoval</strong> - The time policy will trigger the removal of all
nodes (e.g. "0 13 \* \* \*" every day at 13.00).</p>
</li>
<li>
<p><strong>preemptive</strong> - Preemptive parameter indicates the way of releasing
nodes. If it is true, nodes will be released without waiting the end
of jobs running on (default is false).</p>
</li>
<li>
<p><strong>forceDeployment</strong> - If for the example above (the deployment
starts every day at 12.00 and the removal starts at 13.00) you are
creating the node source at 12.30 the next deployment will take
place the next day. If you&#8217;d like to force the immediate deployment
set this parameter to true.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_release_resources_when_scheduler_is_idle"><a class="anchor" href="ProActiveAdminGuide.html#_release_resources_when_scheduler_is_idle"></a><a class="link" href="ProActiveAdminGuide.html#_release_resources_when_scheduler_is_idle">7.1.6. Release Resources When Scheduler Is Idle</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.ReleaseResourcesWhenSchedulerIdle</code></p>
</div>
<div class="paragraph">
<p><strong>"Release resources when scheduler is idle" policy</strong> removes all nodes from
the infrastructure when the scheduler is idle and acquires them when a
new job is submitted. This policy may be useful if there is no need to
keep nodes alive permanently. Nodes will be released after a specified
"idle time". This policy will use a listener of the scheduler, that is
why its URL, its user name and its password have to be specified.
To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>schedulerURL</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to the credentials used for
scheduler authentication.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryDelay</strong> - Delay in ms for the Resource Manager to recover a broken node source using the ReleaseResourcesWhenSchedulerIdle policy.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryTrialsNumber</strong> - Number of attempts for the Resource Manager to recover to recover a broken node source using the ReleaseResourcesWhenSchedulerIdle policy.</p>
</li>
<li>
<p><strong>idleTime</strong> - Idle time in millisecond to wait before removing all
nodes (default is 60000).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_scheduler_loading_policy"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_loading_policy"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_loading_policy">7.1.7. Scheduler Loading Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.SchedulerLoadingPolicy</code></p>
</div>
<div class="paragraph">
<p><strong>Scheduler loading policy</strong> acquires/releases nodes according to the
scheduler loading factor. This policy allows to configure the number of
resources which will be always enough for the scheduler. Nodes are
acquired and released according to scheduler loading factor which is a
number of tasks per node.</p>
</div>
<div class="paragraph">
<p>It is important to correctly configure maximum and minimum nodes that this
policy will try to hold. Maximum number should not be greater than
potential nodes number which is possible to deploy to underlying
infrastructure. If there are more currently acquired nodes than
necessary, policy will release them one by one after having waited for a
"release period" delay. This smooth release procedure is implemented
because deployment time is greater than the release one. Thus, this
waiting time deters policy from spending all its time trying to deploy
nodes.</p>
</div>
<div class="paragraph">
<p>To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>schedulerURL</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to the credentials used for
scheduler authentication.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryDelay</strong> - Delay in ms for the Resource Manager to recover a broken node source using the SchedulerLoadingPolicy.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryTrialsNumber</strong> - Number of attempts for the Resource Manager to recover to recover a broken node source using the SchedulerLoadingPolicy.</p>
</li>
<li>
<p><strong>refreshTime</strong> - Time between each calculation of the number of needed
nodes.</p>
</li>
<li>
<p><strong>minNodes</strong> - Minimum number of nodes to deploy</p>
</li>
<li>
<p><strong>maxNodes</strong> - Maximum number of nodes to deploy</p>
</li>
<li>
<p><strong>loadFactor</strong> - Number of tasks per node. Actually, if this number is
<strong>N</strong>, it does not means that there will be exactly <strong>N</strong> tasks executed on
each node. This factor is just used to compute the total number of
nodes. For instance, let us assume that this factor is 3 and that we
schedule 100 tasks. In that case, we will have 34 (= upper bound of
100/3) started nodes. Once one task finished and the refresh time
passed, one node will be removed since 99 divided by 3 is 33. When there
will remain 96 tasks (assuming that no other tasks are scheduled
meanwhile), an other node will be removed at the next calculation time,
and so on and so forth&#8230;&#8203;</p>
</li>
<li>
<p><strong>refreshCycleWindow</strong> - Number of refresh cycles used to memorize scheduler load. Actual load will be computed as an average.</p>
</li>
<li>
<p><strong>releaseDelay</strong> - Delay in milliseconds used before removing a free node. This parameter can be used for paid cloud instances such as Amazon, Azure, etc. when their policy define a minimum granularity on instance costs. Example for Amazon : 3600000 ms (1 hour). Default is 0 (not a paid instance, no delay).</p>
</li>
<li>
<p><strong>threshold</strong> - Nodes can be released if the current time is in interval [releaseDelay - threshold, releaseDelay]. Default is 0 (not a paid instance, no delay). Related to releaseDelay. Example for amazon : 600000 ms (10 minutes).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cron_load_based_policy"><a class="anchor" href="ProActiveAdminGuide.html#_cron_load_based_policy"></a><a class="link" href="ProActiveAdminGuide.html#_cron_load_based_policy">7.1.8. Cron Load Based Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.CronLoadBasedPolicy</code></p>
</div>
<div class="paragraph">
<p>The <strong>Cron load based policy</strong> triggers new nodes acquisition when
scheduler is overloaded (exactly like with <strong>"Scheduler loading" policy</strong>)
only within a time slot defined using crontab syntax. All other time the
nodes are removed from the Resource Manager.
To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>schedulerURL</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to the credentials used for
scheduler authentication.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryDelay</strong> - Delay in ms for the Resource Manager to recover a broken node source using the CronLoadBasedPolicy.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryTrialsNumber</strong> - Number of attempts for the Resource Manager to recover to recover a broken node source using the CronLoadBasedPolicy.</p>
</li>
<li>
<p><strong>refreshTime</strong> - Time between each calculation of the number of
needed nodes.</p>
</li>
<li>
<p><strong>minNodes</strong> - Minimum number of nodes to deploy</p>
</li>
<li>
<p><strong>maxNodes</strong> - Maximum number of nodes to deploy</p>
</li>
<li>
<p><strong>loadFactor</strong> - Number of tasks per node. Actually, if this number is
<strong>N</strong>, it does not means that there will be exactly <strong>N</strong> tasks executed on
each node. This factor is just used to compute the total number of
nodes. For instance, let us assume that this factor is 3 and that we
schedule 100 tasks. In that case, we will have 34 (= upper bound of
100/3) started nodes. Once one task finished and the refresh time
passed, one node will be removed since 99 divided by 3 is 33. When there
will remain 96 tasks (assuming that no other tasks are scheduled
meanwhile), an other node will be removed at the next calculation time,
and so on and so forth&#8230;&#8203;</p>
</li>
<li>
<p><strong>refreshCycleWindow</strong> - Number of refresh cycles used to memorize scheduler load. Actual load will be computed as an average.</p>
</li>
<li>
<p><strong>releaseDelay</strong> - Delay in milliseconds used before removing a free node. This parameter can be used for paid cloud instances such as Amazon, Azure, etc. when their policy define a minimum granularity on instance costs. Example for Amazon : 3600000 ms (1 hour). Default is 0 (not a paid instance, no delay).</p>
</li>
<li>
<p><strong>threshold</strong> - Nodes can be released if the current time is in interval [releaseDelay - threshold, releaseDelay]. Default is 0 (not a paid instance, no delay). Related to releaseDelay. Example for amazon : 600000 ms (10 minutes).</p>
</li>
<li>
<p><strong>acquisionAllowed</strong> - The time when the policy starts to work as the
<strong>"scheduler loading" policy</strong> (e.g. "0 12 \* \* \*" every day at 12.00).</p>
</li>
<li>
<p><strong>acquisionForbidden</strong> - The time policy removes all the nodes from the
Resource Manager (e.g. "0 13 \* \* \*" every day at 13.00).</p>
</li>
<li>
<p><strong>preemptive</strong> - Preemptive parameter indicates the way of releasing
nodes. If it is true, nodes will be released without waiting the end of
jobs running on (default is false).</p>
</li>
<li>
<p><strong>allowed</strong> - If true acquisition will be immediately allowed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cron_slot_load_based_policy"><a class="anchor" href="ProActiveAdminGuide.html#_cron_slot_load_based_policy"></a><a class="link" href="ProActiveAdminGuide.html#_cron_slot_load_based_policy">7.1.9. Cron Slot Load Based Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.CronSlotLoadBasedPolicy</code></p>
</div>
<div class="paragraph">
<p>The <strong>"Cron slot load based" policy</strong> triggers new nodes acquisition when
scheduler is overloaded (exactly like with <strong>"Scheduler loading" policy</strong>)
only within a time slot defined using crontab syntax. The other time it
holds all the available nodes.
To use this policy, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>schedulerURL</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to the credentials used for
scheduler authentication.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryDelay</strong> - Delay in ms for the Resource Manager to recover a broken node source using the CronSlotLoadBasedPolicy.</p>
</li>
<li>
<p><strong>schedulerAwarePolicyNodeSourceRecoveryTrialsNumber</strong> - Number of attempts for the Resource Manager to recover to recover a broken node source using the CronSlotLoadBasedPolicy.</p>
</li>
<li>
<p><strong>refreshTime</strong> - Time between each calculation of the number of needed
nodes.</p>
</li>
<li>
<p><strong>minNodes</strong> - Minimum number of nodes to deploy</p>
</li>
<li>
<p><strong>maxNodes</strong> - Maximum number of nodes to deploy</p>
</li>
<li>
<p><strong>loadFactor</strong> - number of tasks per node. Actually, if this number is
<strong>N</strong>, it does not means that there will be exactly <strong>N</strong> tasks executed on
each node. This factor is just used to compute the total number of
nodes. For instance, let us assume that this factor is 3 and that we
schedule 100 tasks. In that case, we will have 34 (= upper bound of
100/3) started nodes. Once one task finished and the refresh time
passed, one node will be removed since 99 divided by 3 is 33. When there
will remain 96 tasks (assuming that no other tasks are scheduled
meanwhile), an other node will be removed at the next calculation time,
and so on and so forth&#8230;&#8203;</p>
</li>
<li>
<p><strong>refreshCycleWindow</strong> - Number of refresh cycles used to memorize scheduler load. Actual load will be computed as an average.</p>
</li>
<li>
<p><strong>releaseDelay</strong> - Delay in milliseconds used before removing a free node. This parameter can be used for paid cloud instances such as Amazon, Azure, etc. when their policy define a minimum granularity on instance costs. Example for Amazon : 3600000 ms (1 hour). Default is 0 (not a paid instance, no delay).</p>
</li>
<li>
<p><strong>threshold</strong> - Nodes can be released if the current time is in interval [releaseDelay - threshold, releaseDelay]. Default is 0 (not a paid instance, no delay). Related to releaseDelay. Example for amazon : 600000 ms (10 minutes).</p>
</li>
<li>
<p><strong>deployAllAt</strong> - Time when all nodes are deployed (crontab format) (e.g. "0 12 \* \* \*" every day at 12.00).</p>
</li>
<li>
<p><strong>undeployAllAt</strong> - Time when all nodes are removed and the policy starts watching the scheduler load (e.g. "0 13 \* \* \*" every day at 13.00).</p>
</li>
<li>
<p><strong>preemptive</strong> - Preemptive parameter indicates the way of releasing
nodes. If it is true, nodes will be released without waiting the end of
tasks running on (default is false).</p>
</li>
<li>
<p><strong>acquireNow</strong> - If true, the policy will acquire all nodes immediately.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dynamic_policy"><a class="anchor" href="ProActiveAdminGuide.html#_dynamic_policy"></a><a class="link" href="ProActiveAdminGuide.html#_dynamic_policy">7.1.10. Dynamic Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.DynamicPolicy</code></p>
</div>
<div class="paragraph">
<p>The <strong>Dynamic policy</strong> is similar to the <a href="ProActiveAdminGuide.html#_scheduler_loading_policy">Scheduler Loading Policy</a> in the sense that it can acquire/release nodes according to the
scheduler load. The <strong>Dynamic policy</strong> is more advanced and gives a fuller range of configuration parameters which allow to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>filter the scheduler load to consider specific tasks which use the <a href="../user/ProActiveUserGuide.html#_node_source_generic_info">NODE_SOURCE</a> or the (deprecated) <a href="../user/ProActiveUserGuide.html#_nodesourcename">NODESOURCENAME</a> <a href="ProActiveAdminGuide.html#_glossary_generic_information">generic information</a>.</p>
</li>
<li>
<p>delay the initial triggering of the policy.</p>
</li>
<li>
<p>release nodes after a configurable idle period.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This policy is very well suited to Cloud infrastructures (Azure, EC2, etc) when cloud instances need to be acquired on-demand.</p>
</div>
<div class="paragraph">
<p>Similarly to the <a href="ProActiveAdminGuide.html#_scheduler_loading_policy">Scheduler Loading Policy</a>, it is important to correctly configure the maximum and minimum nodes that this
policy will try to hold in accordance with the underlying infrastructure.
This policy will never acquire more nodes than the infrastructure is capable of (as configured in the infrastructure parameters).
Symmetrically, if an infrastructure defines a minimum number of nodes to acquire, this policy will never go below this number.</p>
</div>
<div class="paragraph">
<p>The DynamicPolicy will scale up when pending tasks are detected in the ProActive Scheduler queue and the Node Source does not have enough free nodes to assign.</p>
</div>
<div class="paragraph">
<p>In some cases, the existing free nodes will not match the requirements of these pending tasks. This can happen when the task contains a <a href="../user/ProActiveUserGuide.html#_selection_scripts">Selection Script</a> or a <a href="../user/ProActiveUserGuide.html#_generic_information_selection">NODE_ACCESS_TOKEN</a> restriction that discards existing free nodes.
In that case, the Dynamic Policy will use a <strong>best-effort strategy</strong> to handle these tasks that remain in pending state. When tasks remain in pending state longer than <code>initDelay</code> milliseconds, the node source will trigger a scale-up (one new node per pending task).</p>
</div>
<div class="paragraph">
<p>The <strong>loadFactor</strong> is the main parameter that allows to control the scale up/down of the DynamicPolicy. It decides how many new ProActive Nodes will be deployed when considering the current number of pending and running tasks. <strong>loadFactor</strong> is a ratio which computes the expected number of Nodes in the Node Source according to the formula:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>expectedNbNodes = Math.ceil((nbPendingTasks + nbBusyNodes) / loadFactor)</pre>
</div>
</div>
<div class="paragraph">
<p>Two additional parameters allow to fine-tune this formula:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>loadFactorRoundingUp: when <code>false</code>, <code>Math.ceil</code> is replaced by <code>Math.floor</code> in the above formula (rounding down instead of rounding up).</p>
</li>
<li>
<p>loadFactorLegacyBehavior: when <code>true</code>, the formula is transformed to:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>expectedNbNodes = Math.ceil(nbPendingTasks / loadFactor + nbBusyNodes)</pre>
</div>
</div>
<div class="paragraph">
<p>This means that new Nodes will be deployed as long as there are pending tasks remaining, regardless of the <strong>loadFactor</strong> value. In that case, <strong>loadFactor</strong> controls only how many new Nodes are deployed per policy cycle and not how many Nodes are present in the Node Source with regard to the number of tasks to run.</p>
</div>
<div class="paragraph">
<p>Finally, it is also possible to <em>fully control</em> the scale up/down formula and even link it with the state of other Node Sources. This is achieved by using the <strong>scaleNodesExpression</strong> parameter described in <a href="ProActiveAdminGuide.html#_scale_nodes_spel_expression">Scale Nodes SpEL expression</a>.</p>
</div>
<div class="sect4">
<h5 id="_dynamic_policy_resource_tagging"><a class="anchor" href="ProActiveAdminGuide.html#_dynamic_policy_resource_tagging"></a><a class="link" href="ProActiveAdminGuide.html#_dynamic_policy_resource_tagging">Dynamic Policy Resource Tagging</a></h5>
<div class="paragraph">
<p>The DynamicPolicy has the ability to add <strong>tags</strong> to resources acquired by cloud providers.
The tagging mechanism depends on the <a href="ProActiveAdminGuide.html#_node_source_infrastructures">infrastructure</a> associated with the DynamicPolicy. Currently,
only the <a href="ProActiveAdminGuide.html#_azure_scale_set_infrastructure">Azure Scale Set Infrastructure</a> supports resource tagging (see <a href="ProActiveAdminGuide.html#_scale_set_tagging">Scale Set Tagging</a> for more information).</p>
</div>
<div class="paragraph">
<p>Tagging can be activated by adding the <a href="../user/ProActiveUserGuide.html#_resource_tags">RESOURCE_TAGS</a> Generic Information to workflows or workflow tasks that will target this node source.
RESOURCE_TAGS must contain the following json key/value structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "tagName1" :  "tagValue1",
  "tagName2" :  "tagValue2"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the node source scales up due to the scheduling of a task with the above RESOURCE_TAGS generic information example, resources will be tagged with 2 tags <code>tagName1:tagValue1</code> and <code>tagName2:tagValue2</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_dynamic_policy_parameters"><a class="anchor" href="ProActiveAdminGuide.html#_dynamic_policy_parameters"></a><a class="link" href="ProActiveAdminGuide.html#_dynamic_policy_parameters">Dynamic Policy Parameters</a></h5>
<div class="paragraph">
<p>To use the <strong>DynamicPolicy</strong>, you have to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>minNodes</strong> - Minimum number of nodes to deploy</p>
</li>
<li>
<p><strong>maxNodes</strong> - Maximum number of nodes to deploy</p>
</li>
<li>
<p><strong>schedulerUrl</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to the credentials used for
scheduler authentication.</p>
</li>
<li>
<p><strong>schedulerConnectionTimeout</strong> - Timeout in ms to establish connection with the scheduler.</p>
</li>
<li>
<p><strong>schedulerConnectionTrialsNumber</strong> - Number of attempts to connect with the scheduler.</p>
</li>
<li>
<p><strong>refreshTime</strong> - Time in milliseconds between each calculation of the number of
needed nodes.</p>
</li>
<li>
<p><strong>loadFactor</strong> - Threshold of pending tasks that triggers the deployment of new nodes.
Used with the observed ratio: <code>Number of Pending Tasks / Available free nodes to execute them</code>. If the current ratio is above loadFactor, it will trigger a node deployment.
For example, if loadFactor is <code>1</code>, as soon as one task is pending and no node is free to execute a task, the Node Source will deploy one new node. A loadFactor of <code>10</code> means that 1 new node will be deployed when up to 10 tasks are pending and no nodes are free for executing them.</p>
</li>
<li>
<p><strong>loadFactorRoundingUp</strong> - Boolean value which decides if <code>Number of pending tasks / loadFactor</code> should be rounded up (<code>true</code>) or down (<code>false</code>) when calculating the amount of nodes to deploy.
For example if loadFactor is <code>10</code> and loadFactorRoundingUp is <code>true</code>, 1 new node will be deployed when 1 to 10 tasks are pending. If loadFactorRoundingUp is <code>false</code>, 1 new node will be deployed when 10 to 19 tasks are pending.</p>
</li>
<li>
<p><strong>loadFactorLegacyBehavior</strong> - Boolean value which decides if the legacy <em>loadFactor</em> behavior should be enabled (default to <code>false</code>). The Dynamic Policy used to apply the <em>loadFactor</em> setting on pending tasks only. This meant that as long as pending tasks were present, new nodes could be deployed (up to the <em>maxNodes</em> parameter). This behavior did not really satisfy the philosophy of <em>loadFactor</em> which aims to deploy a limited number of nodes to handle a larger amount of short-lived tasks. The new mechanism takes into account both pending tasks and already deployed nodes. The legacy mechanism can be enabled for backward-compatibility reasons by setting <em>loadFactorLegacyBehavior</em> to <code>true</code>.</p>
</li>
<li>
<p><strong>initDelay</strong> - Delay in milliseconds to initialize the infrastructure (eg. in a azure cloud infrastructure this must
cover the creation of Azure&#8217;s initial resources such as network, storage account, etc.). This parameter is also used as a trigger for the <strong>best-effort scale-up strategy</strong> described above.</p>
</li>
<li>
<p><strong>minUptime</strong> - Minimal uptime of a free node to be candidate for deletion (in milliseconds). For example, if this parameter
is set to 10 minutes, a node will not be removed from the node source unless it stays 10 minutes consecutively in state FREE, without executing any new task.</p>
</li>
<li>
<p><strong>globalScope</strong> - Specifies the scope of the policy: If <code>true</code>, all the pending tasks will be taken into account for scaling up.
If <code>false</code>, only the pending tasks targeting this specific Node Source will be taken into account. Pending tasks can target a Node Source by defining either the <a href="../user/ProActiveUserGuide.html#_node_source_generic_info">NODE_SOURCE</a>
 or the (deprecated) <a href="../user/ProActiveUserGuide.html#_nodesourcename">NODESOURCENAME</a> generic information.</p>
</li>
<li>
<p><strong>scaleNodesExpression</strong>: advanced parameter allowing to fully control the formula used to scale up or scale down Nodes. The parameter expects a SpEL expression with a syntax described below.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_scale_nodes_spel_expression"><a class="anchor" href="ProActiveAdminGuide.html#_scale_nodes_spel_expression"></a><a class="link" href="ProActiveAdminGuide.html#_scale_nodes_spel_expression">Scale Nodes SpEL expression</a></h5>
<div class="paragraph">
<p><strong>scaleNodesExpression</strong> is a powerful, advanced parameter which allows full control on the scale up and scale down of a DynamicPolicy.</p>
</div>
<div class="paragraph">
<p><strong>scaleNodesExpression</strong> uses the <a href="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/expressions.html#expressions-language-ref">Spring Expression Language</a> syntax</p>
</div>
<div class="paragraph">
<p><strong>scaleNodesExpression</strong> must return an integer with the following semantic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a positive integer N will require the Node Source to deploy N new Nodes.</p>
</li>
<li>
<p>a negative integer N will require the Node Source to remove N Nodes (only Nodes that have been in <code>FREE</code> state for more than <strong>minUptime</strong> milliseconds can be removed).</p>
</li>
<li>
<p>0 will keep the current Nodes unchanged.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_scalenodes_vars"><a class="anchor" href="ProActiveAdminGuide.html#_scalenodes_vars"></a><a class="link" href="ProActiveAdminGuide.html#_scalenodes_vars">Variables and Functions</a></h5>
<div class="paragraph">
<p>The expression can use the following given variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>loadFactor</strong>: the currently configured load factor in the DynamicPolicy (see <a href="ProActiveAdminGuide.html#_dynamic_policy_parameters">Dynamic Policy Parameters</a>).</p>
</li>
<li>
<p><strong>globalScope</strong>: the currently configured scope of the DynamicPolicy (see <a href="ProActiveAdminGuide.html#_dynamic_policy_parameters">Dynamic Policy Parameters</a>).</p>
</li>
<li>
<p><strong>aliveNodes</strong> : the current number of alive Nodes in the Node Source when <strong>globalScope</strong> is <code>false</code>. Otherwise, <strong>aliveNodes</strong> will be the current number of alive Nodes in the Resource Manager. Alive Nodes are Nodes in the following states: <code>DEPLOYING</code>, <code>CONFIGURING</code>, <code>FREE</code>, <code>BUSY</code> or <code>TO_BE_REMOVED</code> (see <a href="ProActiveAdminGuide.html#_node_states">Node States</a>).</p>
</li>
<li>
<p><strong>aliveNodesInNodeSource</strong>: the current number of alive nodes in the Node Source, regardless of the <strong>globalScope</strong> configuration.</p>
</li>
<li>
<p><strong>busyNodes</strong>: the current number of Nodes in BUSY state in the Node Source when <strong>globalScope</strong> is <code>false</code>. Otherwise, <strong>busyNodes</strong> will be the current number of Nodes in BUSY state in the Resource Manager.</p>
</li>
<li>
<p><strong>busyNodesInNodeSource</strong>: the current number of Nodes in BUSY state in the Node Source regardless of the <strong>globalScope</strong> configuration.</p>
</li>
<li>
<p><strong>deployingNodes</strong>: the current number of Nodes in DEPLOYING state in the Node Source (does not consider the <strong>globalScope</strong> parameter).</p>
</li>
<li>
<p><strong>neededNodes</strong>: the number of Nodes needed by pending tasks. This value contains all pending tasks when <strong>globalScope</strong> is <code>true</code> and only tasks which define the <a href="../user/ProActiveUserGuide.html#_node_source_generic_info">NODE_SOURCE</a> or the <a href="../user/ProActiveUserGuide.html#_nodesourcename">NODESOURCENAME</a> generic information when <strong>globalScope</strong> is <code>false</code>. Also, this value considers multi-node pending tasks (for example, a task can require using 3 Nodes).</p>
</li>
<li>
<p><strong>temp</strong>: can be set to a temporary object used in the SpEL expression.</p>
</li>
<li>
<p><strong>tempMap</strong>: an empty Hash Map structure which can be populated and used in the SpEL expression.</p>
</li>
<li>
<p><strong>nodeSources</strong>: a <em>key-value</em> HashMap which contain the state of all Node Sources in the Resource Manager. The key is the Node Source name and the value contains the following properties:</p>
<div class="ulist">
<ul>
<li>
<p><strong>acquiredNodes</strong>: the current number of acquired Nodes in this Node Source. <strong>acquiredNodes</strong> contain Nodes in <code>CONFIGURING</code>, <code>FREE</code>, <code>BUSY</code> or <code>TO_BE_REMOVED</code> states. This property is accessed using <code>nodeSources.get('node-source-name').getAcquiredNodes()</code>.</p>
</li>
<li>
<p><strong>aliveNodes</strong> : the current number of alive Nodes in the Node Source. Alive Nodes are Nodes in <code>DEPLOYING</code>, <code>CONFIGURING</code>, <code>FREE</code>, <code>BUSY</code> or <code>TO_BE_REMOVED</code> states. This property is accessed using <code>nodeSources.get('node-source-name').getAliveNodes()</code>.</p>
</li>
<li>
<p><strong>deployingNodes</strong>: the current number of Nodes in <code>DEPLOYING</code> state in this Node Source. This property is accessed using <code>nodeSources.get('node-source-name').getDeployingNodes()</code>.</p>
</li>
<li>
<p><strong>busyNodes</strong>: the current number of Nodes in <code>BUSY</code> or <code>TO_BE_REMOVED</code> states in this Node Source. This property is accessed using <code>nodeSources.get('node-source-name').getBusyNodes()</code>.</p>
</li>
<li>
<p><strong>totalNodes</strong>: the total number of Nodes in this Node Source. This property is accessed using <code>nodeSources.get('node-source-name').getTotalNodes()</code>.</p>
</li>
<li>
<p><strong>descriptor</strong>: a <a href="../javadoc/org/ow2/proactive/resourcemanager/nodesource/NodeSourceDescriptor.html">NodeSourceDescriptor</a> object containing all the parameters of this Node Source. This property is accessed using <code>nodeSources.get('node-source-name').getDescriptor()</code>.
The NodeSourceDescriptor object contain many methods, among which the <code>getInfrastructureParameter(name)</code> and the <code>getPolicyParameter(name)</code> will be the most useful.</p>
<div class="paragraph">
<p>For example, it is possible to access the <strong>maxNodes</strong> parameter of a specific Node Source that uses a DynamicPolicy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>T(Integer).parseInt(nodeSources.get('node-source-name').getDescriptor().	getPolicyParameter('maxNodes'))</pre>
</div>
</div>
<div class="paragraph">
<p>As <em>getPolicyParameter</em> returns a string, it is necessary to transform it into an integer before doing any integer comparison.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>scaleNodesExpression</strong> can also use the following function (in addition to the functions available by default in the SpEL language):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>z(expression)</code>: evaluate the expression and return <code>zero</code>.
This is used to allow performing affectations to the <code>temp</code> or <code>tempMap</code> variables. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>z(temp=neededNodes+busyNodes)+T(Math).ceil(temp/loadFactor)-aliveNodes</pre>
</div>
</div>
<div class="paragraph">
<p>In this expression, the <code>z</code> function prevents the affectation from adding its value to the total.</p>
</div>
</div>
<div class="sect4">
<h5 id="_scalenodes_examples"><a class="anchor" href="ProActiveAdminGuide.html#_scalenodes_examples"></a><a class="link" href="ProActiveAdminGuide.html#_scalenodes_examples">Example Expressions</a></h5>
<div class="paragraph">
<p>Below is an example of a <strong>scaleNodesExpression</strong> that reproduces the default behavior of the DynamicPolicy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>T(Math).ceil((neededNodes + busyNodes) / loadFactor) - aliveNodes</pre>
</div>
</div>
<div class="paragraph">
<p>Explanation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T(Math).ceil((neededNodes + busyNodes) / loadFactor)</code>: this computes the expected number of Nodes. When <strong>loadFactor</strong> is 1, the expected number of Nodes is the sum of pending tasks and current Nodes in <code>BUSY</code> state. A <strong>loadFactor</strong> greater than 1 will reduce the amount of expected Nodes.</p>
</li>
<li>
<p><code>- aliveNodes</code>: the number of alive Nodes is substracted to the expected number of Nodes to return the signed difference. The returned value will either be positive (scale up) or negative (scale down).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is an example of a <strong>scaleNodesExpression</strong> that will scale up the Node Source when another Dynamic Policy Node Source has reached maximum capacity (this expression considers that <strong>globalScope</strong> is <code>true</code> for both Node Sources). The following expression must be defined on the second Node Source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>z(temp=nodeSources.get('FirstNS')) + (temp.getAliveNodes() == T(Integer).parseInt(temp.getDescriptor().getPolicyParameter('maxNodes')) ? T(Math).ceil((neededNodes + busyNodesInNodeSource) / loadFactor) - aliveNodesInNodeSource : -aliveNodesInNodeSource )</pre>
</div>
</div>
<div class="paragraph">
<p>Explanation:</p>
</div>
<div class="paragraph">
<p>The main structure of this expression uses the <code>test ? case1 : case2</code> syntax, which evaluates <code>case1</code> when <code>test</code> is <code>true</code> and <code>case2</code> when <code>test</code> is <code>false</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>z(temp=nodeSources.get('FirstNS')) &#43;</code>: read the state of the first node source and store it into a temporary variable. Notice the use of the <code>z()</code> function and the <code>&#43;</code> sign, so that this affectation does not change the value returned by the expression.</p>
</li>
<li>
<p><code>temp.getAliveNodes() == T(Integer).parseInt(temp.getDescriptor().getPolicyParameter('maxNodes'))</code> : check if the current number of alive Nodes in the Node Source <code>FirstNS</code> is equal to the maximum configured for the first Node Source.</p>
</li>
<li>
<p><code>T(Math).ceil((neededNodes + busyNodesInNodeSource) / loadFactor) - aliveNodesInNodeSource</code>: when the maximum number of nodes is reached on the first Node Source, the second Node Source will scale up based on the default scale up expression (see previous example). Note that we use <code>busyNodesInNodeSource</code> and <code>aliveNodesInNodeSource</code> to count only Nodes that belong to the second Node Source.</p>
</li>
<li>
<p><code>-aliveNodesInNodeSource</code>: when the first Node Source is not at the maximum, remove all alive Nodes in the second Node Source (only <code>FREE</code> Nodes will be removed after <strong>minUptime</strong> milliseconds).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_native_scheduler_policy"><a class="anchor" href="ProActiveAdminGuide.html#_native_scheduler_policy"></a><a class="link" href="ProActiveAdminGuide.html#_native_scheduler_policy">7.1.11. Native Scheduler Policy</a></h4>
<div class="paragraph">
<p><strong>Full name:</strong> <code>org.ow2.proactive.resourcemanager.nodesource.policy.NativeSchedulerPolicy</code></p>
</div>
<div class="paragraph">
<p>The Native Scheduler Policy interacts with the <a href="ProActiveAdminGuide.html#_glossary_ns_native_scheduler">native scheduler</a> to request ProActive nodes deployment dynamically based on the <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> pending queue.
This mechanism is described in <a href="ProActiveAdminGuide.html#_deploy_via_other_schedulers">Deploy ProActive Nodes dynamically via other schedulers (PBS, SLURM, &#8230;&#8203;)</a>. This policy must be associated with a <a href="ProActiveAdminGuide.html#_native_scheduler_infrastructure">Native Scheduler Infrastructure</a> and cannot be associated with any other infrastructure.
To use this policy, you need to define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>userAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>providerAccessType</strong> - see <a href="ProActiveAdminGuide.html#_policy_common_parameters">Common Parameters</a></p>
</li>
<li>
<p><strong>schedulerUrl</strong> - URL of the Scheduler, e.g. pnp://mymachine:64738, pamr://0, etc</p>
</li>
<li>
<p><strong>schedulerCredentialsPath</strong> - Path to a file which contains the credentials of an administrator user which will connect to the scheduler. The ProActive Scheduler Server release contains two admin users credentials files : <code>config/authentication/rm.cred</code> and <code>config/authentication/admin_user.cred</code></p>
</li>
<li>
<p><strong>rearrangeTasks</strong> - Currently not implemented.</p>
</li>
<li>
<p><strong>autoScaling</strong> - If set to <code>true</code>, the NativeSchedulerPolicy will scan the Resource Manager activity and Scheduler queue. If the scheduler queue is not empty and all Resource Manager nodes are busy, <code>autoscaling</code> will automatically start ProActive Nodes from the NativeSchedulerInfrastructure. This setting cannot be used when multiple NativeScheduler node sources are deployed.</p>
</li>
<li>
<p><strong>refreshTime</strong> -  The NativeSchedulerPolicy will refresh its status and observe the ProActive Scheduler queue every <code>refreshTime</code> milliseconds.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agents_schedule"><a class="anchor" href="ProActiveAdminGuide.html#_agents_schedule"></a><a class="link" href="ProActiveAdminGuide.html#_agents_schedule">7.2. Agents schedule</a></h3>
<div class="paragraph">
<p><strong>Node source policies</strong> limit ProActive Nodes utilization on the level of the ProActive Scheduler.
If you need fine-grained limits on the node level <strong>ProActive Agents</strong> will help you achieve that.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The typical scenario is when you use desktop workstation for computations during non working hours.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Both linux and windows agents have an ability to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run ProActive Nodes according to the schedule</p>
</li>
<li>
<p>Limit resources utilization for these daemons (e.g CPU, memory)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Agents configuration is detailed in the section <a href="ProActiveAdminGuide.html#_proactive_agents">Deploy ProActive Nodes via Agents</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nodes_locking"><a class="anchor" href="ProActiveAdminGuide.html#_nodes_locking"></a><a class="link" href="ProActiveAdminGuide.html#_nodes_locking">7.3. Locking ProActive Nodes</a></h3>
<div class="paragraph">
<p>The Resource Manager allows to lock and unlock ProActive nodes. Locking a Node prevents new Tasks to be launched on
that node. This operation is possible whatever the <a href="ProActiveAdminGuide.html#_node_states">state of a Node</a> is. Once locked, the Resource Manager keeps track of
who has locked the Node and when.</p>
</div>
<div class="paragraph">
<p>A common use case for locking Nodes is about maintenances. You may have a long running Task executing on a ProActive
Node where a maintenance is planned. Let&#8217;s say the current Task must not be interrupted and new ones not started before
achieving the maintenance. A solution is to lock the Node. This way, the current Task will complete but no new Tasks are
scheduled on that Node. Then, it is possible to perform the maintenance and on termination to unlock the Node. Upon
unlocking, the Node becomes again eligible for Tasks execution.</p>
</div>
<div class="paragraph">
<p>Locking and unlocking a Node, or more generally a set of Nodes, is possible from the REST API, the command line client
but also the Resource Manager portal.</p>
</div>
<div class="paragraph">
<p>Please note that locks are restored, by default, on Resource Manager restart and thus Scheduler restart.
It is possible to disable this feature by editing the value associated to the property named
<code>pa.rm.nodes.lock.restoration</code> in <code>PROACTIVE_HOME/config/rm/settings.ini</code>.</p>
</div>
<div class="paragraph">
<p>When the nodes lock restoration feature is enabled, the Resource Manager will try to lock, per Node Source,
as many Nodes as there were on the previous run.
The approach is best effort and Node hostname is not considered.
As a consequence, Nodes are not necessarily locked on the same host after a Scheduler restart.</p>
</div>
</div>
<div class="sect2">
<h3 id="_undeploying_node_sources"><a class="anchor" href="ProActiveAdminGuide.html#_undeploying_node_sources"></a><a class="link" href="ProActiveAdminGuide.html#_undeploying_node_sources">7.4. Undeploying Node Sources</a></h3>
<div class="paragraph">
<p>The <a href="ProActiveAdminGuide.html#_glossary_resource_manager">Resource Manager</a> allows for <a href="ProActiveAdminGuide.html#_glossary_node_source">Node Sources</a> to be
<strong>undeployed</strong>. In this case, the Node Source is shut down and its <a href="ProActiveAdminGuide.html#_glossary_proactive_node">Nodes</a> are removed, but
the Node Source definition is kept. An undeployed Node Source can be <strong>redeployed</strong> later, using its initial
configuration.</p>
</div>
<div class="paragraph">
<p>Node Source undeploying can be <strong>preemptive</strong> or not. If a Node Source undeploying is initiated with a non-preemptive
requirement, then the Nodes of this Node Source which are currently running <a href="ProActiveAdminGuide.html#_glossary_task">Tasks</a> will not be
removed until their Task is finished. In this case, these Nodes are displayed in the
<em>to-be-removed</em> state. In other terms, if a Node Source is undeployed <strong>non-preemptively</strong>, it will be completely
undeployed as soon as all of its Nodes have finished executing their Task. On the other hand, if a Node Source is
undeployed <strong>with preemption</strong>, its Nodes are immediately removed regardless of whether they execute Tasks, and this may
cause Tasks to fail.</p>
</div>
<div class="paragraph">
<p>Deploying and undeploying Node Sources is possible from the
<a href="ProActiveAdminGuide.html#_glossary_rm_web_interface">Resource Manager Web Interface</a>, from the Resource Manager
<a href="ProActiveAdminGuide.html#_glossary_rest_api">REST API</a>, and from the <a href="ProActiveAdminGuide.html#_resource_manager_command_line">Command Line</a> client.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The deployment status of a Node Source is persistent. If the Resource Manager is restarted, then all Node Sources
will be <strong>restored</strong> to their previous state.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_network_protocols"><a class="anchor" href="ProActiveAdminGuide.html#_available_network_protocols"></a><a class="link" href="ProActiveAdminGuide.html#_available_network_protocols">8. Available Network Protocols</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>ProActive Workflows and Scheduling offers several protocols for
the Scheduler and nodes to communicate. These protocols provide different
features: <em>speed</em>, <em>security</em>, <em>fast error detection</em>, <em>firewall</em> or
<em>NAT friendliness</em> but none of the protocols can offer all these features at
the same time.
Consequently, the selection should be made carefully. Below are introduced
the available network protocols.
Configuration and properties are discussed in <a href="ProActiveAdminGuide.html#_network_properties">Network Properties</a>.</p>
</div>
<div class="sect2">
<h3 id="_proactive_network_protocol"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_network_protocol"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_network_protocol">8.1. ProActive Network Protocol</a></h3>
<div class="paragraph">
<p>ProActive Network Protocol (PNP) is the general purpose communication protocol
(<code>pnp://</code> scheme). Its performances are quite similar to the well known Java RMI
protocol, but it is much more robust and network friendly. It requires only one
TCP port per JVM and no shared registry. Besides, it enables fast network
failure discovery and better scalability.
PNP binds to a given TCP port at startup. All incoming communications use this
TCP port. Deploying the Scheduler or a node with PNP requires to open one and
only one incoming TCP port per machine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_proactive_network_protocol_over_ssl"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_network_protocol_over_ssl"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_network_protocol_over_ssl">8.2. ProActive Network Protocol over SSL</a></h3>
<div class="paragraph">
<p>ProActive Network Protocol over SSL (PNPS) is the PNP protocol wrapped inside
an SSL tunnel. The URI scheme used for the protocol is <code>pnps://</code>. It includes
the same features as PNP plus ciphering and optionally authentication.
Using SSL creates some CPU overhead which implies that PNPS is slower than PNP.</p>
</div>
</div>
<div class="sect2">
<h3 id="_proactive_message_routing"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_message_routing"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_message_routing">8.3. ProActive Message Routing</a></h3>
<div class="paragraph">
<p>ProActive Message Routing (PAMR) allows the deployment of the Scheduler and nodes
behind a firewall. Its associated URI
scheme is <code>pamr://</code>. PAMR has the weakest expectations on how the network is
configured. Unlike all the other communication protocols introduced previously,
it has been designed to work when only outgoing TCP connections are available.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installation_on_a_cluster_with_firewall"><a class="anchor" href="ProActiveAdminGuide.html#_installation_on_a_cluster_with_firewall"></a><a class="link" href="ProActiveAdminGuide.html#_installation_on_a_cluster_with_firewall">8.4. Installation on a Cluster with Firewall</a></h3>
<div class="paragraph">
<p>When incoming connections are not allowed (ports closed, firewalls, etc.), the
ProActive Scheduler allows you to connect nodes without significant changes
in your network firewall configuration. It relies on the PAMR protocol.</p>
</div>
<div class="paragraph">
<p>This last does <strong>not</strong> expect <strong>bidirectional</strong> TCP connections.
It has been designed to work when only outgoing TCP connections are available.
Such environments can be encountered due to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Network address translation devices</p>
</li>
<li>
<p>Firewalls allowing only outgoing connections (this is the default setup of many firewalls)</p>
</li>
<li>
<p>Virtual Machines with a virtualized network stack</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/firewall.png" alt="firewall">
</div>
</div>
<div class="paragraph">
<p>When PAMR is activated, the ProActive Scheduler and nodes connect to a PAMR router. This connection is kept open, and used
as a tunnel to receive incoming messages. If the tunnel goes down, it is automatically reopened by nodes.</p>
</div>
<div class="paragraph">
<p>The biggest drawback of PAMR is that a centralized PAMR router is in charge of routing message between all the PAMR clients.
To soften this limitation PAMR can be used with other communication protocols. This way, PAMR is used only when needed.</p>
</div>
<div class="paragraph">
<p>By default, PNP is enabled. PNP is the default protocol for better performance and nodes can also use PAMR if needed.
The PAMR Router is started by default along with the ProActive Scheduler.</p>
</div>
<div class="paragraph">
<p>For a ProActive Node to connect to the ProActive Scheduler using PAMR, the following ProActive configuration file can be used
(<code>PROACTIVE_HOME/config/network/node.ini</code>). The properties tell the ProActive Node where to find the PAMR router.
The ProActive Node will then connect to <code>pamr://0</code> where <code>0</code> is the PAMR id of the Scheduler (0 by default).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">proactive.communication.protocol=pamr
proactive.pamr.router.address=ROUTER_HOSTNAME
proactive.pamr.router.port=33647</code></pre>
</div>
</div>
<div class="paragraph">
<p>This sample configuration requires to open only one port <code>33647</code> for <strong>incoming connections</strong> on the router host
and all the ProActive Nodes will be able to connect to the Scheduler.</p>
</div>
<div class="paragraph">
<p>PAMR communication can be tunneled using SSH for better security. In that case, the ProActive node will establish
a SSH tunnel between it and the ProActive Scheduler and use that tunnel for PAMR traffic.</p>
</div>
<div class="paragraph">
<p>See <a href="ProActiveAdminGuide.html#_pamr_protocol_properties">PAMR Protocol Properties</a> reference for a detailed explanation of each property.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_task_termination_behavior"><a class="anchor" href="ProActiveAdminGuide.html#_task_termination_behavior"></a><a class="link" href="ProActiveAdminGuide.html#_task_termination_behavior">9. Task Termination Behavior</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_proactive_node_graceful_task_termination_sigterm_at_killing"><a class="anchor" href="ProActiveAdminGuide.html#_proactive_node_graceful_task_termination_sigterm_at_killing"></a><a class="link" href="ProActiveAdminGuide.html#_proactive_node_graceful_task_termination_sigterm_at_killing">9.1. ProActive Node Graceful Task Termination (SIGTERM) at Killing</a></h3>
<div class="paragraph">
<p>The task termination timeout is a cleanup timeout for each task (executed on this Node)
after it was killed (through the Scheduler REST API or the Scheduler web portal).
By default the task termination timeout is set to 10 seconds
but it can be setup on each ProActive Node individually.
It can be set at node startup by setting the "proactive.node.task.cleanup.time" property.
Example: add  "-Dproactive.node.task.cleanup.time=30" (set to 30 seconds as example) to
the node startup command.</p>
</div>
<div class="paragraph">
<p>Find an overview of termination behavior by task and language in section <a href="ProActiveAdminGuide.html#_termination_behavior_by_language">Termination behavior by language</a>.</p>
</div>
<div class="sect3">
<h4 id="_step_by_step_killing_example"><a class="anchor" href="ProActiveAdminGuide.html#_step_by_step_killing_example"></a><a class="link" href="ProActiveAdminGuide.html#_step_by_step_killing_example">9.1.1. Step by Step Killing Example</a></h4>
<div class="paragraph">
<p>With a 30 seconds termination timeout following steps happen.</p>
</div>
<div class="sect4">
<h5 id="_first"><a class="anchor" href="ProActiveAdminGuide.html#_first"></a><a class="link" href="ProActiveAdminGuide.html#_first">First</a></h5>
<div class="paragraph">
<p>The kill request is received by the Scheduler Server.</p>
</div>
</div>
<div class="sect4">
<h5 id="_second"><a class="anchor" href="ProActiveAdminGuide.html#_second"></a><a class="link" href="ProActiveAdminGuide.html#_second">Second</a></h5>
<div class="paragraph">
<p>The ProActive Node which executes the task receives the kill request.
The behavior depends if the Scheduler Server is configured to launch tasks in Forked or Non-Forked Mode.</p>
</div>
<div class="paragraph">
<p><strong>Forked Mode</strong>:</p>
</div>
<div class="paragraph">
<p>On Linux, a SIGTERM signal is send to the JVM which executes the task.
On Windows, the TerminateProcess method of the JVM process which executes the task is executed.
That will finally lead to the Task Process being interrupted by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A SIGTERM signal on Linux</p>
</li>
<li>
<p>TerminateProcess method called, on Windows</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The task can deal with the killing event and start a cleanup procedure. If
the task has started sub-processes it is responsible to initiate graceful termination
of the sub-processes. Handling a graceful termination event looks different in each task type
and is dependent on the capabilities of the language used.
As an example Bash and Jython (Python task) can catch a SIGTERM signal.
Java and Groovy task need to register shutdownHooks to achieve similar behavior.</p>
</div>
<div class="paragraph">
<p><strong>Non-Forked Mode</strong>:</p>
</div>
<div class="paragraph">
<p>In Non-Forked Mode, the task runs in a separate thread in the same JVM as the ProActive Node.
Therefore, the thread running the task will be interrupted.</p>
</div>
<div class="paragraph">
<p>Bash tasks, in Non-Forked Mode, do receive SIGTERM.
Java and Groovy tasks will receive an InterruptedException, which can be used to handle
the graceful termination of that task and sub-processes.
But, Jython (Python tasks) will not receive any notification.
If the task has started sub-processes it is responsible to initiate graceful termination of the sub-processes,
if possible.</p>
</div>
</div>
<div class="sect4">
<h5 id="_third"><a class="anchor" href="ProActiveAdminGuide.html#_third"></a><a class="link" href="ProActiveAdminGuide.html#_third">Third</a></h5>
<div class="paragraph">
<p>The ProActive Node waits as many seconds as setup in the proactive.node.task.cleanup.time property or until
the task is stopped.
Example: cleanup timeout is 30 seconds and the task takes 3 seconds to terminate, then the ProActive Node will
wait 3 seconds only.</p>
</div>
</div>
<div class="sect4">
<h5 id="_fourth"><a class="anchor" href="ProActiveAdminGuide.html#_fourth"></a><a class="link" href="ProActiveAdminGuide.html#_fourth">Fourth</a></h5>
<div class="paragraph">
<p>The ProActive Node initiates the task process and sub-process removal.
This will forcefully kill the whole tree of processes. Another SIGTERM
might be send shortly before the forcefully killing (SIGKILL).</p>
</div>
</div>
<div class="sect4">
<h5 id="_additional_information"><a class="anchor" href="ProActiveAdminGuide.html#_additional_information"></a><a class="link" href="ProActiveAdminGuide.html#_additional_information">Additional information</a></h5>
<div class="paragraph">
<p><strong>On Windows</strong> the termination procedure is similar. But the Windows SIGTERM equivalent is
executing the TerminateProcess method of the process. Whereas the SIGKILL is equivalent to
the forceful removal of the running process.</p>
</div>
</div>
<div class="sect4">
<h5 id="_termination_behavior_by_language"><a class="anchor" href="ProActiveAdminGuide.html#_termination_behavior_by_language"></a><a class="link" href="ProActiveAdminGuide.html#_termination_behavior_by_language">Termination behavior by language</a></h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Termination Behavior for a Few Languages</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Language/Execution type</th>
<th class="tableblock halign-left valign-top">Bash</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Groovy</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forked Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle SIGTERM. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle SIGTERM. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a shutdown hook. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add a shutdown hook. Task waits cleanup timeout, before being killed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forked Mode Run As Me</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle SIGTERM. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle SIGTERM. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a shutdown hook. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a shutdown hook. Task waits cleanup timeout, before being killed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-Forked Mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle SIGTERM. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates immediately.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Catch an InterruptedException. Task waits cleanup timeout, before being killed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Catch an InterruptedException. Task waits cleanup timeout, before being killed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monitor_the_cluster_state"><a class="anchor" href="ProActiveAdminGuide.html#_monitor_the_cluster_state"></a><a class="link" href="ProActiveAdminGuide.html#_monitor_the_cluster_state">10. Monitor the cluster state</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cluster monitoring typically means checking that all ProActive Nodes that were added to <strong>ProActive Scheduler</strong>
are up and running. We don&#8217;t track for example the free disk space or software upgrade which can be
better achieved with tools like <a href="https://www.nagios.org" target="_blank" rel="noopener">Nagios</a>.</p>
</div>
<div class="paragraph">
<p>In the <strong>Resource Manager Web Interface</strong> you can see how many ProActive Nodes were added to the
Resource Manager and their usage.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/admin_web.png" alt="admin web">
</div>
</div>
<div class="paragraph">
<p>The same information is accessible using the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client --listnodes</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_node_states"><a class="anchor" href="ProActiveAdminGuide.html#_node_states"></a><a class="link" href="ProActiveAdminGuide.html#_node_states">10.1. ProActive Node States</a></h3>
<div class="paragraph">
<p>When you look at your cluster, ProActive Nodes can be in one of the following states:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Deploying</code> - The deployment of the node has been triggered by the ProActive Resource Manager but it has not yet been added.</p>
</li>
<li>
<p><code>Lost</code> - The deployment of the node has failed for some reason.
The node has never been added to the ProActive Resource Manager and won&#8217;t be usable.</p>
</li>
<li>
<p><code>Configuring</code> - Node has been added to the ProActive Resource Manager and is being configured.</p>
</li>
<li>
<p><code>Free</code> - Node is available for computations.</p>
</li>
<li>
<p><code>Busy</code> - Node has been given to user to execute computations.</p>
</li>
<li>
<p><code>To be removed</code> - Node is busy but requested to be removed. So it will be removed once the client will release it.</p>
</li>
<li>
<p><code>Down</code> - Node is unreachable or down and cannot be used anymore.</p>
</li>
<li>
<p><code>Needed</code> - Metric shows how many additional nodes the Scheduler needs to schedule all pending tasks.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The state of a ProActive Node is managed by the Resource Manager. However, each Node has a
<a href="ProActiveAdminGuide.html#_nodes_locking">user managed lock status</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jmx"><a class="anchor" href="ProActiveAdminGuide.html#_jmx"></a><a class="link" href="ProActiveAdminGuide.html#_jmx">10.2. JMX</a></h3>
<div class="paragraph">
<p>The JMX interface for remote management and monitoring provides information about the running ProActive Resource Manager and allows the user to modify its configuration.
For more details about JMX concepts, please refer to official documentation about
the <a href="https://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html" target="_blank" rel="noopener">JMX architecture</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/jmx_archi.png" alt="jmx archi">
</div>
</div>
<div class="paragraph">
<p>The following aspects (or services) of the <strong>ProActive Scheduler</strong> are instrumented using MBeans that are managed through a JMX agent.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Server status</strong> is exposed using the RuntimeDataMBean</p>
<div class="ulist">
<ul>
<li>
<p>The Resource Manager status</p>
</li>
<li>
<p>Available/Free/Busy/Down nodes count</p>
</li>
<li>
<p>Average activity/inactivity percentage</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <strong>Accounts Manager</strong> exposes accounting information using the MyAccountMBean and AllAccountsMBean</p>
<div class="ulist">
<ul>
<li>
<p>The used node time</p>
</li>
<li>
<p>The provided node time</p>
</li>
<li>
<p>The provided node count</p>
</li>
</ul>
</div>
</li>
<li>
<p>Various <strong>management operations</strong> are exposed using the ManagementMBean</p>
<div class="ulist">
<ul>
<li>
<p>Setting the accounts refresh rate</p>
</li>
<li>
<p>Refresh all accounts</p>
</li>
<li>
<p>Reload the permission policy file</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>MBean server can be accessed by remote applications using one of the two available connectors</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The standard solution based on Remote Method Invocation (RMI) protocol is the RMI Connector accessible at the following URL:
<code>service:jmx:rmi:///jndi/rmi://HOSTNAME:PORT/JMXRMAgent</code> where</p>
<div class="ulist">
<ul>
<li>
<p><strong>HOSTNAME</strong> is the hostname on which the Resource Manager is started</p>
</li>
<li>
<p><strong>PORT</strong> (5822 by default) is the port number on which the JMX RMI connector server has been started. It is defined by the property pa.rm.jmx.port .</p>
</li>
</ul>
</div>
</li>
<li>
<p>The ProActive Remote Objects Connector provides ProActive protocol aware connector accessible at the following URL:
<code>service:jmx:ro:///jndi/PA_PROTOCOL://HOSTNAME:PORT/JMXRMAgent</code> where</p>
<div class="ulist">
<ul>
<li>
<p><strong>PA_PROTOCOL</strong> is the protocol defined by the proactive.communication.protocol property</p>
</li>
<li>
<p><strong>HOSTNAME</strong> is the hostname on which the Resource Manager is started</p>
</li>
<li>
<p><strong>PORT</strong> is the protocol dependent port number usually defined by the property proactive.PA_PROTOCOL.port</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The name of the connector (JMXRMAgent by default) is defined by the property <code>rm.jmx.connectorname</code>.</p>
</div>
<div class="paragraph">
<p>The JMX URL to connect to can be obtained from the Authentication API of the Resource Manager or by reading the log file located in <code>PROACTIVE_HOME/logs/RM.log</code>.
In that log file, the address you have to retrieve is the one where the JMX RMI connector server has been started</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">[INFO 2010-06-17 10:23:27,813] [RM.AbstractJMXHelper.boot] Started JMX RMI connector server at service:jmx:rmi:///jndi/rmi://kisscool.inria.fr:5822/JMXRMAgent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once connected, you&#8217;ll get an access to Resource Manager statistics and accounting.</p>
</div>
<div class="paragraph">
<p>For example, to connect to the ProActive Scheduler JMX Agent with JConsole tool, just enter the URL of the standard RMI
Connector, as well as the username and the password.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/jmx_jconsole_connect.png" alt="jmx jconsole connect">
</div>
</div>
<div class="paragraph">
<p>Then depending on the allowed permissions browse the attributes of the MBeans.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/jmx_jconsole.png" alt="jmx jconsole">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accounting"><a class="anchor" href="ProActiveAdminGuide.html#_accounting"></a><a class="link" href="ProActiveAdminGuide.html#_accounting">10.3. Accounting</a></h3>
<div class="paragraph">
<p>The users of ProActive Scheduler request and offer nodes for computation. To keep track of how much node time was
consumed or contributed by a particular user, ProActive Scheduler associates a user to an account.</p>
</div>
<div class="paragraph">
<p>More precisely, the nodes can be manipulated by the following basic operations available to the users</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>ADD</code> operation is a registration of a node in the Resource Manager initiated by a user considered as a node provider.
A node can be added, through the API, as a result of a deployment process, through an agent or manually from the command line interface.</p>
</li>
<li>
<p>The <code>REMOVE</code> operation is the unregistration of a node from the Resource Manager.
A node can be removed, through the API, by a user or automatically if it is unreachable by the Resource Manager.</p>
</li>
<li>
<p>The <code>GET</code> operation is a node reservation, for an unknown amount of time, by a user considered as a node owner.
For example, the ProActive Scheduler can be considered as a user that reserves a node for a task computation.</p>
</li>
<li>
<p>The <code>RELEASE</code> operation on a reserved node by any user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following accounting data is gathered by the Resource Manager</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>The used node time</strong>: The amount of time other users have spent using the resources of a particular user.
More precisely, for a specific node owner, it is the sum of all time intervals from <code>GET</code> to <code>RELEASE</code>.</p>
</li>
<li>
<p><strong>The provided node time</strong>: The amount of time a user has offered resources to the Resource Manager.
More precisely, for a specific node provider, it is the sum of all time intervals from <code>ADD</code> to <code>REMOVE</code>.</p>
</li>
<li>
<p><strong>The provided node count</strong>: The number of provided nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The accounting information can be accessed only through a <strong>JMX client</strong> or the ProActive Resource Manager <strong>command line</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_metric_to_monitor_scheduler_load"><a class="anchor" href="ProActiveAdminGuide.html#_metric_to_monitor_scheduler_load"></a><a class="link" href="ProActiveAdminGuide.html#_metric_to_monitor_scheduler_load">10.4. Metric to monitor Scheduler load</a></h3>
<div class="paragraph">
<p><strong>Needed Nodes</strong> metric shows how many additional nodes the Scheduler needs to schedule all pending tasks,
e.g. there are 4 nodes and all of them are busy, but <strong>Needed Nodes</strong> shows 10, which means if you would have
14 nodes instead of 4, all of these nodes would be busy.
Please notice, that <strong>Needed Nodes</strong> shows how many more nodes could be used right now.
However, it does not give any indication about the kind of nodes needed,
e.g. Selection Script of the task could require some specific nodes,
thus <strong>Needed Nodes</strong> could be positive despite still having free nodes
(they can be inappropriate for the current task).</p>
</div>
<div class="paragraph">
<p>You can find this metric in multiple places. In RM portal you can see it in Nodes History:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/neededNodes-rm-nodeshistory.png" alt="neededNodes rm nodeshistory">
</div>
</div>
<div class="paragraph">
<p>In Nodes State:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/neededNodes-rm-nodesstate.png" alt="neededNodes rm nodesstate">
</div>
</div>
<div class="paragraph">
<p>And you can find it in RM portal detailed statistics:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/neededNodes-rm-stats.png" alt="neededNodes rm stats">
</div>
</div>
<div class="paragraph">
<p>Also, you can find <strong>Needed Nodes</strong> in the Scheduler portal where the Scheduler status is displayed:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/neededNodes-scheduler.png" alt="neededNodes scheduler">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_run_as_me_admin"><a class="anchor" href="ProActiveAdminGuide.html#_run_as_me_admin"></a><a class="link" href="ProActiveAdminGuide.html#_run_as_me_admin">11. Run Computation with a user&#8217;s system account</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>ProActive workflow Tasks can be configured to run under a user&#8217;s system account by ticking the
<a href="../user/ProActiveUserGuide.html#_run_as_me">Run as me</a> checkbox in the task configuration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/StudioRunAsMe.png" alt="RunAsMe in Studio" width="300">
</div>
</div>
<div class="paragraph">
<p>The RunAsMe mode can also be configured globally on the ProActive server. In that case, all workflow tasks from all users will be executed in RunAsMe mode.
Global RunAsMe can be configured in file <code>PROACTIVE_HOME/config/scheduler/settings.ini</code>, by enabling the following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># If true tasks are always ran in RunAsMe mode (impersonation). This automatically implies pa.scheduler.task.fork=true (other setting is ignored)
pa.scheduler.task.runasme=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, authentication is done through a <a href="ProActiveAdminGuide.html#_using_password">password</a>, but can also be configured to use a <a href="ProActiveAdminGuide.html#_using_ssh_keys">SSH key</a> or <a href="ProActiveAdminGuide.html#_using_password_less_sudo">password-less sudo</a>.</p>
</div>
<div class="paragraph">
<p>The impersonation mode is configurable for each ProActive Node, using the java property <code>pas.launcher.forkas.method</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./bin/proactive-node -Dpas.launcher.forkas.method=pwd # start a node using password impersonation
./bin/proactive-node -Dpas.launcher.forkas.method=key # start a node using SSH key impersonation
./bin/proactive-node -Dpas.launcher.forkas.method=none # start a node using password-less sudo impersonation</code></pre>
</div>
</div>
<div class="paragraph">
<p>This property can also be specified in ResourceManager <a href="ProActiveAdminGuide.html#_node_source_infrastructures">Node Source Infrastructures</a> through parameters that allow adding extra arguments to the <em>java virtual machine</em>.</p>
</div>
<div class="paragraph">
<p>Find a step by step tutorial <a href="AdminTutorials.html">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_system_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_system_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_system_configuration">11.1. System Configuration</a></h3>
<div class="paragraph">
<p>For proper execution, <strong>the user&#8217;s system account must have</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execution rights to the PROACTIVE_HOME directory and all it&#8217;s parent directories.</p>
</li>
<li>
<p>Write access to the PROACTIVE_HOME directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Logs are written during task execution, as a matter of fact, the executing user needs write access to the
PROACTIVE_HOME directory. ProActive does some tests before executing as a different user, those need full execution
rights, including the PROACTIVE_HOME parent directories.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Create a ProActive group which owns the PROACTIVE_HOME directory and has write access. Add every system user, which
executes tasks under its own system account, to the ProActive group.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On Mac OS X, the default temporary folder is not shared between all users. It is required by the RunAsMe feature.
To use a shared temporary folder, you need to set the <em>$TMPDIR</em> environment variable and the Java property <em>java.io.tmpdir</em>
to /tmp before starting the ProActive Node.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the same applies on Windows. To use a shared temporary folder, create a folder shared by all ProActive users e.g. C:\TEMP and define
the Java property <em>java.io.tmpdir</em> to C:\TEMP before starting the ProActive Node.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>proactive-node -Djava.io.tmpdir=C:\TEMP</pre>
</div>
</div>
<div class="paragraph">
<p>Extra configurations are also needed depending on the authentication method below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_password"><a class="anchor" href="ProActiveAdminGuide.html#_using_password"></a><a class="link" href="ProActiveAdminGuide.html#_using_password">11.2. Using password</a></h3>
<div class="paragraph">
<p>The ProActive Node will try to impersonate the user that submitted the task when running it. It means the
username and password must be the same between the ProActive Scheduler and the operating system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_ssh_keys"><a class="anchor" href="ProActiveAdminGuide.html#_using_ssh_keys"></a><a class="link" href="ProActiveAdminGuide.html#_using_ssh_keys">11.3. Using SSH keys</a></h3>
<div class="paragraph">
<p>To enable this authentication method, set the java system property <code>-Dpas.launcher.forkas.method=key</code> when starting a ProActive Node.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>proactive-node -Dpas.launcher.forkas.method=key</pre>
</div>
</div>
<div class="paragraph">
<p>A SSH key can be tied to the user&#8217;s account and used to impersonate the user when running a task on a given machine (using SSH).
Additionally:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>.ssh/authorized_keys</code> files of all machines must be configured to accept this SSH key.</p>
</li>
<li>
<p>The SSH key must not contain a <strong>passphrase</strong>.</p>
</li>
<li>
<p>Using this method on Windows machines is not recommended, as it requires the installation and configuration of a SSH Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When login into the scheduler portal, the private key of the user must be provided, this can be done by selecting on the login dialog: <code>More options &gt; Use SSH private key</code>.</p>
</div>
<div class="paragraph">
<p>Alternatively, a user can also add its SSH private key to <a href="../user/ProActiveUserGuide.html#_third_party_credentials">Third Party Credentials</a> under the name <code>SSH_PRIVATE_KEY</code>.
This method allows the user to login normally to the ProActive portals, without the need to enter its private key each time.</p>
</div>
<div class="paragraph">
<p>Finally, users can also authenticate to the portals with credential files.
The user must first create a credential file containing the user login, password and SSH key.</p>
</div>
<div class="paragraph">
<p>Run the following command on the ProActive server to create a credential file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ &lt;PROACTIVE_HOME&gt;/tools/proactive-create-cred -F &lt;PROACTIVE_HOME&gt;/config/authentication/keys/pub.key -l username -p userpwd -k path/to/private/sshkey -o myCredentials.cred</pre>
</div>
</div>
<div class="paragraph">
<p>This command will create an encrypted file with <strong>username</strong> as login, <strong>userpwd</strong> as password, using Scheduler public key at
<code>config/authentication/keys/pub.key</code>
for credentials encryption and using the user private SSH key at
<code>path/to/private/sshkey</code>. The new credential will be stored in <strong>myCredentials.cred</strong>.</p>
</div>
<div class="paragraph">
<p>Once created, the user must connect to the ProActive portals using this credential file. For example, in the studio portal below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/StudioCredentialsLogin.png" alt="Studio login with Credentials" width="300">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_password_less_sudo"><a class="anchor" href="ProActiveAdminGuide.html#_using_password_less_sudo"></a><a class="link" href="ProActiveAdminGuide.html#_using_password_less_sudo">11.4. Using password-less sudo</a></h3>
<div class="paragraph">
<p>This configuration, only available on linux or unix Nodes, allows the impersonation to be performed using password-less sudo.</p>
</div>
<div class="paragraph">
<p>To enable it at the system level, edit the <code>/etc/sudoers</code> file to allow password-less sudo from the account running the ProActive node
to any users which require impersonation. Password-less sudo should be enabled for any command.</p>
</div>
<div class="paragraph">
<p>For example, the following line will allow the proactive account to impersonate to any user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>proactive ALL=(ALL) NOPASSWD: ALL</pre>
</div>
</div>
<div class="paragraph">
<p>To enable this configuration on the ProActive node, start it with the system property <code>-Dpas.launcher.forkas.method=none</code></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>proactive-node -Dpas.launcher.forkas.method=none</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_applications"><a class="anchor" href="ProActiveAdminGuide.html#_web_applications"></a><a class="link" href="ProActiveAdminGuide.html#_web_applications">12. Configure Web applications</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ProActive Scheduler deploys automatically several web applications in an
embedded Jetty web server. The binaries and sources associated to the web
applications can be found in <code>PROACTIVE_HOME/dist/war</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To configure Web applications, for instance the HTTP port to use, edit the <code>PROACTIVE_HOME/config/web/settings.ini</code> file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Web applications are deployed on the host using the HTTP port 8080 by default. The local part of the URL is based on the WAR files found in <code>PROACTIVE_HOME/dist/war</code>.
For instance, the Scheduler web portal is available at <code>http://localhost:8080/scheduler</code>.</p>
</div>
<div class="sect2">
<h3 id="_enable_https"><a class="anchor" href="ProActiveAdminGuide.html#_enable_https"></a><a class="link" href="ProActiveAdminGuide.html#_enable_https">12.1. Enable HTTPS</a></h3>
<div class="paragraph">
<p>ProActive Workflows and Scheduling provides support for HTTPS. Similarly to
other web settings, HTTPS related properties are defined in
<code>PROACTIVE_HOME/config/web/settings.ini</code> and any update would require a restart
of the Scheduler instance.</p>
</div>
<div class="paragraph">
<p>Enabling HTTPS requires to set <code>web.https</code> property to <code>true</code> but also to define a path
to a valid <a href="https://en.wikipedia.org/wiki/Keystore">keystore</a> through
<code>web.https.keystore</code> along with its associated password
by using <code>web.https.keystore.password</code>. A default keystore is provided for testing purposes, however it must not be used in production.</p>
</div>
<div class="paragraph">
<p>When you are using the default keystore or a custom keystore with a self-signed
certificate you need to enable <code>web.https.allow_any_certificate</code> and optionally
<code>web.https.allow_any_hostname</code> if your certificate Common Name (CN) does not
match the fully qualified host name used for the machine hosting the Web
applications.</p>
</div>
<div class="paragraph">
<p>Port 8443 is used for listening to HTTPS connections.
This port number prevents to have root access for deploying web applications.
However, you can change it by editing <code>web.https.port</code> value.</p>
</div>
<div class="paragraph">
<p>When HTTPS is set up, you can automatically redirect any HTTP request from
users to the secured version of the protocol to make sure exchanged information
is protected. It requires to enable <code>web.redirect_http_to_https</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, you will need to update the port number used in the property <code>jp.url</code>.</p>
</div>
<div class="paragraph">
<p>Likewise, it is necessary to manually update the port number and enable HTTPS in the configuration and properties files of the web applications, as follows (example using default port 8443):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/job-planner/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.rest.url=https://localhost:8443/rest
pa.catalog.url=https://localhost:8443/catalog
pa.pca.service.base.url=https://localhost:8443/cloud-automation-service
pa.scheduling.api.url=https://localhost:8443/scheduling-api/v1/graphql</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/catalog/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.url=https://localhost:8443</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/cloud-automation-service/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.catalog.url=https://localhost:8443/catalog
pa.scheduler.rest.url=https://localhost:8443/rest/scheduler
pa.resource_manager.rest.url=https://localhost:8443/rest/rm
pa.cloud_automation_service.url=https://localhost:8443/cloud-automation-service
server.port=8443
pa.web.https.allow_any_certificate=true
pa.web.https.allow_any_hostname=true</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/notification-service/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>scheduling.url=https://localhost:8443</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/proactive-cloud-watch/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>pca.rm.url=https://localhost:8443/rest/rm
pca.service.url=https://localhost:8443/cloud-automation-service
pa.catalog.url=https://localhost:8443/catalog
pa.scheduler.rest.url=https://localhost:8443/rest</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/scheduling-api/WEB-INF/classes/application.properties</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>pa.scheduler.rest.url=https://localhost:8443/rest</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/rm/rm.conf</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>rm.rest.url=https://localhost:8443/rest
web.https.allow_any_hostname=true
web.https.allow_any_certificate=true</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/dist/war/scheduler/scheduler.conf</code></p>
</li>
</ul>
</div>
<div class="literalblock">
<div class="content">
<pre>jobplanner.rest.url=https://localhost:8443/job-planner/planned_jobs
pa.scheduling.api=https://localhost:8443/scheduling-api
sched.catalog.url=https://localhost:8443/catalog
sched.rest.url=https://localhost:8443/rest
web.https.allow_any_hostname=true
web.https.allow_any_certificate=true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are familiar with Nginx or a similar web server, you can also use
it to enable HTTPS connection to Web applications. It has the advantage to make
it possible to have ProActive web applications and additional ones to coexist.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_creating_a_valid_keystore"><a class="anchor" href="ProActiveAdminGuide.html#_creating_a_valid_keystore"></a><a class="link" href="ProActiveAdminGuide.html#_creating_a_valid_keystore">12.1.1. Creating a valid keystore</a></h4>
<div class="paragraph">
<p>Java is bundled with some utility binaries such as
<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html">keytool</a>.
This last allows to create and manage a keystore but also to generate keys and
certificates.</p>
</div>
<div class="sect4">
<h5 id="_with_a_self_signed_certificate"><a class="anchor" href="ProActiveAdminGuide.html#_with_a_self_signed_certificate"></a><a class="link" href="ProActiveAdminGuide.html#_with_a_self_signed_certificate">With a self-signed certificate</a></h5>
<div class="paragraph">
<p>Generating a new self-signed certificate imported in a new keystore with a
custom password is as simple as executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$JAVA_HOME/bin/keytool -keystore keystore -alias jetty -genkey -keyalg RSA -validity 365</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command prompts for information about the certificate and for a password to
protect both the keystore and the keys within it. The only mandatory responses
are to provide a password and the Fully Qualified Domain Name of the server. Once
done, the value for properties <code>web.https.keystore</code> and
<code>web.https.keystore.password</code> must be adapted based on the information you have
entered.</p>
</div>
<div class="paragraph">
<p>For more information, please look at the
<a href="https://wiki.eclipse.org/Jetty/Howto/Configure_SSL">Jetty documentation</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_with_a_trusted_certificate"><a class="anchor" href="ProActiveAdminGuide.html#_with_a_trusted_certificate"></a><a class="link" href="ProActiveAdminGuide.html#_with_a_trusted_certificate">With a trusted certificate</a></h5>
<div class="paragraph">
<p>The first step is to obtain a trusted certificate that is valid for your Fully
Qualified Domain Name (FQDN). This process differs from a Certification
Authority (CA) to another. In the following, it is assumed that
<a href="https://letsencrypt.org">Let&#8217;s Encrypt</a> is used. By way of illustration,
Digital Ocean provides examples for <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-centos-7">CentOS</a> and
<a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-14-04">Ubuntu</a>.</p>
</div>
<div class="paragraph">
<p>Assumming your FQDN is <em>example.org</em>, then after obtaining a certificate you will
get the following PEM-encoded files in <code>/etc/letsencrypt/live/example.org</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cert.pem: Your domain&#8217;s certificate</p>
</li>
<li>
<p>chain.pem: The Let&#8217;s Encrypt chain certificate</p>
</li>
<li>
<p>fullchain.pem: cert.pem and chain.pem combined</p>
</li>
<li>
<p>privkey.pem: Your certificate&#8217;s private key</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before loading the key and the certificate into a new keystore that is
recognized by ProActive Workflows and Scheduling, you need to combine them into
a PKCS12 format file. You can achieve this action by means of the following
OpenSSL command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">openssl pkcs12 \
    -inkey /etc/letsencrypt/live/example.org/privkey.pem \
    -in /etc/letsencrypt/live/example.org/cert.pem \
    -export -out jetty.pkcs12</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, you can load the resulting PKCS12 file into a JSSE keystore with keytool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">keytool -importkeystore -srckeystore jetty.pkcs12 \
    -srcstoretype PKCS12 -destkeystore keystore</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both commands prompt for a password. You need to use the same and set it as a
value to property <code>web.https.keystore.password</code>. The resulting <em>keystore</em> file
corresponds to the file whose path must be used for property
<code>web.https.keystore</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<a href="https://bugs.openjdk.java.net/browse/JDK-8154757">Starting from update 101</a>,
Java 8 trusts Lets Encrypt certificates. However, if you are using a less recent
version of Java for running JVMs related to ProActive Workflows and Scheduling,
you will need to update the truststore of your Java installation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_updating_java_truststore_for_accepting_lets_encrypt_certificates"><a class="anchor" href="ProActiveAdminGuide.html#_updating_java_truststore_for_accepting_lets_encrypt_certificates"></a><a class="link" href="ProActiveAdminGuide.html#_updating_java_truststore_for_accepting_lets_encrypt_certificates">12.1.2. Updating Java truststore for accepting Lets Encrypt certificates</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">sudo keytool -trustcacerts \
    -keystore $JAVA_HOME/jre/lib/security/cacerts \
    -storepass changeit \
    -noprompt \
    -importcert \
    -file /etc/letsencrypt/live/example.org/chain.pem</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enable_vnc_remote_visualization_in_the_browser"><a class="anchor" href="ProActiveAdminGuide.html#_enable_vnc_remote_visualization_in_the_browser"></a><a class="link" href="ProActiveAdminGuide.html#_enable_vnc_remote_visualization_in_the_browser">12.2. Enable VNC remote visualization in the browser</a></h3>
<div class="paragraph">
<p>The REST API web application embeds a proxy to allow the remote display visualization of a ProActive Node running a given task
via a VNC server from the browser. To enable this feature, the scheduler has to be configured as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>configure the proxy: edit the <code>PROACTIVE_HOME/config/web/settings.ini</code> file and set <code>novnc.enabled</code> to true in order
to start the proxy.</p>
</li>
<li>
<p>configure the scheduler portal to use the proxy when opening a new tab browser that shows the remote visualization:
edit the <code>PROACTIVE_HOME/dist/war/scheduler/scheduler.conf</code>.</p>
<div class="ulist">
<ul>
<li>
<p>Set <code>sched.novnc.url</code> to the public address of the proxy. This public address is the public address of the host where the sheduler is started and the port specified by the option <code>novnc.port</code> in the file <code>PROACTIVE_HOME/config/web/settings.ini</code></p>
</li>
<li>
<p>Set <code>sched.novnc.page.url</code> to the public address of the VNC client to be executed in the browser. The client is located
in the REST API with the file <code>novnc.html</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://github.com/ow2-proactive/scheduling/blob/master/rest/README-novnc.txt" class="bare">https://github.com/ow2-proactive/scheduling/blob/master/rest/README-novnc.txt</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_catalog"><a class="anchor" href="ProActiveAdminGuide.html#_catalog"></a><a class="link" href="ProActiveAdminGuide.html#_catalog">12.3. Catalog</a></h3>
<div class="paragraph">
<p>The <strong>ProActive Catalog</strong> is a component responsible for storing various objects of <strong>ProActive Workflows and Scheduling</strong> and in particular <strong>ProActive Workflows</strong>.</p>
</div>
<div class="paragraph">
<p>The ProActive Catalog features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <a class="catalogRestUrl" href="https://trydev2.activeeon.com/catalog" target="_blank">REST API</a>.</p>
</li>
<li>
<p>a comprehensive <a class="automationDashboardUrl" href="../../automation-dashboard/index.html#/portal/catalog-portal" target="_blank">Catalog Portal</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>ProActive Catalog is organized into <strong>buckets</strong>.
Each bucket has a unique name and stores zero, one or more versioned ProActive Objects.</p>
</div>
<div class="paragraph">
<p>By default, ProActive objects are persisted on disk using the embedded HSQL database.
The data is located in <code>PROACTIVE_HOME/data/db/catalog</code>.</p>
</div>
<div class="paragraph">
<p>The Catalog web service binaries are stored in <code>PROACTIVE_HOME/dist/war/catalog</code>.
This directory contains a configuration file located in <code>PROACTIVE_HOME/dist/war/catalog/WEB-INF/classes/application.properties</code>.</p>
</div>
<div class="paragraph">
<p>More information regarding the Catalog configuration can be found in the <a href="ProActiveAdminGuide.html#_catalog_properties">catalog properties</a> section.</p>
</div>
<div class="paragraph">
<p>A complete documentation of the Catalog REST API is available on the following <a class="catalogRestUrl" href="https://trydev2.activeeon.com/catalog" target="_blank">link</a>.</p>
</div>
<div class="paragraph">
<p>This documentation is automatically generated using <a href="https://swagger.io" target="_blank" rel="noopener">Swagger</a>.</p>
</div>
<div class="sect3">
<h4 id="_catalog_security_and_groups_management"><a class="anchor" href="ProActiveAdminGuide.html#_catalog_security_and_groups_management"></a><a class="link" href="ProActiveAdminGuide.html#_catalog_security_and_groups_management">12.3.1. Catalog security and groups management</a></h4>
<div class="paragraph">
<p>The Catalog authenticates REST request using a <strong>sessionID</strong> header.
This sessionID is used to share session information between various ProActive Workflows &amp; Scheduling microservices and is returned when authenticating to a <a class="restUrl" href="https://trydev2.activeeon.com/rest" target="_blank">ProActive Scheduler REST API</a>..</p>
</div>
<div class="paragraph">
<p>Every request to the Catalog must have a valid sessionID inside the request header to authenticate the user.
A role-based access control mechanism can also be defined on catalog buckets.
When creating a bucket, it can either be made <strong>public</strong> or restrained to a specific <strong>group</strong>.</p>
</div>
<div class="paragraph">
<p>Creating users and groups at the ProActive Scheduler level is explained in the <a href="ProActiveAdminGuide.html#_user_authentication">User Authentication</a> section.</p>
</div>
<div class="paragraph">
<p>A <em>public</em> bucket is automatically assigned to the <strong>public-objects</strong> group.</p>
</div>
<div class="paragraph">
<p>For example, a user which is part of the <em>interns</em> group (GROUP:interns) can see and change buckets and their contents which belong to GROUP:interns.
This user can only access to the following buckets list:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All buckets that the user created.</p>
</li>
<li>
<p>All buckets belonging to the <em>interns</em> group (GROUP:interns).</p>
</li>
<li>
<p>All <em>public</em> buckets (GROUP:public-objects).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notification_service"><a class="anchor" href="ProActiveAdminGuide.html#_notification_service"></a><a class="link" href="ProActiveAdminGuide.html#_notification_service">12.4. Notification service</a></h3>
<div class="sect3">
<h4 id="_notification_housekeeping"><a class="anchor" href="ProActiveAdminGuide.html#_notification_housekeeping"></a><a class="link" href="ProActiveAdminGuide.html#_notification_housekeeping">12.4.1. Housekeeping</a></h4>
<div class="paragraph">
<p>Notifications in the notification service have a global life span defined in the
application.properties located in
<a id="application-properties"></a> * <code>PROACTIVE_HOME/dist/war/notification-service/WEB-INF/classes/application.properties</code>
Past that time, they will be removed from the database.</p>
</div>
<div class="paragraph">
<p>Two parameters with default values may be updated:</p>
</div>
<div class="paragraph">
<p>1- The call frequency of the housekeeping defined by a CRON expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># This cron expression determines the housekeeping call frequency.
# Default value is 10 minutes: this will invoke the housekeeping mechanism
# to remove every notifications whose scheduled removal time is up.
notifications.housekeeping.cronexpression=*/10 * * * *</pre>
</div>
</div>
<div class="paragraph">
<p>2- The life span of the notifications in seconds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Automatic remove notification delay (in seconds).
# The time at which notifications will be stored in the database
# Set this time to 0 if you don't want the notifications to be removed.
# Default value is 604800 seconds = 1 week
notifications.housekeeping.removedelay=604800</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_parameter_confirmation"><a class="anchor" href="ProActiveAdminGuide.html#_user_parameter_confirmation"></a><a class="link" href="ProActiveAdminGuide.html#_user_parameter_confirmation">12.4.2. User parameter confirmation</a></h4>
<div class="paragraph">
<p>Confirmation requests can be enabled for notification methods other than Portal in order to ask the
user to confirm the parameter he provided (Email address, phone number, etc).</p>
</div>
<div class="paragraph">
<p>For Email notification method, the user won&#8217;t be able to activate it in his subscriptions before
the email is confirmed. However, Third-party notification method parameter is not mandatory and users
will still be able to activate the notification method before confirming it but the field that holds the parameter
inside the script will be empty.</p>
</div>
<div class="paragraph">
<p>To activate confirmation requests, go to the same application.properties file located
<a href="ProActiveAdminGuide.html#application-properties"><strong>here</strong></a> and set to true the properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Email confirmation</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre># Activate or deactivate email confirmation request to be used as recipient for notifications
mail.confirmation.enabled=</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For Third-party confirmation</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre># Activate or deactivate third-party confirmation request to be used as recipient for notifications
third-party.confirmation.enabled=</pre>
</div>
</div>
<div class="paragraph">
<p>Confirmation requests have a life span of 15 minutes. Once that delay is passed, expired pending confirmations
are automatically removed by the housekeeping. Users will have to resend a new confirmation request in order to confirm
the parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_email_notification_method"><a class="anchor" href="ProActiveAdminGuide.html#_email_notification_method"></a><a class="link" href="ProActiveAdminGuide.html#_email_notification_method">12.4.3. Email notification method configuration</a></h4>
<div class="paragraph">
<p>The Email notification method uses the Simple Mail Transfer Protocol to send emails.
The notification service requires a valid SMTP configuration in order to send emails.
These settings are specified in the properties file located at:
 <code>PROACTIVE_HOME/dist/war/notification-service/WEB-INF/classes/email.properties</code></p>
</div>
<div class="paragraph">
<p>All available SMTP properties are available at
<a href="https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/package-summary.html" class="bare">https://javaee.github.io/javamail/docs/api/com/sun/mail/smtp/package-summary.html</a></p>
</div>
<div class="paragraph">
<p>By default Transport Layer Security is deactivated, change to true to activate it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mail.smtp.starttls.enable=false</pre>
</div>
</div>
<div class="paragraph">
<p>Authentication to the SMTP server is enabled by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mail.smtp.auth=true</pre>
</div>
</div>
<div class="paragraph">
<p>Provide the server port used to connect</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mail.smtp.port=</pre>
</div>
</div>
<div class="paragraph">
<p>The credentials used to connect</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mail.smtp.username=
mail.smtp.password=</pre>
</div>
</div>
<div class="paragraph">
<p>The host of the SMTP server</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mail.smtp.host=</pre>
</div>
</div>
<div class="paragraph">
<p>A single email address is used by the notification service to broadcast emails.
It is defined in the application.properties file located at
<code>PROACTIVE_HOME/dist/war/notification-service/WEB-INF/classes/email.properties</code>
and is the email that will be displayed in the "From" field of the sent emails.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>notification.email.from=</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_third_party_notification_method"><a class="anchor" href="ProActiveAdminGuide.html#_third_party_notification_method"></a><a class="link" href="ProActiveAdminGuide.html#_third_party_notification_method">12.4.4. Third party notification method configuration</a></h4>
<div class="paragraph">
<p>The <a href="ProActiveAdminGuide.html#_glossary_notification_third_party"><strong>Third Party Notification</strong></a> method executes a script when an event occurs.
There can be a single script execution, regardless of how many users are notified, or <a href="ProActiveAdminGuide.html#multiple-executions-mode">mutliple executions</a>.</p>
</div>
<div class="sect4">
<h5 id="_script_location"><a class="anchor" href="ProActiveAdminGuide.html#_script_location"></a><a class="link" href="ProActiveAdminGuide.html#_script_location">Script location</a></h5>
<div class="paragraph">
<p>There are two ways to specify the location of the script.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using path: relative to the Scheduler or absolute</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>notification.script.path=dist/war/notification-service/WEB-INF/classes/exampleScript.sh</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Or a URL</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>notification.script.url=</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Note that to the <code>notification.script.url=</code> property will be used by the <a href="ProActiveAdminGuide.html#_glossary_notification_service"><strong>Notification Service</strong></a>
only if the <code>notification.script.path=</code> property is not provided. If provided the <code>notification.script.url=</code> property is ignored.
It means that the <code>notification.script.path=</code> property will always have the upper hand to indicated the location of the script to execute.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_script_engine"><a class="anchor" href="ProActiveAdminGuide.html#_script_engine"></a><a class="link" href="ProActiveAdminGuide.html#_script_engine">Script engine</a></h5>
<div class="paragraph">
<p>An optional parameter can be provided to specify the engine to be used to execute the script
if not provided the extension of the file will determine the appropriate engine to use</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#optional parameter for specifying Script Engine
notification.script.engine=bash</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="execution-mode"><a class="anchor" href="ProActiveAdminGuide.html#execution-mode"></a><a class="link" href="ProActiveAdminGuide.html#execution-mode">Execution modes</a></h5>
<div class="sect5">
<h6 id="_single_execution_mode"><a class="anchor" href="ProActiveAdminGuide.html#_single_execution_mode"></a><a class="link" href="ProActiveAdminGuide.html#_single_execution_mode">Single execution mode</a></h6>
<div class="paragraph">
<p>By default Third party notification method is configured in single execution mode.
In single execution mode, only one script execution will occur for a given notification
regardless of how many users are notified.</p>
</div>
<div class="paragraph">
<p>For example if 5 users are subscribed to the Scheduler Frozen event with the Third party notification
method active then only one script execution will take place.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#if false execute the script one time per event even if there are several subscribers
#if true execute the script for each subscribers for each event
notification.script.multiple.execution=false</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="multiple-executions-mode"><a class="anchor" href="ProActiveAdminGuide.html#multiple-executions-mode"></a><a class="link" href="ProActiveAdminGuide.html#multiple-executions-mode">Multiple executions mode</a></h6>
<div class="paragraph">
<p>To enable the multiple execution mode and access every notified users parameter inside the script, simply change to property to true.
This execution mode will trigger one execution for each notified user and, for each execution,
inject the user parameter in the script as an additional <a href="ProActiveAdminGuide.html#third-party-binding">Script binding</a>.</p>
</div>
<div class="paragraph">
<p>For example, if 5 users are subscribed to the Scheduler Frozen event with the Third party notification
method active and multiple execution enabled, then each time the  <a href="ProActiveAdminGuide.html#_glossary_proactive_scheduler"><strong>ProActive Scheduler</strong></a> freezes
the script will be executed one time per notified user so, in this example 5 times.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_script_bindings"><a class="anchor" href="ProActiveAdminGuide.html#_script_bindings"></a><a class="link" href="ProActiveAdminGuide.html#_script_bindings">Script bindings</a></h5>
<div class="sect5">
<h6 id="notification-bindings"><a class="anchor" href="ProActiveAdminGuide.html#notification-bindings"></a><a class="link" href="ProActiveAdminGuide.html#notification-bindings">Notification bindings</a></h6>
<div class="paragraph">
<p>Some relevant notification data is automatically passed to the script as bindings when executed.
It is simply needed to read the field as you would do with any other field in the used language.</p>
</div>
<div class="paragraph">
<p>In some cases, bindings might not have a value as it is not relevant.
For instance BUCKET_NAME, PROJECT_NAME, WORKFLOW_NAME are empty for Scheduler events
as they don&#8217;t depend on job execution.</p>
</div>
<div class="paragraph">
<p>Example in groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>println "Reading the notification message: " + MESSAGE</pre>
</div>
</div>
<div class="paragraph">
<p>Those bindings are passed to the script regardless of the selected <a href="ProActiveAdminGuide.html#execution-mode">execution mode</a></p>
</div>
</div>
<div class="sect5">
<h6 id="third-party-binding"><a class="anchor" href="ProActiveAdminGuide.html#third-party-binding"></a><a class="link" href="ProActiveAdminGuide.html#third-party-binding">Third-party user parameter binding</a></h6>
<div class="paragraph">
<p>When <a href="ProActiveAdminGuide.html#multiple-executions-mode">multiple execution mode</a> is activated, the user which is notified can add
an additional argument to the script. This letter parameter will be used inside the script as a new
binding named <code>args[]</code>.
To access the user parameter in the script, like for <a href="ProActiveAdminGuide.html#notification-bindings">notification bindings</a>, simply read the array.</p>
</div>
<div class="paragraph">
<p>Example in groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>println "User parameter equals: " + args[0];</pre>
</div>
</div>
<div class="paragraph">
<p>The image below shows where a user may provide a parameter in the notification-portal.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/notification-third-party-input.png" alt="notification third party input">
</div>
<div class="title">Figure 11. Third-party user parameter input</div>
</div>
</div>
<div class="sect5">
<h6 id="_table_of_bindings"><a class="anchor" href="ProActiveAdminGuide.html#_table_of_bindings"></a><a class="link" href="ProActiveAdminGuide.html#_table_of_bindings">Table of bindings</a></h6>
<div class="paragraph">
<p>In the following table are specified all available fields that can be read in the script
and if they have a value depending on the event origin.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Binding holds a value regarding event type (Y = Yes , N = No)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Field name</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Job</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Task</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Scheduler</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Job planner</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USER_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EVENT_TYPE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JOB_ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TASK_ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TASK_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATED_BY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MESSAGE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATION_DATE</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JOB_OWNER</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BUCKET_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROJECT_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WORKFLOW_NAME</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SEVERITY</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JOB_LINK</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">N</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">args[] - see <a href="ProActiveAdminGuide.html#multiple-executions-mode">multiple executions mode</a></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Y</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_script_engines"><a class="anchor" href="ProActiveAdminGuide.html#_script_engines"></a><a class="link" href="ProActiveAdminGuide.html#_script_engines">13. Configure script engines</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most script engines do not need any configuration. This section talks about the script engines which can be configured
individually.</p>
</div>
<div class="sect2">
<h3 id="_docker_compose_docker_task"><a class="anchor" href="ProActiveAdminGuide.html#_docker_compose_docker_task"></a><a class="link" href="ProActiveAdminGuide.html#_docker_compose_docker_task">13.1. Docker Compose (Docker task)</a></h3>
<div class="paragraph">
<p>The Docker Compose script engine is a wrapper around the Docker Compose command. It needs to have Docker Compose
 and Docker installed, in order to work. The Docker Compose script engine has a configuration file which configures each ProActive Node individually.
The configuration file is in <code>PROACTIVE_HOME/config/scriptengines/docker-compose.properties</code>.<br>
<code>docker-compose.properties</code> has the following configuration options:</p>
</div>
<hr>
<div class="paragraph">
<p>docker.compose.command=[docker-compose executable example:/usr/local/bin/docker-compose]
---
Defines which Docker Compose executable is used by the script engine.</p>
</div>
<hr>
<div class="paragraph">
<p>docker.compose.sudo.command=[sudo executable example:/usr/bin/sudo]
---
Defines the sudo executable which is used. The sudo property is used to give the Docker Compose command root rights.</p>
</div>
<hr>
<div class="paragraph">
<p>docker.compose.use.sudo=false
---
Defines whether to execute Docker Compose with sudo [true] or without sudo [false]</p>
</div>
<hr>
<div class="paragraph">
<p>docker.host=
---
Defines the DOCKER_HOST environment variable. The DOCKER_HOST variable defines the Docker socket which the Docker client connects to.
That property is useful when accessing a Docker daemon which runs inside a container or on a remote machine.
Further information about the DOCKER_HOST property can be found <a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">in the official Docker documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_perl_scripts_execution_perl_task"><a class="anchor" href="ProActiveAdminGuide.html#_perl_scripts_execution_perl_task"></a><a class="link" href="ProActiveAdminGuide.html#_perl_scripts_execution_perl_task">13.2. Perl scripts execution (Perl task)</a></h3>
<div class="paragraph">
<p>Perl should be installed on your machine. By default the perl engine is installed in Linux and Mac Os. Please install the perl engine on Windows.<br>
The execution mechanism of perl tasks is based on running perl files on your machine.</p>
</div>
<div class="paragraph">
<p>If you encountered the issues, please check if you have installed Perl properly on you machine.
In order to verify this you can follow the next steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For example you should to be able to launch the command 'perl -V'.</p>
</li>
<li>
<p>Then from command line you should be able to launch a simple perl file (perl yourPerlFile.pl).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_python_script_engine_python_task"><a class="anchor" href="ProActiveAdminGuide.html#_python_script_engine_python_task"></a><a class="link" href="ProActiveAdminGuide.html#_python_script_engine_python_task">13.3. Python Script Engine (Python task)</a></h3>
<div class="paragraph">
<p>Python should be installed on your machine. By default Python2 is installed on Linux and Mac OS. If another version of Python is required,
it should be installed on your machine in advance.</p>
</div>
<div class="paragraph">
<p>More over, the native Python Script Engine depends on the py4j library in order to communicate with our Java classes. Please follow the following step to install it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With Python2: <code>pip install py4j</code></p>
</li>
<li>
<p>With Python3: <code>pip3 install py4j</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Further information can be found <a href="https://www.py4j.org/install.html" target="_blank" rel="noopener">in the official py4j documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduling_policies"><a class="anchor" href="ProActiveAdminGuide.html#_scheduling_policies"></a><a class="link" href="ProActiveAdminGuide.html#_scheduling_policies">14. Extending ProActive Scheduling Policy</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to decide which pending Tasks are executed, the ProActive Scheduler uses a <a href="ProActiveAdminGuide.html#_glossary_scheduling_policy"><strong>Scheduling Policy</strong></a>.</p>
</div>
<div class="paragraph">
<p>This policy allows, for example, to execute task in a First-In-First-Out order or according to priorities.</p>
</div>
<div class="paragraph">
<p>The default Scheduling Policy can be extended to perfectly fit with an organization scheduling constraints.</p>
</div>
<div class="paragraph">
<p>Moreover, policy can be changed dynamically throught Java API <code>org.ow2.proactive.scheduler.common.Scheduler::changePolicy(String policyClassName)</code>.</p>
</div>
<div class="paragraph">
<p>In the following example, we show how a different policy can be used to control Task Scheduling.</p>
</div>
<div class="sect2">
<h3 id="_earliest_deadline_first_edf_policy"><a class="anchor" href="ProActiveAdminGuide.html#_earliest_deadline_first_edf_policy"></a><a class="link" href="ProActiveAdminGuide.html#_earliest_deadline_first_edf_policy">14.1. Earliest deadline first (EDF) policy</a></h3>
<div class="paragraph">
<p>To use the earliest deadline first (EDF) policy,  edit the file <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> and change the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.ExtendedSchedulerPolicy</pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.edf.EDFPolicyExtended</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_license_policy_example"><a class="anchor" href="ProActiveAdminGuide.html#_license_policy_example"></a><a class="link" href="ProActiveAdminGuide.html#_license_policy_example">14.2. License Policy Example</a></h3>
<div class="paragraph">
<p>To use the LicenseSchedulingPolicy, edit the file <code>PROACTIVE_HOME/config/scheduler/settings.ini</code> and change the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.ExtendedSchedulerPolicy</pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pa.scheduler.policy=org.ow2.proactive.scheduler.policy.license.LicenseSchedulingPolicy</pre>
</div>
</div>
<div class="paragraph">
<p>The LicenseSchedulingPolicy requires an extra configuration: the maximum number of licenses per software must be specified into
<code>PROACTIVE_HOME/config/scheduler/license.properties</code> like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>software_A = 3
software_B = 2</pre>
</div>
</div>
<div class="paragraph">
<p>From now, at a job or a task level, user can specify which software licenses are required, by adding the REQUIRED_LICENSES generic information,
which value can be</p>
</div>
<div class="listingblock">
<div class="content">
<pre>softwareA,softwareB</pre>
</div>
</div>
<div class="paragraph">
<p>As expected, if 10 tasks requiring software_A,software_B licenses are submitted, they will be executed 2 by 2, according to the software with the fewest licenses.
The same logic is applied at the job level, whatever the number of tasks composing each job, since all tasks of the same job share the same license.
Moreover, user can combine both levels.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_addons"><a class="anchor" href="ProActiveAdminGuide.html#_addons"></a><a class="link" href="ProActiveAdminGuide.html#_addons">15. Addons</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_get_notifications"><a class="anchor" href="ProActiveAdminGuide.html#_get_notifications"></a><a class="link" href="ProActiveAdminGuide.html#_get_notifications">15.1. Get Notification on Job Events Configuration</a></h3>
<div class="paragraph">
<p>In order to enable this functionality the following properties should be set in <code>config/scheduler/setting.ini</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pa.scheduler.notifications.email.enabled = true
pa.scheduler.notifications.email.from = username@example.com</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure the email sender on Scheduler, the configuration file <code>config/scheduler/emailnotification.properties</code> should be filled in, please refer to
<a href="ProActiveAdminGuide.html#_smtp_configuration_examples">SMTP configuration examples</a> for examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="_email_notification"><a class="anchor" href="ProActiveAdminGuide.html#_email_notification"></a><a class="link" href="ProActiveAdminGuide.html#_email_notification">15.2. Email notification</a></h3>
<div class="paragraph">
<p>The email notification addons includes an utility Java class but also a Groovy
task (accessible from the Studio Web app) that allow to send an email
from a ProActive Workflow.</p>
</div>
<div class="paragraph">
<p>The task assumes that configuration for connecting to an SMTP server is done using
third-party credentials. It requires to define some values as key/value pairs in the third-party
credentials associated to the user that runs the task.</p>
</div>
<div class="paragraph">
<p>This configuration can be achieved from the Scheduler Web portal, the
ProActive client or even through the REST API. Please see
<a href="../user/ProActiveUserGuide.html#_third_party_credentials">Third-party credentials</a> for more information.</p>
</div>
<div class="sect3">
<h4 id="_smtp_configuration_examples"><a class="anchor" href="ProActiveAdminGuide.html#_smtp_configuration_examples"></a><a class="link" href="ProActiveAdminGuide.html#_smtp_configuration_examples">15.2.1. SMTP configuration examples</a></h4>
<div class="sect4">
<h5 id="_free"><a class="anchor" href="ProActiveAdminGuide.html#_free"></a><a class="link" href="ProActiveAdminGuide.html#_free">Free</a></h5>
<table class="tableblock frame-ends grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.free.fr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:user@free.fr">user@free.fr</a></p></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_password</p></td>
</tr>
</tfoot>
</table>
</div>
<div class="sect4">
<h5 id="_gmail"><a class="anchor" href="ProActiveAdminGuide.html#_gmail"></a><a class="link" href="ProActiveAdminGuide.html#_gmail">Gmail</a></h5>
<div class="paragraph">
<p>Password authentication to Google servers requires extra configuration.</p>
</div>
<div class="paragraph">
<p>See <a href="https://www.google.com/settings/security/lesssecureapps" class="bare">https://www.google.com/settings/security/lesssecureapps</a>.</p>
</div>
<table class="tableblock frame-ends grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.starttls.enable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.ssl.trust</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp.gmail.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:user@gmail.com">user@gmail.com</a></p></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_password</p></td>
</tr>
</tfoot>
</table>
</div>
<div class="sect4">
<h5 id="_outlook"><a class="anchor" href="ProActiveAdminGuide.html#_outlook"></a><a class="link" href="ProActiveAdminGuide.html#_outlook">Outlook</a></h5>
<div class="paragraph">
<p>Password authentication to Microsoft servers requires extra configuration.</p>
</div>
<table class="tableblock frame-ends grid-all" style="width: 60%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp-mail.outlook.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.starttls.enable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.ssl.trust</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">smtp-mail.outlook.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:user@gmail.com">user@gmail.com</a></p></td>
</tr>
</tbody>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mail.smtp.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_password</p></td>
</tr>
</tfoot>
</table>
<div class="paragraph">
<p>If the above settings do not succeed, check in the scheduler logs any errors related to email sending.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_statistics_on_proactive_jobs_and_resource_usage"><a class="anchor" href="ProActiveAdminGuide.html#_statistics_on_proactive_jobs_and_resource_usage"></a><a class="link" href="ProActiveAdminGuide.html#_statistics_on_proactive_jobs_and_resource_usage">15.3. Statistics on ProActive Jobs and Resource Usage</a></h3>
<div class="paragraph">
<p>This addon generates a gantt chart to visualize executions of jobs and tasks, per node and over the time.</p>
</div>
<div class="sect3">
<h4 id="_installation"><a class="anchor" href="ProActiveAdminGuide.html#_installation"></a><a class="link" href="ProActiveAdminGuide.html#_installation">15.3.1. Installation</a></h4>
<div class="paragraph">
<p>To enable this addon, a Node connected to the Resource Manager must have access to the PA_PLOT application configured in it.</p>
</div>
<div class="sect4">
<h5 id="_requirements"><a class="anchor" href="ProActiveAdminGuide.html#_requirements"></a><a class="link" href="ProActiveAdminGuide.html#_requirements">Requirements</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Linux, Windows, or MacOSX.</p>
</li>
<li>
<p>Python 2.7 or 3.5.</p>
</li>
<li>
<p>Bokeh, dateutil, requests, pytest, sphinx.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_requirements_setup_with_anaconda"><a class="anchor" href="ProActiveAdminGuide.html#_requirements_setup_with_anaconda"></a><a class="link" href="ProActiveAdminGuide.html#_requirements_setup_with_anaconda">Requirements setup with Anaconda</a></h5>
<div class="paragraph">
<p>Anaconda is the fastest and easiest way to install all requirements.
You do not need internet access on the installation host.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install <a href="https://www.anaconda.com/distribution">Anaconda</a></p>
</li>
<li>
<p>Linux/MacOSX::</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">source &lt;anaconda root&gt;/bin/activate</code></pre>
</div>
</div>
</li>
<li>
<p>Windows:</p>
<div class="literalblock">
<div class="content">
<pre>Run "Anaconda Prompt"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_requirements_setup_with_miniconda"><a class="anchor" href="ProActiveAdminGuide.html#_requirements_setup_with_miniconda"></a><a class="link" href="ProActiveAdminGuide.html#_requirements_setup_with_miniconda">Requirements setup with Miniconda</a></h5>
<div class="paragraph">
<p>Miniconda is a stripped down version of Anaconda, much smaller in size.
The downside is that it normally requires internet access on the machine where it is installed.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and install <a href="https://conda.io/miniconda.html">Miniconda</a></p>
</li>
<li>
<p>If behind a proxy, compile <a href="https://conda.io/docs/config.html">condarc</a></p>
</li>
<li>
<p>Linux/MacOSX::</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">source &lt;anaconda root&gt;/bin/activate</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Windows:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Run "Anaconda Prompt"</pre>
</div>
</div>
</li>
<li>
<p>Execute::</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">conda install -y python-dateutil bokeh requests</code></pre>
</div>
</div>
</li>
<li>
<p>Addional optional dependencies to run the unit tests:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Python 2.7</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">conda install -y pytest mock</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">Python 3.5</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">conda install -y pytest</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Additional optional dependencies to regenerate the documentation::</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">conda install -y sphinx</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_pa_plot_installation"><a class="anchor" href="ProActiveAdminGuide.html#_pa_plot_installation"></a><a class="link" href="ProActiveAdminGuide.html#_pa_plot_installation">pa_plot installation</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Source Anaconda environment (see previous steps)</p>
</li>
<li>
<p>Unpack :file:`pa_plot.tar.gz` and move to the :file:`pa_plot` directory</p>
</li>
<li>
<p>Execute::</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">python setup.py install</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_servicenow_integration"><a class="anchor" href="ProActiveAdminGuide.html#_servicenow_integration"></a><a class="link" href="ProActiveAdminGuide.html#_servicenow_integration">15.4. ServiceNow integration</a></h3>
<div class="paragraph">
<p><strong>Product Name:</strong> ServiceNow<br>
<strong>Product Version:</strong> <a href="https://docs.servicenow.com/bundle/quebec-release-notes/page/release-notes/family-release-notes.html" target="_blank" rel="noopener">Quebec</a><br>
<strong>Latest Release compatibility:</strong> <a href="https://docs.servicenow.com/bundle/tokyo-release-notes/page/release-notes/family-release-notes.html" target="_blank" rel="noopener">Tokyo</a><br></p>
</div>
<div class="sect3">
<h4 id="_overview_2"><a class="anchor" href="ProActiveAdminGuide.html#_overview_2"></a><a class="link" href="ProActiveAdminGuide.html#_overview_2">15.4.1. Overview</a></h4>
<div class="paragraph">
<p>The ServiceNow integration provides means to establish a bidirectional communication
between a ProActive server, and a ServiceNow instance. Here we describe how to install
the integration in a ServiceNow instance and how to communicate with a ProActive server.</p>
</div>
<div class="paragraph">
<p>To learn how to communicate from ServiceNow to ProActive using ServiceNow&#8217;s REST API, please
refer to the <a href="https://trydev2.activeeon.com/user/references/ApplicationConnectors.adoc#_servicenow_user_doc">ServiceNow user documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_objectives"><a class="anchor" href="ProActiveAdminGuide.html#_objectives"></a><a class="link" href="ProActiveAdminGuide.html#_objectives">15.4.2. Objectives</a></h4>
<div class="paragraph">
<p>The goal is to provide templates and coding elements to help ServiceNow and ProActive users to easily integrate both solutions in their pipelines.</p>
</div>
<div class="paragraph">
<p>It boils down to:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide reusable code in ServiceNow to query ProActive&#8217;s REST APIs.</p>
</li>
<li>
<p>Provide workflows in ProActive&#8217;s catalog to query ServiceNow&#8217;s REST APIs.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_installation_2"><a class="anchor" href="ProActiveAdminGuide.html#_installation_2"></a><a class="link" href="ProActiveAdminGuide.html#_installation_2">15.4.3. Installation</a></h4>
<div class="paragraph">
<p>This section describes the available processes to set up the required files in ServiceNow to communicate
with ProActive. The preferred installation process is dictated by the architecture of your application ecosystem
in ServiceNow. Either ProActive&#8217;s integration will have a dedicated ServiceNow application, or it will be combined with an existing one.
ServiceNow being an application-based solution, the natural approach is to create a dedicated ProActive application.
If you want to incorporate this integration in another application that already exists, you will have to manually
create files in the host application, which means copying code blocks and ServiceNow files that will be presented in the next sections.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the latter process is chosen, you can always install the ProActive application in a ServiceNow test instance to look at the
application&#8217;s files and use them as templates as well as copy their code blocks.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_import_from_source_control"><a class="anchor" href="ProActiveAdminGuide.html#_import_from_source_control"></a><a class="link" href="ProActiveAdminGuide.html#_import_from_source_control">Import from source control</a></h5>
<div class="paragraph">
<p>Working from an online repository is the most convenient and durable way to proceed. It greatly eases the
backup, update and distribution of the application&#8217;s versions across ServiceNow instances. This method requires
you to have git installed on your local system.</p>
</div>
<div class="paragraph">
<p>Here are the steps to get started from source control and lay down the application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><span class="underline">Define the online repository</span></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In your preferred git hosting service, create a new private repository</p>
</li>
<li>
<p>Make sure that all users acting on the repository have the write and read permissions</p>
</li>
</ol>
</div>
</li>
<li>
<p><span class="underline">Add the application&#8217;s files</span></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download the <a href="https://trydev2.activeeon.com/admin/references/servicenow/servicenow-proactive-application.zip">Application&#8217;s files</a> as a zip archive</p>
</li>
<li>
<p><code>git clone</code> the newly created repository on your local system</p>
</li>
<li>
<p>Add the applications file to the project and add them in git with <code>git add</code></p>
</li>
<li>
<p><code>git commit</code> the changes</p>
</li>
<li>
<p><code>git push origin master</code> to push the changes to the online repository. (You will be able to create and navigate through branches directly from ServiceNow)</p>
</li>
</ol>
</div>
</li>
<li>
<p><span class="underline">Import the application in ServiceNow</span></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Connect to ServiceNow as an administrator and:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a new Credential record that ServiceNow will use to connect to the online repository:</p>
<div class="ulist">
<ul>
<li>
<p>Click on the <em>Credentials</em> item of the <em>Connections &amp; Credentials</em> menu</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-credentials-menu.png" alt="servicenow credentials menu" width="200">
</div>
</div>
</li>
<li>
<p>Click on <em>New</em> to start creating a new record</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-credentials-records.png" alt="servicenow credentials records">
</div>
</div>
</li>
<li>
<p>Click on <em>Basic Auth Credentials</em></p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-credentials-basic-auth.png" alt="servicenow credentials basic auth" width="350">
</div>
</div>
</li>
<li>
<p>Fill in the fields and click on <em>Submit</em></p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-credentials-new-record.png" alt="servicenow credentials new record">
</div>
</div>
<div class="paragraph">
<p>The remote repository Credential is now created.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Go to the Studio, under <em>System Applications</em> &#8594; <em>Studio</em></p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-studio-select.png" alt="servicenow studio select">
</div>
</div>
</li>
<li>
<p>Click <em>Import from source control</em></p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-import-from-source-control.png" alt="servicenow import from source control">
</div>
</div>
</li>
<li>
<p>Fill at least the required URL and Credential fields</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-import-from-source-control-definition.png" alt="servicenow import from source control definition">
</div>
</div>
</li>
<li>
<p>Click <em>Import</em>. When the application import is completed, click the <em>Select Application button</em>.</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-imported-from-source-control.png" alt="servicenow imported from source control">
</div>
</div>
</li>
<li>
<p>In the Select Application dialog, click the link to the new application to open it for editing in Studio.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to customize the application, it is better to create a new branch and start working from there.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><span class="underline">Create a new branch</span></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In Studio, open the <em>Source Control</em> menu and select the <em>Create Branch</em> menu item.</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-create-branch.png" alt="servicenow create branch">
</div>
</div>
</li>
<li>
<p>Configure the branch.</p>
<div class="literalblock">
<div class="content">
<pre>Branch Name: branchName
Create from Tag: -- None --</pre>
</div>
</div>
</li>
<li>
<p>Click the <em>Create Branch</em> button.</p>
</li>
<li>
<p>Click the <em>Close</em> button.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To load the application files included in the tag, return to the main ServiceNow browser tab (not Studio) and click the browser&#8217;s reload button to refresh the page.</p>
</div>
</div>
<div class="sect4">
<h5 id="_upload_an_update_set"><a class="anchor" href="ProActiveAdminGuide.html#_upload_an_update_set"></a><a class="link" href="ProActiveAdminGuide.html#_upload_an_update_set">Upload an Update Set</a></h5>
<div class="paragraph">
<p>Although it is not recommended by ServiceNow, you can download the following Update Set and import it into a ServiceNow instance
to create an application. An Update Set describes and contains all application&#8217;s files and is specific to ServiceNow.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://trydev2.activeeon.com/admin/references/servicenow/update_set_21813bcd2f9c91103c5d9facf699b605.xml">Download the Update Set</a>.</p>
</li>
<li>
<p>Go to <em>Retrieved Update Sets</em> under <em>System Update Sets</em></p>
</li>
<li>
<p>Click on <em>Import Update Set from XML</em></p>
</li>
<li>
<p>Select the Update Set you just downloaded</p>
</li>
<li>
<p>Click on <em>Upload</em> and wait for the upload to complete</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Retrieved Update Set table should be displayed with the freshly uploaded file named <em>ProActive Workflows &amp; Scheduling</em></p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Click on the Update Set Name to open it.</p>
</li>
<li>
<p>Click on <em>Preview Update Set</em> and wait for the preview to finish.<br>
This step is important as it compares an update set retrieved from a remote instance to
updates on the local instance to detect potential conflicts. You must preview an update set and address all problems before you can commit the update set.</p>
</li>
<li>
<p>Once finished, click on <em>Close</em></p>
</li>
<li>
<p>Problems will appear because some tables and records don&#8217;t exist in your instance and ServiceNow doesn&#8217;t like that.
That&#8217;s because we are installing an application and not updating it. We can ignore them and commit the changes.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select all errors by clicking on the top left checkbox (this selects all the displayed errors)</p>
</li>
<li>
<p>Click on <em>Accept remote changes</em> on the top right</p>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-accept-remote-update.png" alt="servicenow accept remote update">
</div>
</div>
</li>
<li>
<p>Repeat step a. and b. if errors remain</p>
</li>
</ol>
</div>
</li>
<li>
<p>Once all problems have been addressed, Click <em>Commit Update Set</em></p>
</li>
<li>
<p>Click Confirm data loss and wait for the commit to finish</p>
</li>
<li>
<p>Once again, and for the same reason ServiceNow will inform us of errors</p>
</li>
<li>
<p>Click on <em>Show Commit Log</em> and check that all records are of "Info" status</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Set a filter as shown and click on <em>Run</em> to apply it.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/servicenow-search-by-status.png" alt="servicenow search by status">
</div>
</div>
<div class="paragraph">
<p>Result should be empty.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usage"><a class="anchor" href="ProActiveAdminGuide.html#_usage"></a><a class="link" href="ProActiveAdminGuide.html#_usage">15.4.4. Usage</a></h4>
<div class="paragraph">
<p>Once the application is imported in your ServiceNow instances, the two-way communication between ProActive and ServiceNow is ready.</p>
</div>
<div class="paragraph">
<p>Please refer to the <a href="https://trydev2.activeeon.com/user/references/ApplicationConnectors.html#_servicenow_user_doc">User documentation</a> to look at:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The available ServiceNow workflows in ProActive&#8217;s catalog</p>
</li>
<li>
<p>How to use ProActive client in a ServiceNow instance</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduler_start_tuning"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_start_tuning"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_start_tuning">16. Scheduler start tuning</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scheduler start can be customized by automatically triggering user&#8217;s scripts.
A list of scripts can be specified in <code>PROACTIVE_HOME/config/scheduler/settings.ini</code>
following this</p>
</div>
<div class="paragraph">
<p><code>pa.scheduler.startscripts.paths=/your/script1/path;/your/script2/path;/your/script3/path</code></p>
</div>
<div class="paragraph">
<p>For example, load-examples.groovy which is executed by default at scheduler start, has in charge
the full deployment of proactive-examples by: populating the running Catalog, exposing as templates
specific workflows and copying workflows dependencies into dataspaces.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_custom_third_party_libraries_to_proactive_server_and_nodes_classpath"><a class="anchor" href="ProActiveAdminGuide.html#_add_custom_third_party_libraries_to_proactive_server_and_nodes_classpath"></a><a class="link" href="ProActiveAdminGuide.html#_add_custom_third_party_libraries_to_proactive_server_and_nodes_classpath">17. Add custom third-party libraries to ProActive server and Nodes classpath</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some workflows may need to use third-party libraries, so they can be executed properly. In order to do that, the first option is to add those libraries to the global classpath of ProActive server or Nodes.
Depending on how Nodes are started, libraries can be added in the ProActive server or the Nodes classpath in three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Nodes are running on the same host as ProActive server or on a different host with a shared Proactive installation, the libraries can be placed under the addons directory of the server (i.e., $PROACTIVE_HOME/addons);</p>
</li>
<li>
<p>If Nodes are running on different hosts than ProActive Server and do not share a common proactive installation (such as NFS), the libraries can be placed under the addons directory of the Node (i.e., $PROACTIVE_NODE/addons);</p>
</li>
<li>
<p>If Nodes are running on different hosts than ProActive Server, and such Nodes are started using the executable jar 'node.jar' (usually used for cloud infrastructure), the libraries can be placed inside the lib folder of the node.jar archive itself, which is located on the server installation under $PROACTIVE_HOME/dist/war/rest (the node.jar is downloaded dynamically by the node).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second option is to add those libraries dynamically for a given task execution. Please refer to the User guide documentation to learn how to add <a href="../user/ProActiveUserGuide.html#_fork_environment">additional classpath</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance_tuning"><a class="anchor" href="ProActiveAdminGuide.html#_performance_tuning"></a><a class="link" href="ProActiveAdminGuide.html#_performance_tuning">18. Performance tuning</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_perf_tuning_db"><a class="anchor" href="ProActiveAdminGuide.html#_perf_tuning_db"></a><a class="link" href="ProActiveAdminGuide.html#_perf_tuning_db">18.1. Database</a></h3>
<div class="paragraph">
<p>By default, ProActive Scheduler is configured to use <a href="http://hsqldb.org">HSQLDB</a>
embedded database. This last is lightweight and does not require complex
configuration. However, it cannot compete with more conventional database
management systems, especially when the load increases. Consequently, it is
recommended to setup an RDBMS such as <a href="https://mariadb.com">MariaDB</a>,
<a href="https://www.postgresql.org/">Postgres</a> or
<a href="https://www.microsoft.com/en-us/sql-server/">SQL Server</a> if
you care about performance or notice a slowdown.</p>
</div>
<div class="paragraph">
<p>ProActive Workflows and Scheduling distribution is provided with several
samples for configuring the Scheduler and Resource Manager to use most
standard RDBMS.
You can find these examples in <code>PROACTIVE_HOME/config/rm/templates/</code> and
<code>PROACTIVE_HOME/config/scheduler/templates/</code> folders.</p>
</div>
<div class="sect3">
<h4 id="_indexes"><a class="anchor" href="ProActiveAdminGuide.html#_indexes"></a><a class="link" href="ProActiveAdminGuide.html#_indexes">18.1.1. Indexes</a></h4>
<div class="paragraph">
<p>The Scheduler and RM databases rely on Hibernate to create and update the
database schema automatically on startup. Hibernate is configured for adding
indexes on frequently used columns, including columns associated to foreign
keys. The goal is to provide a default configuration that behaves in a
satisfactory manner with the different features available in the Scheduler.
For instance, the Jobs housekeeping feature requires indexes on most foreign
keys since a Job deletion may imply several cascade delete.</p>
</div>
<div class="paragraph">
<p>Unfortunately, each database vendor implements its own strategy regarding
indexes on foreign keys.  Thus, some databases such as <em>MariaDB</em> and <em>MySQL</em>
automatically add indexes for foreign keys whereas some others like <em>Postgres</em>
or <em>Oracle</em> do not add such indexes by default. Besides, Hibernate does not
offer control over this strategy.
As a consequence, this difference of behaviour, once linked to our default
configuration for Hibernate, may lead to duplicate indexes (two indexes with
different names for a same column) that are created for columns in RM and
Scheduler tables.</p>
</div>
<div class="paragraph">
<p>In case you are using in production <em>MySQL</em>, <em>MariaDB</em> or a similar database
that automatically adds indexes on foreign keys, it is strongly recommended to
ask your DBA to identify and delete duplicate indexes created by the database
system since they may hurt performances.</p>
</div>
</div>
<div class="sect3">
<h4 id="_database_impact_on_job_submission_performance"><a class="anchor" href="ProActiveAdminGuide.html#_database_impact_on_job_submission_performance"></a><a class="link" href="ProActiveAdminGuide.html#_database_impact_on_job_submission_performance">18.1.2. Database impact on job submission performance</a></h4>
<div class="paragraph">
<p>The choice of the database provider can influence the Scheduler and Resource Manager performance overall.
In the following figure, we see the job submission time between different database providers:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/job-submission-time-comparison.png" alt="job submission time comparison">
</div>
</div>
<div class="paragraph">
<p>On a 1000-jobs submission basis across ProActive&#8217;s embedded database, the in-memory database and a standalone PostgreSQL server,
we can see that the in-memory database is in fact faster and more consistent in speed than the default embedded database.
However the in-memory database has no persistence of the data on disk, as opposed to the embedded database.
A standalone database is a good tradeoff between speed and data resilience.</p>
</div>
<div class="paragraph">
<p>The embedded database is used by default in ProActive. To switch to an in-memory database, you need to modify the following files:</p>
</div>
<div class="paragraph">
<p><code>PROACTIVE_HOME/config/scheduler/database.properties</code>:</p>
</div>
<div class="paragraph">
<p>Replace the default value of <code>hibernate.connection.url</code> to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.url=jdbc:hsqldb:mem:scheduler;hsqldb.tx=mvcc;hsqldb.lob_file_scale=1</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>PROACTIVE_HOME/config/rm/database.properties</code>:</p>
</div>
<div class="paragraph">
<p>Replace the default value of <code>hibernate.connection.url</code> to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">hibernate.connection.url=jdbc:hsqldb:mem:rm;hsqldb.tx=mvcc;hsqldb.lob_file_scale=1</code></pre>
</div>
</div>
<div class="paragraph">
<p>To switch to a standalone database, see <a href="ProActiveAdminGuide.html#_perf_tuning_db">Database</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_database_impact_on_task_creation_performance"><a class="anchor" href="ProActiveAdminGuide.html#_database_impact_on_task_creation_performance"></a><a class="link" href="ProActiveAdminGuide.html#_database_impact_on_task_creation_performance">18.1.3. Database impact on task creation performance</a></h4>
<div class="paragraph">
<p>The choice of the database provider influences task creation time.
In the following figure, we see the task creation time for different database providers:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/grouped-bar-direct-labels.png" alt="grouped bar direct labels">
</div>
</div>
<div class="paragraph">
<p>Each experiment, consists of submitting one replicated job with some number of replicated tasks, and measuring
time to create all these replicated tasks.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tuning_linux_for_15k_nodes"><a class="anchor" href="ProActiveAdminGuide.html#_tuning_linux_for_15k_nodes"></a><a class="link" href="ProActiveAdminGuide.html#_tuning_linux_for_15k_nodes">18.2. Tuning Linux for 15K nodes</a></h3>
<div class="paragraph">
<p>It is necessary to tune underlying Linux system, in case there will be plenty of nodes in the Resource Manager.</p>
</div>
<div class="paragraph">
<p>It is mandatory to allow having a large number of running processes and open files.</p>
</div>
<div class="paragraph">
<p>For example, on 15.000 nodes, the recommended ulimit settings for running processes and open files are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">nproc soft/hard 100000
nofile soft/hard 65536</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, we recommend to have at least 16GB RAM for 15.000 nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_housekeeping"><a class="anchor" href="ProActiveAdminGuide.html#_housekeeping"></a><a class="link" href="ProActiveAdminGuide.html#_housekeeping">18.3. Housekeeping</a></h3>
<div class="paragraph">
<p>The Scheduler provides a housekeeping mechanism that periodically removes finished jobs
from the Scheduler and Workflow Execution portals. It also removes associated logs and all job data from the database to save space.
This mechanism has two phases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once a job is finished, it sets its scheduled time for removal (the job expiration date)</p>
</li>
<li>
<p>Actual cleaning of expired jobs from the scheduler and/or the database will be periodically triggered and performed in a bulk operation</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can configure housekeeping with the following parameters located in <a href="ProActiveAdminGuide.html#_scheduler_properties">the scheduler config file</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pa.scheduler.core.automaticremovejobdelay</code> : delay in seconds to remove a terminated job.</p>
</li>
<li>
<p><code>pa.scheduler.core.automaticremove.errorjob.delay</code> : delay in seconds to remove a job terminated with errors.</p>
</li>
<li>
<p><code>pa.scheduler.core.removejobdelay</code> : instead of using job termination time to initiate the delay, use the result retrieval time (for example, when a user opens the job results in the scheduler portal).</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Additionally, you can configure a remove delay for individual job execution using the <a href="../user/ProActiveUserGuide.html#_remove_delay"><code>REMOVE_DELAY</code></a> or <a href="../user/ProActiveUserGuide.html#_remove_delay_on_error"><code>REMOVE_DELAY_ON_ERROR</code></a> generic information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the <code>pa.scheduler.core.automaticremovejobdelay</code> setting is set to <code>0</code> (the default), the Housekeeping mechanism is <strong>disabled</strong> (no occurrence of housekeeping).</p>
</div>
<div class="paragraph">
<p>If the <code>pa.scheduler.core.automaticremove.errorjob.delay</code> setting is set to <code>0</code> (the default), removal of finished jobs containing errors uses the <code>pa.scheduler.core.automaticremovejobdelay</code> configuration.</p>
</div>
<div class="paragraph">
<p>The <code>errorjob.delay</code> setting is generally used in production environment for audit purpose. It allows keeping jobs containing errors longer in the database.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please note that the housekeeping mechanism is not applied to the jobs
which were already in the database before housekeeping was switched on.
Similarly, a modification of the <code>automaticremovejobdelay</code>, <code>automaticremove.errorjob.delay</code> or <code>removejobdelay</code> settings will not be retroactively applied to already finished jobs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The housekeeping mechanism is periodically triggered through the cron
expression <code>pa.scheduler.core.automaticremovejobcronexpression</code>.
As the boolean <code>pa.scheduler.job.removeFromDataBase</code> property is set to <code>true</code> by default,
a query is executed in the scheduler database to remove all jobs that qualify for the bulk removal.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The support of <code>pa.scheduler.job.removeFromDataBase=false</code> has been discontinued in ProActive Scheduler version <code>10.1.0</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nodes_and_task_recovery"><a class="anchor" href="ProActiveAdminGuide.html#_nodes_and_task_recovery"></a><a class="link" href="ProActiveAdminGuide.html#_nodes_and_task_recovery">19. Nodes and Task Recovery</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Scheduler can be started in <strong>recovery mode</strong>. If so, the Scheduler will try to restore Resource Manager nodes and
ProActive tasks that were running in the previous execution of the Scheduler. The nodes
and task recovery feature makes sure you do not lose on-going computations if the Scheduler experiences a failure.</p>
</div>
<div class="sect2">
<h3 id="_use_case_and_scope_of_the_feature"><a class="anchor" href="ProActiveAdminGuide.html#_use_case_and_scope_of_the_feature"></a><a class="link" href="ProActiveAdminGuide.html#_use_case_and_scope_of_the_feature">19.1. Use Case and Scope of the Feature</a></h3>
<div class="paragraph">
<p>Suppose that at an instant T the Scheduler is running tasks. Without the nodes and task
recovery feature, if the Scheduler crashed at instant T, then the tasks that were on-going would be
<strong>re-scheduled</strong> on any node and <strong>re-executed</strong> from the beginning when the Scheduler restarts. With the nodes and task
recovery feature enabled, when the Scheduler restarts it will retrieve the <strong>previous</strong> RM nodes and the <strong>on-going</strong> tasks,
and the execution of the tasks will continue and finish as if there was no failure of the Scheduler.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The nodes and task recovery feature is <strong>not</strong> applicable when the Scheduler is cleanly stopped or exits normally.
This is a mechanism that is <strong>only</strong> applicable upon <strong>failure</strong> of the Scheduler (machine crash, abrupt exit).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_nodes_and_task_recovery_work"><a class="anchor" href="ProActiveAdminGuide.html#_how_does_nodes_and_task_recovery_work"></a><a class="link" href="ProActiveAdminGuide.html#_how_does_nodes_and_task_recovery_work">19.2. How Does Nodes and Task Recovery Work?</a></h3>
<div class="paragraph">
<p>At startup, the Scheduler checks the nodes and the tasks that were previously persisted in database to be able to restore
their state. Here are the different cases that can occur at recovery time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a node that is found in database is still <strong>alive</strong>, the node&#8217;s information is restored in the Resource Manager. The
same restoration mechanism is applied for running tasks in the Scheduler.</p>
</li>
<li>
<p>If however, no node is found in database for a given <strong>node source</strong>, then the node recovery will
not take place for this node source. Instead, the nodes will be re-deployed like for the first time.</p>
</li>
<li>
<p>If a node that is found in database is <strong>not alive</strong> at recovery time, then the node will also be recreated automatically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>A recovery is not a restart</strong>, and as such a clean restart of the Scheduler will not preserve on-going tasks and
running nodes. Indeed, in the case of a <strong>regular shutdown</strong> of the Scheduler, the nodes are <strong>cleaned and removed</strong> from the
Resource Manager before the Scheduler exits. Thus, there will be no nodes and no running tasks to recover when the
Scheduler is started again.</p>
</div>
<div class="paragraph">
<p>To handle the particular situation in which the Scheduler is down when a running task terminates, a proper
<strong>configuration</strong> of the Scheduler allows the task to hold the result until the Scheduler is up and running again.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nodes_and_task_recovery_configuration"><a class="anchor" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_configuration"></a><a class="link" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_configuration">19.3. Nodes and Task Recovery Configuration</a></h3>
<div class="sect3">
<h4 id="_restrictions"><a class="anchor" href="ProActiveAdminGuide.html#_restrictions"></a><a class="link" href="ProActiveAdminGuide.html#_restrictions">19.3.1. Restrictions</a></h4>
<div class="paragraph">
<p>The nodes recovery is not available for Scheduler settings that use the PAMR protocol. This is because this
communication protocol relies on router endpoint identifiers that are regenerated when connections are reestablished.</p>
</div>
<div class="paragraph">
<p>The nodes recovery is also not available on the Nodes that are launched at the Scheduler startup by default. However
you get the choice to activate or deactivate the feature when you create your own Node Source. By default, the nodes
recovery is activated for any new Node Source.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_make_sure_that_nodes_and_task_recovery_is_enabled"><a class="anchor" href="ProActiveAdminGuide.html#_how_to_make_sure_that_nodes_and_task_recovery_is_enabled"></a><a class="link" href="ProActiveAdminGuide.html#_how_to_make_sure_that_nodes_and_task_recovery_is_enabled">19.3.2. How to make sure that nodes and task recovery is enabled</a></h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The nodes and task recovery feature requires a proper configuration to ensure that nodes and tasks are <strong>kept
alive</strong> during the down time of the Scheduler.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource Manager</strong> configuration (<code>PROACTIVE_HOME/config/rm/settings.ini</code>)</p>
<div class="paragraph">
<p>In order to enable the nodes and task recovery feature, make sure that the <code>pa.rm.nodes.recovery</code> property of the
Resource Manager is set to <code>true</code>. This property is set to <code>true</code> by default.</p>
</div>
</li>
<li>
<p><strong>Node</strong> configuration</p>
<div class="paragraph">
<p>The ProActive nodes should be started with a configuration that keeps them alive if the Scheduler fails. Node properties
can be set at node startup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>-Dproactive.node.ping.delay</code> to specify how often the node will try to communicate with the Resource Manager.
The default for this property is 30 seconds.</p>
</li>
<li>
<p>Use <code>-Dproactive.node.reconnection.attempts</code> to specify how many times the node will try to reconnect with the
Resource Manager. The default for this property is to attempt 10 times.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These two properties define the total delay for the node to reconnect to the Resource Manager. By default, the total
delay of reconnection is 5 minutes. When this total delay is consumed, <em>the node shuts itself down</em>, and the node recovery
will not be applicable any more for this node.</p>
</div>
</li>
<li>
<p><strong>Scheduler</strong> configuration (<code>PROACTIVE_HOME/config/scheduler/settings.ini</code>)</p>
<div class="paragraph">
<p>In order to make sure that a task will attempt several times to send back its result to the Scheduler, you must set the
properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pa.scheduler.core.node.ping.attempts</code> to specify the number of times a finished task will try to contact the
Scheduler. The default for this property is to attempt only once.</p>
</li>
<li>
<p><code>pa.scheduler.core.nodepingfrequency</code> property to define a delay (in seconds) in between two attempts. The default
for this property is 20 seconds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the Scheduler is still not up and running after the total delay defined by these properties (which is 20 seconds by
default), then <em>the task’s result will be lost</em> forever.
Note that these two properties are also used by the scheduler to decide when to <strong>re-schedule</strong> tasks.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_disable_nodes_and_task_recovery"><a class="anchor" href="ProActiveAdminGuide.html#_how_to_disable_nodes_and_task_recovery"></a><a class="link" href="ProActiveAdminGuide.html#_how_to_disable_nodes_and_task_recovery">19.3.3. How to disable nodes and task recovery</a></h4>
<div class="paragraph">
<p>You can completely disable the nodes and task recovery feature by setting the <code>pa.rm.nodes.recovery</code> property of the
<strong>Resource Manager</strong> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>In addition, the nodes and task recovery can be configured <strong>per Node Source</strong> at creation time. This configuration will
be applied only if the global <code>pa.rm.nodes.recovery</code> property is set to <code>true</code>. The specification of nodes recovery per
Node Source can be done through the <a href="ProActiveAdminGuide.html#_glossary_rm_web_interface">Resource Manager Web Interface</a>, through the Resource
Manager <a href="ProActiveAdminGuide.html#_glossary_rest_api">REST API</a>, and through the <a href="ProActiveAdminGuide.html#_resource_manager_command_line">Command Line</a> client (CLI).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Through the <strong>Web Interface</strong>, the form to create a new Node Source contains a checkbox that controls nodes
recoverability.</p>
</li>
<li>
<p>Through the <strong>REST API</strong>, the <code>nodesRecoverable</code> parameter of the <code>rm/nodesource/create</code> and <code>rm/nodesource</code> <strong>REST
endpoints</strong> specify whether the ProActive Nodes of a new Node Source will be recoverable. <em>Nodes recovery will be
disabled</em> if the given value does not match any case of the "true" string.</p>
</li>
<li>
<p>Through the <strong>CLI</strong>, the <code>createns</code> and <code>definens</code> <strong>commands</strong> take an optional parameter to specify whether the
ProActive Nodes of a new Node Source will be recoverable. <em>Nodes recovery will be disabled</em> if
the optional parameter is provided and does not match any case of the "true" string.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nodes_and_task_recovery_on_cloud_platforms"><a class="anchor" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_on_cloud_platforms"></a><a class="link" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_on_cloud_platforms">19.4. Nodes and Task Recovery on Cloud Platforms</a></h3>
<div class="paragraph">
<p>The nodes and task recovery feature of ProActive is also available for the deployments on <em>Microsoft Azure</em> and <em>Amazon
EC2</em> clouds.</p>
</div>
<div class="paragraph">
<p>For these platforms, when the Scheduler is restarted after a failure, it will try to contact the nodes that are
deployed on the cloud <strong>instances</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the nodes are alive then the recovery proceeds like with non-cloud infrastructures.</p>
</li>
<li>
<p>If the nodes cannot be contacted, the recovery mechanism will try to re-deploy them by asking the instances to run a
node deployment script.</p>
</li>
<li>
<p>If the script fails, it means that the cloud instances do not exist anymore, so the recovery mechanism will trigger a
re-deployment including the re-creation of the instances.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_nodes_and_task_recovery_performance_tuning"><a class="anchor" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_performance_tuning"></a><a class="link" href="ProActiveAdminGuide.html#_nodes_and_task_recovery_performance_tuning">19.5. Nodes and Task Recovery Performance Tuning</a></h3>
<div class="paragraph">
<p>By default, the persistence of the node states is slightly delayed in order to batch several database operations in the
same transaction. This is done in order to minimize the execution time overhead of the nodes and task recovery feature.
However, this default <strong>batching mechanism</strong> can be overriden to adapt the delay, or to disable batching.</p>
</div>
<div class="paragraph">
<p>The properties that allow performance tuning are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pa.rm.node.db.operations.delay</code> defines the delay in milliseconds that is applied when the RM requests the
persistence of a node. By default the delay is set to 100 milliseconds. If the value of this property is set to <code>0</code>,
then all database operations related to the persistence of nodes are executed <strong>immediately and synchronously</strong>.</p>
</li>
<li>
<p><code>pa.rm.nodes.db.operations.update.synchronous</code> defines whether the node updates are persisted synchronously
(with no delay) whenever it is possible. By default this property is set to <code>true</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting_2"><a class="anchor" href="ProActiveAdminGuide.html#_troubleshooting_2"></a><a class="link" href="ProActiveAdminGuide.html#_troubleshooting_2">20. Troubleshooting</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_logs"><a class="anchor" href="ProActiveAdminGuide.html#_logs"></a><a class="link" href="ProActiveAdminGuide.html#_logs">20.1. Logs</a></h3>
<div class="paragraph">
<p>If something goes wrong the first place to look for the problem are the Scheduler logs. By default all logs are in
<code>PROACTIVE_HOME/logs</code> directory.</p>
</div>
<div class="paragraph">
<p>Users submitting jobs have access to server logs of their jobs through the <strong>Scheduler Web interface</strong></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="https://trydev2.activeeon.com/doc/images/server_logs.png" alt="server logs">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_problems"><a class="anchor" href="ProActiveAdminGuide.html#_common_problems"></a><a class="link" href="ProActiveAdminGuide.html#_common_problems">20.2. Common Problems</a></h3>
<div class="sect3">
<h4 id="_path_too_long_errors_when_unzipping_windows_downloads"><a class="anchor" href="ProActiveAdminGuide.html#_path_too_long_errors_when_unzipping_windows_downloads"></a><a class="link" href="ProActiveAdminGuide.html#_path_too_long_errors_when_unzipping_windows_downloads">20.2.1. 'Path too Long' Errors When Unzipping Windows Downloads</a></h4>
<div class="paragraph">
<p>When you unzip a Windows package using the default Windows compression utility,
you might get errors stating that the path is too long. Path length is
determined by the Windows OS. The maximum path, which includes drive letter,
colon, backslash, name components separated by backslashes, and a terminating
null character, is defined as 260 characters.</p>
</div>
<div class="paragraph">
<p>Workarounds:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Move the Zip file on the root level of the system drive and unzip from there.</p>
</li>
<li>
<p>Use a third-party compression utility. Unlike the default Windows
compression utility, some third-party utilities allow for longer maximum
path lengths.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference"><a class="anchor" href="ProActiveAdminGuide.html#_reference"></a><a class="link" href="ProActiveAdminGuide.html#_reference">21. Reference</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scheduler_properties"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_properties"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_properties">21.1. Scheduler Properties</a></h3>
<div class="paragraph">
<p>Scheduler Properties are read when ProActive Scheduler is started therefore you need to restart it
to apply changes.</p>
</div>
<div class="paragraph">
<p>The default configuration file is <strong>SCHEDULER_HOME/scheduler/settings.ini</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># INFORMATION : each file path must be absolute, OR relative to the Scheduler_Home path
#-------------------------------------------------------
#-------------   SCHEDULER PROPERTIES   ----------------
#-------------------------------------------------------

# Scheduler home directory (this default value should be proper in most cases)
pa.scheduler.home=.

# HSQLDB location, use this property to store the database in a different folder than scheduler_home/data/db
# you can use an absolute location or a relative location from scheduler home
# pa.hsqldb.location=data/db

# Scheduler rest url. If not defined, it is set automatically when starting the server.
# When the server has a public endpoint, different from the hostname available on the machine, this property should be used to correctly set the url
# Accessed inside workflows and tasks with the PA_SCHEDULER_REST_URL variable
#pa.scheduler.rest.url=

# Catalog rest url. If not defined, it is set automatically when starting the server.
# Accessed inside workflows and tasks with the PA_CATALOG_REST_URL variable
#pa.catalog.rest.url=

# Cloud Automation rest url. If not defined, it is set automatically when starting the server.
# Accessed inside workflows and tasks with the PA_CLOUD_AUTOMATION_REST_URL variable
#pa.cloud-automation.rest.url

# Job Planner rest url. If not defined, it is set automatically when starting the server.
# Accessed inside workflows and tasks with the PA_JOB_PLANNER_REST_URL variable
#pa.job-planner.rest.url

# Notification Service rest url. If not defined, it is set automatically when starting the server.
# Accessed inside workflows and tasks with the PA_NOTIFICATION_SERVICE_REST_URL variable
#pa.notification-service.rest.url

# Set this property to define the public url of the scheduler (e.g. if behind a reverse proxy or accessed through a domain)
# Set automatically by the server to the value of pa.scheduler.rest.ur if not set explicitly.
# Accessed inside workflows and tasks with the PA_SCHEDULER_REST_PUBLIC_URL variable.
# Example https://myserver.mydomain.com/rest
#pa.scheduler.rest.public.url=

# Set this property to define the public url of the catalog (e.g. if behind a reverse proxy or accessed through a domain)
# Set automatically by the server to the value of pa.catalog.rest.url if not set explicitly.
# Accessed inside workflows and tasks with the PA_CATALOG_REST_PUBLIC_URL variable.
# Example https://myserver.mydomain.com/catalog
#pa.catalog.rest.public.url=

# Set this property to define the public url of the cloud automation service (e.g. if behind a reverse proxy or accessed through a domain)
# Set automatically by the server to the value of pa.cloud-automation.rest.url if not set explicitly.
# Accessed inside workflows and tasks with the PA_CLOUD_AUTOMATION_REST_PUBLIC_URL variable.
# Example https://myserver.mydomain.com/cloud-automation-service
#pa.cloud-automation.rest.public.url=

# Set this property to define the public url of the job planner (e.g. if behind a reverse proxy or accessed through a domain)
# Set automatically by the server to the value of pa.job-planner.rest.url if not set explicitly.
# Accessed inside workflows and tasks with the PA_JOB_PLANNER_REST_PUBLIC_URL variable.
# Example https://myserver.mydomain.com/job-planner
#pa.job-planner.rest.public.url=

# Set this property to define the public url of the notification service (e.g. if behind a reverse proxy or accessed through a domain)
# Set automatically by the server to the value of pa.notification-service.rest.url if not set explicitly.
# Accessed inside workflows and tasks with the PA_NOTIFICATION_SERVICE_REST_PUBLIC_URL variable.
# Example https://myserver.mydomain.com/notification-service
#pa.notification-service.rest.public.url=

# Timeout for the scheduling loop (in millisecond)
pa.scheduler.core.timeout=10000

# Auto-reconnection to the Resource Manager default reconnection attempt every 10 seconds for 1 hour
pa.scheduler.core.rmconnection.autoconnect = true
pa.scheduler.core.rmconnection.timespan = 10000
pa.scheduler.core.rmconnection.attempts = 360

# Maximum number of threads used to execute client requests
# (e.g. change Job priority, kill Job, etc.)
pa.scheduler.core.clientpoolnbthreads=100

# Maximum number of threads used to execute internal scheduling operations
# (handle task termination, restart task, etc.)
pa.scheduler.core.internalpoolnbthreads=100

# Maximum number of threads used to ping tasks regularly to get its progress and detect node failures
pa.scheduler.core.taskpingerpoolnbthreads=100

# Number of threads used to delay operations which are NOT related to housekeeping
# (e.g. scheduler shutdown, handle task restart on error, etc.)
pa.scheduler.core.scheduledpoolnbthreads=20

# Number of threads used to handle scheduled operations with the housekeeping feature
pa.scheduler.core.housekeeping.scheduledpoolnbthreads=5

# Maximum number of threads in the thread pool that serves to recover running tasks in parallel at scheduler start up
pa.scheduler.core.parallel.scheduler.state.recover.nbthreads=100

# Check for failed node frequency in second
# Also used by the node to ping the scheduler after finishing a task
pa.scheduler.core.nodepingfrequency=20

# The scheduler will decide to restart a task, after a given tolerated number of failed attempts.
# A value of zero means that the scheduler will restart a task after the first failure.
# Also used by a node to retry to send the result of a task to the scheduler
pa.scheduler.core.node.ping.attempts=1

# Time in milliseconds before sending a kill request to the scheduler
pa.scheduler.core.killdelay=2000

# Scheduler default policy full name
pa.scheduler.policy=org.ow2.proactive.scheduler.policy.ExtendedSchedulerPolicy

# Defines the maximum number of tasks to be scheduled in each scheduling loop.
pa.scheduler.policy.nbtaskperloop=10

# If set to true (default), the scheduling loop will deploy tasks only on nodes which are free at the beginning of the loop.
# This is mandatory in order to respect strict task fifo order or priorities, but it can reduce the task throughput.
# Change this setting if a lot a short lived tasks are scheduled per minute and enforcing strict fifo priority is not mandatory
pa.scheduler.policy.strict.fifo=true

# Path of the license properties file
pa.scheduler.license.policy.configuration=config/scheduler/license.properties

# location of the jdbm database for persistent license registrations
pa.scheduler.license.policy.db=data/licenses

# Name of the JMX MBean for the scheduler
pa.scheduler.core.jmx.connectorname=JMXSchedulerAgent

# Port of the JMX service for the Scheduler.
pa.scheduler.core.jmx.port=5822

# Accounting refresh rate from the database in seconds
pa.scheduler.account.refreshrate=180

# RRD data base with statistic history
pa.scheduler.jmx.rrd.name=data/scheduler_statistics.rrd

# RRD data base step in seconds
pa.scheduler.jmx.rrd.step=4

# User session time. User is automatically disconnect after this time if no request is made to the scheduler. 8 hours by default.
# negative number indicates that session is infinite (value specified in second)
pa.scheduler.core.usersessiontime=28800

# Timeout for the start task action. Time during which the scheduling could be waiting (in millis)
# this value relies on the system and network capacity
pa.scheduler.core.starttask.timeout=20000

# Maximum number of threads used for the start task action. This property define the number of blocking resources
# until the scheduling loop will block as well.
# As it is related to the number of nodes, this property also define the number of threads used to terminate taskLauncher
pa.scheduler.core.starttask.threadnumber=100

# Maximum number of threads used to send events to clients. This property defines the number of clients
# than can block at the same time. If this number is reached, every clients won't receive events until
# a thread unlock.
pa.scheduler.core.listener.threadnumber=100

# List of the scripts paths to execute at scheduler start. Paths are separated by a ';'.
pa.scheduler.startscripts.paths=tools/LoadPackages.groovy

# Size of parsed workflow cache, used to optimize workflow submission time
pa.scheduler.stax.job.cache=1000

# Size of the cache used to ensure that delayed jobs or tasks are scheduled at the precise date (without skipping seconds)
pa.scheduler.startat.cache=5000

# Expiration period in seconds of cache used to download workflows
pa.scheduler.download.cache.expiration=60

# Expiration period in seconds of cache used to store session ids
pa.scheduler.method.session.cache.expiration=300

# Period of the HSQLDB monitoring thread (in seconds)
pa.scheduler.hsqldb.monitor.period=10

#-------------------------------------------------------
#----------------   JOBS PROPERTIES   ------------------
#-------------------------------------------------------

# Remove job delay (in seconds). (The time between getting back its result and removing it from the scheduler)
# Set this time to 0 if you don't want the job to be removed.
pa.scheduler.core.removejobdelay=0

# Automatic remove job delay (in seconds). (The time between the termination of the job and removing it from the scheduler)
# Set this time to 0 if you don't want the job to be removed automatically.
pa.scheduler.core.automaticremovejobdelay=0

# Automatic remove error job delay (in seconds). (The time between the termination of a job which contains errors and removing it from the scheduler)
# A job is considered with errors if its number of failed or faulty tasks is greater than 0.
# This setting is ignored if automaticremovejobdelay is set to 0
# Set this time to 0 if you want to apply the same configuration as automaticremovejobdelay.
pa.scheduler.core.automaticremove.errorjob.delay=0

# Remove job in database when removing it from the scheduler.
# This housekeeping feature can be replaced by a stored procedure
# that runs at the desired period of time (e.g. non-business hours)
# Such an example is available in samples/scripts/database/postgres/
# Changing this setting is strongly not recommended as the support for pa.scheduler.job.removeFromDataBase=false has been discontinued
pa.scheduler.job.removeFromDataBase=true

# This cron expression determines the housekeeping call frequency.
# Default value is 10 minutes: this will invoke the housekeeping mechanism
# to remove every jobs which are set to be removed and has their scheduled time for removal reached.
pa.scheduler.core.automaticremovejobcronexpression=*/10 * * * *

# Specific character encoding when parsing the job xml file
pa.file.encoding=UTF-8

# This property defines size of LRU cache which stores finished jobs* in memory.
# * by finished jobs, we mean finished jobs which were finished when scheduler started
#pa.scheduler.finishedjobs.lru.cache.size=1000

#-------------------------------------------------------
#---------------   TASKS PROPERTIES   ------------------
#-------------------------------------------------------
# Initial time to wait before the re-execution of a task. (in millisecond)
pa.scheduler.task.initialwaitingtime=1000

# Maximum number of execution for a task in case of failure (node down)
pa.scheduler.task.numberofexecutiononfailure=2

# If true tasks are ran in a forked JVM, if false they are ran in the node's JVM.
# When it's not set, each task can specify its execution mode through the task property "fork".
#pa.scheduler.task.fork=true

# If true tasks are always ran in RunAsMe mode (impersonation). This automatically implies pa.scheduler.task.fork=true (other setting is ignored)
pa.scheduler.task.runasme=false

# Maximum number of tasks in a tasks page
pa.scheduler.tasks.page.size=100

# Maximum duration time of task. If configured, the tasks will be terminated after the walltime exceeded
# Format is ss, mm:ss, or hh:mm:ss
#pa.scheduler.task.walltime=

# if the following property is set to a non-empty value, the scheduler will be able to execute only forkenvironment or clean scripts contained
# in the provided directory. All other scripts will be rejected.
#pa.scheduler.script.authorized.dir=

# The pa.scheduler.script.authorized.dir is browsed every refreshperiod time to load authorized scripts.
pa.scheduler.script.authorized.dir.refreshperiod=60000

# Refresh time to reload the security policy file (security.java.policy-server) 
pa.scheduler.auth.policy.refreshperiod.seconds=30


#-------------------------------------------------------
#-------------   DATASPACES PROPERTIES   ---------------
#-------------------------------------------------------

# Default INPUT space URL. The default INPUT space is used inside each job that does not define an INPUT space.
# Normally, the scheduler will start a FileSystemServer on a default location based on the TEMP directory.
# If the following property is specified, this FileSystemServer will be not be started and instead the provided dataspace
# url will be used
#pa.scheduler.dataspace.defaultinput.url=

# The following property can be used in two ways.
# 1) If a "pa.scheduler.dataspace.defaultinput.url" is provided, the defaultinput.path property
#   tells the scheduler where the actual file system is (provided that he has access to it). If the scheduler does not have
#   access to the file system where this dataspace is located then this property must not be set.
#       - On windows, use double backslash in the path, i.e. c:\\users\\...
#       - you can provide a list of urls separated by spaces , i.e. : http://myserver/myspace file:/path/to/myspace
#       - if one url contain spaces, wrap all urls in the list between deouble quotes :
#               "http://myserver/myspace"  "file:/path/to/my space"
# 2) If a "pa.scheduler.dataspace.defaultinput.url" is not provided, the defaultinput.path property will tell the scheduler
#   to start a FileSystemServer on the provided defaultinput.path instead of its default location

### the default location is SCHEDULER_HOME/data/defaultinput
#pa.scheduler.dataspace.defaultinput.localpath=

# Host name from which the localpath is accessible, it must be provided if the localpath property is provided
#pa.scheduler.dataspace.defaultinput.hostname=

# The same for the OUPUT (see above explanations in the INPUT SPACE section)
# (concerning the syntax, see above explanations in the INPUT SPACE section)
#pa.scheduler.dataspace.defaultoutput.url=
### the default location is SCHEDULER_HOME/data/defaultoutput
#pa.scheduler.dataspace.defaultoutput.localpath=
#pa.scheduler.dataspace.defaultoutput.hostname=

# The same for the GLOBAL space. The GLOBAL space is shared between each users and each jobs.
# (concerning the syntax, see above explanations in the INPUT SPACE section)
#pa.scheduler.dataspace.defaultglobal.url=
### the default location is SCHEDULER_HOME/data/defaultglobal
#pa.scheduler.dataspace.defaultglobal.localpath=
#pa.scheduler.dataspace.defaultglobal.hostname

# The same for the USER spaces. A USER space is a per-user global space. An individual space will be created for each user in subdirectories of the defaultuser.localpath.
# Only one file server will be created (if not provided)
# (concerning the syntax, see above explanations in the INPUT SPACE section)
#pa.scheduler.dataspace.defaultuser.url=
### the default location is SCHEDULER_HOME/data/defaultuser
#pa.scheduler.dataspace.defaultuser.localpath=
#pa.scheduler.dataspace.defaultuser.hostname=

# Is userspace based on impersonation (true) or path (false)
#  Examples:
#    sftp/vsftp is based on impersonation, a user space url will be sftp://user@server
#    file is based on path, a user space url will be file://user_space_root/user/
# Uncomment the following property to enable impersonation if the userspace protocol is sftp or vsftp (default is false)
# pa.scheduler.dataspace.defaultuser.impersonation=true

# When using userspace impersonation, internal accounts of the ProActive scheduler need to be discarded
# For example, in a sftp server, there will be no account matching internal accounts such as rm, scheduler, etc
# For these internal accounts, a user space will not be mounted.
pa.scheduler.dataspace.defaultuser.internal.accounts=admin,rm,scheduler,watcher,user,demo,guest,nsadmin,nsadmin2,provider,radmin,test,test_executor

#-------------------------------------------------------
#----------------   LOGS PROPERTIES   ------------------
#-------------------------------------------------------
# Logs forwarding method
# Possible methods are :
# Simple socket : org.ow2.proactive.scheduler.common.util.logforwarder.providers.SocketBasedForwardingProvider
# SSHTunneled socket : org.ow2.proactive.scheduler.common.util.logforwarder.providers.SocketWithSSHTunnelBasedForwardingProvider
# ProActive communication : org.ow2.proactive.scheduler.common.util.logforwarder.providers.ProActiveBasedForwardingProvider
#
# set this property to empty string to disable log forwarding alltogether
pa.scheduler.logs.provider=org.ow2.proactive.scheduler.common.util.logforwarder.providers.ProActiveBasedForwardingProvider

# Location of server job and task logs (comment to disable job logging to separate files).
# Can be an absolute path or a path relative to the scheduler home.
# If you are interested in disabling all outputs to 'logs/jobs' you must
# also have a look at the property 'pa.rm.logs.selection.location' in 'PROACTIVE_HOME/config/rm/settings.ini'
# Please note that disabling job logging will prevent Jobs and Tasks Server logs to be retrieved
# from the REST API and thus the Scheduler portal.
pa.scheduler.job.logs.location=logs/jobs/

# Size limit for job and task logs in bytes
pa.scheduler.job.logs.max.size=10MB

# Format pattern for the task output logs
pa.scheduler.job.task.output.logs.pattern=[%X{job.id}t%X{task.id}@%X{host};%X{task.name};%d{HH:mm:ss}] %m %n

# The following parameters are to monitor the quantity of jobs and the impact on memory and DB.
# This feature is disabled by default. The following log settings (in the config/log folder)
# need to be uncommented to enable the polling:
# log4j.logger.org.ow2.proactive.scheduler.core.helpers.TableSizeMonitorRunner
# log4j.logger.org.ow2.proactive.scheduler.core.helpers.JobsMemoryMonitorRunner
#
# Each polling from TableSizeMonitorRunner will print the following information into the logs:
# - JobData (All)
# - JobData (Finished)
# - JobDataVariable
# - JobContent
# - TaskData (All)
# - TaskData (Finished)
# - SelectorData
# - EnvironmentModifierData
# - ScriptData
# - SelectionScriptData
# - TaskDataVariable
# - TaskResultData
# - ThirdPartyCredentialData

# Each polling from JobsMemoryMonitorRunner will print the following information into the logs:
# - pendingJobs
# - runningJobs
# - finishedJobs
# - allJobsActual
# - AllJobsComputed
# - deleteCount
# - updateCount
# - insertCount
# - fetchCount
# - loadCount
# - flushCount

# The last 6 metrics are fetched from the Hibernate Statistics layer.

# Modify the polling frequency for the memory metrics. The default value is 1 minute.
# pa.scheduler.mem.monitoring.freq=* * * * *

# Define verbosity of job description when submitted
# If true, Job and Tasks details are logged (can slow down processes for jobs with many (&gt;500) tasks)
# If false, only Job metadata are logged
pa.scheduler.job.submission.detailed.logging=true

#-------------------------------------------------------
#-----------   AUTHENTICATION PROPERTIES   -------------
#-------------------------------------------------------

# Path to the Jaas configuration file which defines what modules are available for internal authentication
pa.scheduler.auth.jaas.path=config/authentication/jaas.config

# Path to the private key file which is used to encrypt credentials for authentication
pa.scheduler.auth.privkey.path=config/authentication/keys/priv.key

# Path to the public key file which is used to encrypt credentials for authentication
pa.scheduler.auth.pubkey.path=config/authentication/keys/pub.key

# Uncomment the following line to configure a global domain for scheduler users in active directory environments
# pa.scheduler.auth.global.domain=mydomain

# LDAP Authentication configuration file path, used to set LDAP configuration properties
# If this file path is relative, the path is evaluated from the Scheduler dir (ie application's root dir)
# with the variable defined below : pa.scheduler.home.
# else, (if the path is absolute) it is directly interpreted
pa.scheduler.ldap.config.path=config/authentication/ldap.cfg

# Multi-domain LDAP configuration
# a comma-separated list of the pair domain_name:configuration_path
# see comment above regarding file paths locations
# pa.scheduler.multi.ldap.config=domain1:config/authentication/ldap-domain1.cfg,domain2:config/authentication/ldap-domain2.cfg

# Login file name for file authentication method
# If this file path is relative, the path is evaluated from the Scheduler dir (ie application's root dir)
# with the variable defined below : pa.scheduler.home.
# else, the path is absolute, so the path is directly interpreted
pa.scheduler.core.defaultloginfilename=config/authentication/login.cfg

# Group file name for file authentication method
# If this file path is relative, the path is evaluated from the Scheduler dir (ie application's root dir)
# with the variable defined below : pa.scheduler.home.
# else, the path is absolute, so the path is directly interpreted
pa.scheduler.core.defaultgroupfilename=config/authentication/group.cfg

# Tenant file name for file authentication method
# If this file path is relative, the path is evaluated from the Scheduler dir (ie application's root dir)
# with the variable defined below : pa.scheduler.home.
# else, the path is absolute, so the path is directly interpreted
pa.scheduler.core.defaulttenantfilename=config/authentication/tenant.cfg

# If enabled, filter jobs according to user tenant
pa.scheduler.core.tenant.filter=false

# List of domain names that can be used during a login (can be a list of windows domain names or a list of tenants in Multi-LDAP configuration)
# This setting is interpreted by ProActive portals to show a selectable list of domains
# Domain names should be lowercase
# It is possible to allow both named domain and empty domain using the syntax pa.scheduler.allowed.domains=,domain1,domain2
# pa.scheduler.allowed.domains=domain1,domain2

# Property that define the method that have to be used for logging users to the Scheduler
# It can be one of the following values:
#	- "SchedulerFileLoginMethod" to use file login and group management
#	- "SchedulerLDAPLoginMethod" to use LDAP login management
#	- "SchedulerMultiLDAPLoginMethod" to use LDAP login management across multiple domains
#	- "SchedulerPAMLoginMethod" to use PAM login management
pa.scheduler.core.authentication.loginMethod=SchedulerFileLoginMethod

# Creates a credential file (username.cred) for each successful login in the authentication folder
pa.scheduler.create.credentials.when.login=true

#-------------------------------------------------------
#------------------   RM PROPERTIES   ------------------
#-------------------------------------------------------
# Path to the Scheduler credentials file for RM authentication
pa.scheduler.resourcemanager.authentication.credentials=config/authentication/scheduler.cred

# Use single or multiple connection to RM :
# (If true)  the scheduler user will do the requests to rm
# (If false) each Scheduler users have their own connection to RM using their scheduling credentials
pa.scheduler.resourcemanager.authentication.single=false

# Set a timeout for initial connection to the RM connection (in ms)
pa.scheduler.resourcemanager.connection.timeout=120000

#-------------------------------------------------------
#--------------   HIBERNATE PROPERTIES   ---------------
#-------------------------------------------------------
# Hibernate configuration file (relative to home directory)
pa.scheduler.db.hibernate.configuration=config/scheduler/database.properties

# Drop database before creating a new one
# If this value is true, the database will be dropped and then re-created
# If this value is false, database will be updated from the existing one.
pa.scheduler.db.hibernate.dropdb=false

# This property is used to limit number of finished jobs loaded from the database
# at scheduler startup. For example setting this property to '10d' means that
# scheduler should load only finished jobs which were submitted during last
# 10 days. In the period expression it is also possible to use symbols 'h' (hours)
# and 'm' (minutes).
# If property isn't set then all finished jobs are loaded.
pa.scheduler.db.load.job.period=0m

# Defines the maximum number of times a transaction that fails and rollbacks
# will be retried. Each retry is performed after a given amount of time.
# The default value is 1 and any value below 1 is replaced by the default value.
pa.scheduler.db.transactions.maximum.retries=5

# Initial delay to wait in ms before the first retry in case of a transaction
# failure. This delay is multiplied by `pa.scheduler.db.transactions.damping.factor`
# after each retry.
pa.scheduler.db.transactions.sleep.delay=1000

# Defines the factor by which the sleep delay is multiplied after each retry.
pa.scheduler.db.transactions.damping.factor=2

# Batch size to load Jobs from database when scheduler is restarted
pa.scheduler.db.recovery.load.jobs.batch_size=100

# maximum number of items passed as parameters to some database queries (jobid list, etc)
pa.scheduler.db.items.max.size=1000

# Batch size to fetch parent tasks'results in a merge task
pa.scheduler.db.fetch.batch_size=50

#-------------------------------------------------------
#-------  VARIABLES &amp; GENERIC INFO PROPERTIES  ---------
#-------------------------------------------------------

# file containing variables which can be used in all workflows
pa.scheduler.global.variables.configuration=config/scheduler/global_variables.xml

# refresh period, in minutes, for the global variables configuration
pa.scheduler.global.variables.refresh=5

#-------------------------------------------------------
#----------  EMAIL NOTIFICATION PROPERTIES  ------------
#-------------------------------------------------------

# Change emailnotification.properties file to set up the From address for notifications
# and its smtp servers etc.
pa.scheduler.notification.email.configuration=config/scheduler/emailnotification.properties

# Set to true to enable email notifications about finished jobs. Emails
# are sent to the address specified in the generic information of a
# job with the key EMAIL; example:
#    &lt;genericInformation&gt;
#        &lt;info name="EMAIL" value="user@example.com"/&gt;
#    &lt;/genericInformation&gt;
pa.scheduler.notifications.email.enabled=false
# From address for notifications emails (set it to a valid address if
# you would like email notifications to work)
pa.scheduler.notifications.email.from=example@username.com

#-------------------------------------------------------
#----------  SYNCHRONIZATION STORE PROPERTIES  ---------
#-------------------------------------------------------

# location of the jdbm database for persistent channels
pa.scheduler.synchronization.db=data/synchronization

#-------------------------------------------------------
#--------------  SIGNAL API PROPERTIES  ----------------
#-------------------------------------------------------

# name of the channel of workflow signals (STOP, CONTINUE, etc)
pa.scheduler.signals.channel=PA_SIGNALS_CHANNEL_

#-------------------------------------------------------
#----------------  PORTAL PROPERTIES  ------------------
#-------------------------------------------------------
pa.scheduler.portal.configuration=config/portal/scheduler-portal-display.conf

#-------------------------------------------------------
#----------------  LABEL PROPERTIES  ------------------
#-------------------------------------------------------
pa.scheduler.label.regex=^[a-zA-Z0-9_/-]*$
pa.scheduler.label.max.length=20</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_manager_properties"><a class="anchor" href="ProActiveAdminGuide.html#_resources_manager_properties"></a><a class="link" href="ProActiveAdminGuide.html#_resources_manager_properties">21.2. Resources Manager Properties</a></h3>
<div class="paragraph">
<p>Resource Manager Properties are read when ProActive Scheduler is started therefore you need to restart it
to apply changes.</p>
</div>
<div class="paragraph">
<p>The default configuration file is <em>SCHEDULER_HOME/rm/settings.ini</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">#-------------------------------------------------------
#-------------   RMCORE PROPERTIES   ----------------
#-------------------------------------------------------


# definition of all java properties used by resource manager
# warning : definition of these variables can be override by user at JVM startup,
# using for example -Dpa.rm.home=/foo, in the java command

# name of the ProActive Node containing RM's active objects
pa.rm.node.name=RM_NODE

# number of local nodes to start with the Resource Manager
# if value is -1, then the number of local nodes is max(2, numberOfCoreAvailableLocally-1)
pa.rm.local.nodes.number=-1

# ping frequency used by node source for keeping a watch on handled nodes (in ms)
pa.rm.node.source.ping.frequency=45000

# Periodic down and lost nodes removal attempts (cron expression)
# If not set, the down and lost nodes will never be removed automatically
pa.rm.nodes.unavailable.removal.frequency=*/30 * * * *
# Time (in minutes) after which a down or lost node is eligible to periodic removal
# If not set, or if not greater than 0, the down and lost nodes will never be removed automatically
pa.rm.nodes.unavailable.maxperiod=1440

# ping frequency used by resource manager to ping connected clients (in ms)
pa.rm.client.ping.frequency=45000

# The period of sending "alive" event to resource manager's listeners (in ms)
pa.rm.aliveevent.frequency=300000

# timeout for selection script result
pa.rm.select.script.timeout=60000

# number of selection script digests stored in the cache to predict the execution results
pa.rm.select.script.cache=10000

# The time period when a node has the same dynamic characteristics (in ms).
# It needs to pause the permanent execution of dynamic scripts on nodes.
# Default is 5 mins, which means that if any dynamic selection scripts returns
# false on a node it won't be executed there at least for this time.
pa.rm.select.node.dynamicity=300000

# The full class name of the policy selected nodes
pa.rm.selection.policy=org.ow2.proactive.resourcemanager.selection.policies.ShufflePolicy

# Timeout for remote script execution (in ms) 
pa.rm.execute.script.timeout=180000

# If set to non-empty value the resource manager executes only scripts from this directory.
# All other selection scripts will be rejected.
# pa.rm.select.script.authorized.dir=

# The pa.rm.select.script.authorized.dir is browsed every refreshperiod time to load authorized scripts.
pa.rm.select.script.authorized.dir.refreshperiod=60000

# timeout for node lookup
pa.rm.nodelookup.timeout=60000

# GCM application (GCMA) file path, used to perform GCM deployments
# If this file path is relative, the path is evaluated from the Resource manager dir (ie application's root dir)
# defined by the "pa.rm.home" JVM property
# else, the path is absolute, so the path is directly interpreted
pa.rm.gcm.template.application.file=config/rm/deployment/GCMNodeSourceApplication.xml

# java property string defined in the GCMA defined above, which is dynamically replaced
# by a GCM deployment descriptor file path to deploy
pa.rm.gcmd.path.property.name=gcmd.file

# Resource Manager home directory
pa.rm.home=.

# Lists of supported infrastructures in the resource manager
pa.rm.nodesource.infrastructures=config/rm/nodesource/infrastructures

# Lists of supported node acquisition policies in the resource manager
pa.rm.nodesource.policies=config/rm/nodesource/policies

# Timeout (ms) for the resource manger to recover a broken node source in scheduler aware policy
pa.rm.scheduler.aware.policy.nodesource.recovery.timeout=10000

# Number of trials for the resource manager to recover a broken node source in scheduler aware policy
pa.rm.scheduler.aware.policy.nodesource.recovery.trial.number=10

# Max number of threads in node source for parallel task execution
pa.rm.nodesource.maxthreadnumber=75

# Max number of threads in selection manager
pa.rm.selection.maxthreadnumber=50

# Max number of threads in monitoring
pa.rm.monitoring.maxthreadnumber=5

# Number of threads in the node cleaner thread pool
pa.rm.cleaning.maxthreadnumber=5

# Maximum node and user history period in seconds (Default, disabled, uncomment to enable 7 days max history)
#pa.rm.history.maxperiod=604800

# Frequency of node history removal (cron expression)
pa.rm.history.removal.cronperiod=*/10 * * * *



# Max number of lines stored from the infrastructure processes output
pa.rm.infrastructure.process.output.maxlines=2000

#Name of the JMX MBean for the RM
pa.rm.jmx.connectorname=JMXRMAgent

#port of the JMX service for the RM.
pa.rm.jmx.port=5822

#Accounting refresh rate from the database in seconds (0 means disabled)
pa.rm.account.refreshrate=180

# RRD data base with statistic history
pa.rm.jmx.rrd.name=data/rm_statistics.rrd

# RRD data base step in seconds
pa.rm.jmx.rrd.step=4

# path to the Amazon EC2 account credentials properties file,
# mandatory when using the EC2 Infrastructure
pa.rm.ec2.properties=config/rm/deployment/ec2.properties

# Defines if the lock restoration feature is enabled on RM startup.
# When set to {@code true}, the RM will try to lock per Node Source
# as many Nodes as there were on the previous run.
#
# The approach is best effort and Node hostname is not considered.
# As a result, Nodes are not necessarily locked on the same host.
pa.rm.nodes.lock.restoration=true

# Defines if the node restoration feature is enabled.
# When set to {@code true}:
# - on RM startup the RM tries to look up the nodes that were present
#   before the scheduler crashed
# - the RM persists node information
pa.rm.nodes.recovery=true

# Insert a delay before a database node source update or any node operation
# is executed. If set to 0, all database operation are executed synchronously.
pa.rm.node.db.operations.delay=500

# If set to {@code true}, and if {@link pa.rm.node.db.operations.delay} is not
# set to 0, then node updates will be executed synchronously as much as possible.
# In this case, node updates can still be postponed if the node creation is still
# pending.
#
pa.rm.nodes.db.operations.update.synchronous=true

# maximum length of in expressions in the database
pa.rm.db.items.max.size=1000

# Defines if  the runtime (RT) have to be killed when the resource manager (RM) is shutdown.
pa.rm.shutdown.kill.rt=true

# Defines the maximum number of RMEvents which can be sent to the client in one request.
pa.rm.rest.monitoring.maximum.chunk.size=100

# Enable asynchronous logging
pa.log4j.async.appender.enabled=true

# Enable asynchronous logging appender cache (store opened file appender into a cache structure)
pa.log4j.async.appender.cache.enabled=false

# Defines the buffer size used in asynchronous appenders
pa.log4j.async.appender.buffer.size=10000

# Defines the AsynchFileAppender flush timeout
pa.log4j.async.appender.flush.timeout=50

# Defines the log4j pattern used for all file appenders (used by the scheduler for job/task log files
pa.log4j.file.appender.pattern=%d{ISO8601} %-5p [%c{1.}] %m%n

#-------------------------------------------------------
#---------------   AUTHENTICATION PROPERTIES   ------------------
#-------------------------------------------------------

# path to the Jaas configuration file which defines what modules are available for internal authentication
pa.rm.auth.jaas.path=config/authentication/jaas.config

# path to the private key file which is used to encrypt credentials for authentication
pa.rm.auth.privkey.path=config/authentication/keys/priv.key

# path to the public key file which is used to encrypt credentials for authentication
pa.rm.auth.pubkey.path=config/authentication/keys/pub.key

# LDAP Authentication configuration file path, used to set LDAP configuration properties
# If this file path is relative, the path is evaluated from the resource manager dir (ie application's root dir)
# with the variable defined below : pa.rm.home.
# else, (if the path is absolute) it is directly interpreted
pa.rm.ldap.config.path=config/authentication/ldap.cfg

# Multi-domain LDAP configuration
# a comma-separated list of the pair domain_name:configuration_path
# see comment above regarding file paths locations
# domain names must be lowercase and must also be configured in pa.rm.allowed.domains

# pa.rm.multi.ldap.config=domain1:config/authentication/ldap-domain1.cfg,domain2:config/authentication/ldap-domain2.cfg

# Login file name for file authentication method
# If this file path is relative, the path is evaluated from the resource manager dir (ie application's root dir)
# with the variable defined below : pa.rm.home.
# else, the path is absolute, so the path is directly interpreted
pa.rm.defaultloginfilename=config/authentication/login.cfg

# Group file name for file authentication method
# If this file path is relative, the path is evaluated from the resource manager dir (ie application's root dir)
# with the variable defined below : pa.rm.home.
# else, the path is absolute, so the path is directly interpreted
pa.rm.defaultgroupfilename=config/authentication/group.cfg

# Tenant file name for file authentication method
# If this file path is relative, the path is evaluated from the resource manager dir (ie application's root dir)
# with the variable defined below : pa.rm.home.
# else, the path is absolute, so the path is directly interpreted
pa.rm.defaulttenantfilename=config/authentication/tenant.cfg

# List of domain names that can be used during a login (can be a list of windows domain names or a list of tenants in Multi-LDAP configuration)
# This setting is interpreted by ProActive portals to show a selectable list of domains
# Domain names should be lowercase
# It is possible to allow both named domain and empty domain using the syntax pa.rm.allowed.domains=,domain1,domain2
# pa.rm.allowed.domains=domain1,domain2

#Property that define the method that have to be used for logging users to the resource manager
#It can be one of the following values :
#	- "RMFileLoginMethod" to use file login and group management
#	- "RMLDAPLoginMethod" to use LDAP login management
#	- "RMMultiLDAPLoginMethod" to use LDAP login management across multiple domains
#	- "RMPAMLoginMethod" to use PAM login management
pa.rm.authentication.loginMethod=RMFileLoginMethod

# Path to the rm credentials file for authentication
pa.rm.credentials=config/authentication/rm.cred

# Refresh time to reload the security policy file (security.java.policy-server) 
pa.rm.auth.policy.refreshperiod.seconds=30

#-------------------------------------------------------
#--------------   HIBERNATE PROPERTIES   ---------------
#-------------------------------------------------------
# Hibernate configuration file (relative to home directory)
pa.rm.db.hibernate.configuration=config/rm/database.properties

# Drop database before creating a new one
# If this value is true, the database will be dropped and then re-created
# If this value is false, database will be updated from the existing one.
pa.rm.db.hibernate.dropdb=false

# Drop only node sources from the data base
pa.rm.db.hibernate.dropdb.nodesources=false

#-------------------------------------------------------
#--------------   TOPOLOGY  PROPERTIES   ---------------
#-------------------------------------------------------
pa.rm.topology.enabled=true

# By default, the computation of distances between nodes is disabled,
# as it implies a very slow node acquisition time. Activate it only if mandatory
pa.rm.topology.distance.enabled=false
# Pings hosts using standard InetAddress.isReachable() method.
pa.rm.topology.pinger.class=org.ow2.proactive.resourcemanager.frontend.topology.pinging.HostsPinger
# Pings ProActive nodes using Node.getNumberOfActiveObjects().
#pa.rm.topology.pinger.class=org.ow2.proactive.resourcemanager.frontend.topology.pinging.NodesPinger

# Location of selection scripts' logs (comment to disable logging to separate files).
# Can be an absolute path or a path relative to the resource manager home.
# If you are interested in disabling all outputs to 'logs/jobs' you must
# also have a look at the property 'pa.scheduler.job.logs.location' in 'PROACTIVE_HOME/config/scheduler/settings.ini'
# Please note that disabling Job logging will prevent Jobs and Tasks Server logs to be retrieved
# from the REST API and thus the Scheduler portal.
pa.rm.logs.selection.location=logs/jobs/

# Size limit for selection scripts' logs in bytes
pa.rm.logs.selection.max.size=10MB</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_network_properties"><a class="anchor" href="ProActiveAdminGuide.html#_network_properties"></a><a class="link" href="ProActiveAdminGuide.html#_network_properties">21.3. Network Properties</a></h3>
<div class="paragraph">
<p>Configuration files related to network properties for the Scheduler and nodes
are located respectively in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PROACTIVE_HOME/config/network/server.ini</code></p>
</li>
<li>
<p><code>PROACTIVE_HOME/config/network/node.ini</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are using ProActive agents, then the configuration file location differs
depending of the Operating System:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On Unix OS, the default location is
<code>/opt/proactive-node/config/network/node.ini</code></p>
</li>
<li>
<p>On Windows OS, the default one is
<code>C:\Program Files (x86)\ProActiveAgent\schedworker\config\network\node.ini</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_common_network_properties"><a class="anchor" href="ProActiveAdminGuide.html#_common_network_properties"></a><a class="link" href="ProActiveAdminGuide.html#_common_network_properties">21.3.1. Common Network Properties</a></h4>
<div class="paragraph">
<p>The protocol to use by the Server and the nodes can be configured by setting a
value to the property <code>proactive.communication.protocol</code>. It represents the
protocol used to export objects on remote JVMs. At this stage, several protocols
are supported: PNP (pnp), PNP over SSL (pnps), ProActive Message Routing (pamr).</p>
</div>
<div class="paragraph">
<p>The Scheduler is only able to bind to one and only one address. Usually, this limitation is not
seen by the user and no special configuration is required. The Scheduler tries to use the most suitable network
address available. But sometimes, the Scheduler fails to elect the right IP address or the user wants to use
 a given IP address. In such case, you can specify the IP address to use by using theses properties:
 <code>proactive.hostname</code>, <code>proactive.net.interface</code>, <code>proactive.net.netmask</code>, <code>proactive.net.nolocal</code>, <code>proactive.net.noprivate</code>.</p>
</div>
<div class="paragraph">
<p>IPv6 can be enabled by setting the <code>proactive.net.disableIPv6</code> property to false . By default,
the Scheduler does not use IPv6 addresses.</p>
</div>
<div class="paragraph">
<p>If none of the <code>proactive.hostname</code>, <code>proactive.net.interface</code>, <code>proactive.net.netmask</code>,
<code>proactive.net.nolocal</code> , <code>proactive.net.noprivate</code> properties is defined, then the following algorithm is used to elect an IP address:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a public IP address is available, then use it. If several ones are available, one is randomly chosen.</p>
</li>
<li>
<p>If a private IP address is available, then use it. If several ones are available, one is randomly chosen.</p>
</li>
<li>
<p>If a loopback IP address is available, then use it. If several ones are available, one is randomly chosen.</p>
</li>
<li>
<p>If no IP address is available at all, then the runtime exits with an error message.</p>
</li>
<li>
<p>If <code>proactive.hostname</code> is set, then the value returned by InetAddress.getByName(<code>proactive.hostname</code>)
is elected. If no IP address is found, then the runtime exits with an error message.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>proactive.hostname</code> is not set, and at least one of the <code>proactive.net.interface</code> , <code>proactive.net.netmask</code> , <code>proactive.net.nolocal</code> , <code>proactive.net.noprivate</code> is set, then one of the addresses matching all the requirements is elected. Requirements are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>proactive.net.interface</code> is set, then the IP address must be bound to the given network interface.</p>
</li>
<li>
<p>If <code>proactive.net.netmask</code> is set, then the IP address must match the given netmask.</p>
</li>
<li>
<p>If <code>proactive.net.nolocal</code> is set, then the IP address must not be a loopback address.</p>
</li>
<li>
<p>If <code>proactive.net.noprivate</code> is set, then the IP address must not be a private address.</p>
</li>
<li>
<p><code>proactive.useIPaddress</code>: If set to true, IP addresses will be used instead of machines names.
This property is particularly useful to deal with sites that do not host a DNS.</p>
</li>
<li>
<p><code>proactive.hostname</code>: When this property is set, the host name on which the JVM is started
is given by the value of the property. This property is particularly useful to deal with
machines with two network interfaces.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pnp_protocol_properties"><a class="anchor" href="ProActiveAdminGuide.html#_pnp_protocol_properties"></a><a class="link" href="ProActiveAdminGuide.html#_pnp_protocol_properties">21.3.2. PNP Protocol Properties</a></h4>
<div class="paragraph">
<p>PNP allows the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.pnp.port</code>: The TCP port to bind to. If not set PNP uses a random free port. If the specified
TCP port is already used, PNP will not start and an error message is displayed.</p>
</li>
<li>
<p><code>proactive.pnp.default_heartbeat</code>: PNP uses heartbeat messages to monitor the TCP socket and
discover network failures. This value determines how long PNP will wait before the connection
is considered broken. Heartbeat messages are usually sent every default_heartbeat/2 ms.
This value is a trade-off between fast error discovery and network overhead. The default
value is 30000 ms. Setting this value to 0 disables the heartbeat mechanism and client will not be
advertised of network failure before the TCP timeout (which can be really long).</p>
</li>
<li>
<p><code>proactive.pnp.idle_timeout</code>: PNP channels are closed when unused to free system resources. Establishing a
TCP connection is costly (at least 3 RTT) so PNP connections are not closed immediately but after a grace
time. By default the grace time is 60 000 ms. Setting this value to 0 disables the autoclosing mechanism,
connections are kept open forever.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pnp_over_ssl_properties"><a class="anchor" href="ProActiveAdminGuide.html#_pnp_over_ssl_properties"></a><a class="link" href="ProActiveAdminGuide.html#_pnp_over_ssl_properties">21.3.3. PNP over SSL Properties</a></h4>
<div class="paragraph">
<p>PNPS support the same options as PNP (in its own option name space) plus some SSL specific options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.pnps.port</code>: same as <code>proactive.pnp.port</code></p>
</li>
<li>
<p><code>proactive.pnps.default_heartbeat</code>: same as <code>proactive.pnp.default_heartbeat</code></p>
</li>
<li>
<p><code>proactive.pnps.idle_timeout</code>: same as <code>proactive.pnp.idle_timeout</code></p>
</li>
<li>
<p><code>proactive.pnps.authenticate</code>: By default, PNPS only ciphers the communication but does not authenticate
nor the client nor the server. Setting this option to <code>true</code> enable client and server authentication.
If set to <code>true</code> the option <code>proactive.pnps.keystore</code> must also be set.</p>
</li>
<li>
<p><code>proactive.pnps.keystore</code>: Specify the keystore (containing the SSL private key) to use. The keystore must
be of type PKCS12. If not set a private key is dynamically generated for this execution.
Below is an example for creating a keystore by using the <em>keytool</em> binary that is shipped with Java:</p>
<div class="literalblock">
<div class="content">
<pre>$JAVA_HOME/bin/keytool -genkey -keyalg RSA -keystore keystore.jks \
       -validity 365 -keyalg RSA -keysize 2048 -storetype pkcs12</pre>
</div>
</div>
</li>
<li>
<p><code>proactive.pnps.keystore.password</code>: the password associated to the keystore used by PNPS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When using the authentication and ciphering mode (or to speed up the initialization in ciphering only mode),
the option <code>proactive.pnps.keystore</code> must be set and a keystore embedding the private SSL key must be
generated. This keystore must be accessible to ProActive services but kept secret to others. The same applies
to the configuration file that contains the keystore password defined with property
<code>proactive.pnps.keystore.password</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pamr_protocol_properties"><a class="anchor" href="ProActiveAdminGuide.html#_pamr_protocol_properties"></a><a class="link" href="ProActiveAdminGuide.html#_pamr_protocol_properties">21.3.4. PAMR Protocol Properties</a></h4>
<div class="paragraph">
<p>PAMR options are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.pamr.router.address</code>: The address of the router to use. Must be set if message routing is enabled.
It can be FQDN or an IP address.</p>
</li>
<li>
<p><code>proactive.pamr.router.port</code>: The port of the router to use. Must be set if message routing is enabled.</p>
</li>
<li>
<p><code>proactive.pamr.socketfactory</code>: The Socket Factory to use by the message routing protocol</p>
</li>
<li>
<p><code>proactive.pamr.connect_timeout</code>: Sockets used by the PAMR remote object factory connect to the remote server
with a specified timeout value. A timeout of zero is interpreted as an infinite timeout.
The connection will then block until established or an error occurs.</p>
</li>
<li>
<p><code>proactive.pamr.agent.id</code>: This property can be set to obtain a given (and fixed) agent ID. This id must be declared
in the router configuration and must be between 0 and 4096.</p>
</li>
<li>
<p><code>proactive.pamr.agent.magic_cookie</code>: The Magic cookie to submit to the router.
If <code>proactive.pamr.agent.id</code> is set, then this property must also be set to be able
to use a reserved agent ID.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_pamr_over_ssh_protocol_properties"><a class="anchor" href="ProActiveAdminGuide.html#_pamr_over_ssh_protocol_properties"></a><a class="link" href="ProActiveAdminGuide.html#_pamr_over_ssh_protocol_properties">PAMR over SSH protocol properties</a></h5>
<div class="paragraph">
<p>To enable PAMR over SSH, ProActive nodes hosts should be able to SSH to router&#8217;s host without password, using
SSH keys.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.pamr.socketfactory</code>: The underlying Socket factory, should be <code>ssh</code> to enable PAMR over SSH</p>
</li>
<li>
<p><code>proactive.pamrssh.port</code>: SSH port to use when connecting to router&#8217;s host</p>
</li>
<li>
<p><code>proactive.pamrssh.username</code>: username to use when connecting to router&#8217;s host</p>
</li>
<li>
<p><code>proactive.pamrssh.key_directory</code>: directory when SSH keys can be found to access router&#8217;s host. For instance
/home/login/.ssh</p>
</li>
<li>
<p><code>proactive.pamrssh.address</code>: Correspond to the host that actually runs a PAMR router on the remote side of the
SSH tunnel. It may be used to point to a different host than the SSH server itself - making the SSH server to act as
a gateway. The parameter is also useful when the PAMR router is running inside a cloud based VM which doesn&#8217;t support
its public IP address. In that case it can be used to enforce the usage of the remote loopback interface.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_several_communication_protocols"><a class="anchor" href="ProActiveAdminGuide.html#_enabling_several_communication_protocols"></a><a class="link" href="ProActiveAdminGuide.html#_enabling_several_communication_protocols">21.3.5. Enabling Several Communication Protocols</a></h4>
<div class="paragraph">
<p>The next options are available to control multiprocol:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>proactive.communication.additional_protocols</code>: The set of protocol to use separated by commas.</p>
</li>
<li>
<p><code>proactive.communication.benchmark.parameter</code>:  This property is used pass parameters to the benchmark.
This could be a duration time, a size, &#8230;&#8203;
This property is expressed as a String.</p>
</li>
<li>
<p><code>proactive.communication.protocols.order</code>: A fixed order could be specified if protocol&#8217;s
performance is known in advance and won&#8217;t change.
This property explain a preferred order for a subset of protocols declared in the property
proactive.communication.additional_protocols. If one of the specified protocol isn&#8217;t exposed,
it is ignored. If there are protocols that are not declared in this property but which are exposed,
they are used in the order choose by the benchmark mechanism.</p>
<div class="literalblock">
<div class="content">
<pre>Example:
Exposed protocols: http,pnp,rmi
Benchmark Order: rmi &gt; pnp &gt; http
Order: pnp
This will give the order of use: pnp &gt; rmi &gt; http</pre>
</div>
</div>
</li>
<li>
<p><code>proactive.communication.protocols.order</code>: A fixed order could be specified if protocol&#8217;s performance
is known in advance and won&#8217;t change.
This automatically disabled	RemoteObject&#8217;s Benchmark.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rest_api_properties"><a class="anchor" href="ProActiveAdminGuide.html#_rest_api_properties"></a><a class="link" href="ProActiveAdminGuide.html#_rest_api_properties">21.4. REST API &amp; Web Properties</a></h3>
<div class="paragraph">
<p>REST API Properties are read when ProActive Scheduler is started therefore you need to restart it
to apply changes.</p>
</div>
<div class="paragraph">
<p>The REST API documentation can be found at <em>SCHEDULER_URL/rest/doc</em>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The REST API documentation for our try platform is available at <a href="https://try.activeeon.com/doc/rest/" class="bare">https://try.activeeon.com/doc/rest/</a>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>PROACTIVE_HOME/tools/configure-http</code> command can be used to configure the main parameters of the web server such as the protocol (http/https) and port. See <a href="ProActiveAdminGuide.html#_configure_http_server_command">Configure Http Server Command</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default configuration file is <em>SCHEDULER_HOME/web/settings.ini</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">### Web applications configuration ###

# web applications in dist/war are deployed by default
web.deploy=true

# the maximum number of threads in Jetty for parallel request processing
web.max_threads=400

# timeout on http requests, default to 2 minute, can be increased to handle long requests
web.idle_timeout=120000

# Maximum request and response header sizes. These values can be increased in case of HTTP 414 errors.
web.request_header_size=16384
web.response_header_size=16384

# Configuration of the quality of service filter.
web.qos.filter.enabled=true
# Context of the filter, defaults to the /rest microservice
web.qos.filter.context=/rest
# A comma-separated list of path specification, relative to the context microservice, on which a quality of service filter will be applied
# The path specification accepts wildcards.
web.qos.filter.paths=/node.jar
# No more than web.qos.filter.max.requests requests can run in parallel at the same time for each element of the list.
# Pending requests will wait for web.idle_timeout milliseconds. After this timeout, an error 503 Service Unavailable with be triggered.
web.qos.filter.max.requests=1

# port to use to deploy web applications
web.http.port=8080

# define whether HTTP requests are redirected to HTTPS
# this property has effect only if web.https is enabled
web.redirect_http_to_https=false

# HTTPS/SSL configuration
web.https=false
web.https.port=8443

# WARNING: the following HTTPS default values are for testing purposes only!
# do not use them in production but create your own keystore, etc.

# path to keystore, can be absolute or relative to SCHEDULER_HOME
web.https.keystore=config/web/keystore
web.https.keystore.password=activeeon

# path to truststore, can be absolute or relative to SCHEDULER_HOME
#web.https.truststore=config/web/truststore
#web.https.truststore.password=activeeon

# define whether hostname checking is performed or not when HTTPS
# is used to communicate with the REST API
#web.https.allow_any_hostname=true

# define whether all kind of certificates (e,g. self-signed) are allowed
# or not when HTTPS is used to communicate with the REST API
#web.https.allow_any_certificate=true

### additional ssl-related properties ###
# See https://www.eclipse.org/jetty/documentation/jetty-9/index.html#configuring-sslcontextfactory
web.https.protocols.included=TLSv1.2,TLSv1.3
# web.https.protocols.excluded=SSLv2Hello,SSLv3
# web.https.cyphers.included.add=
web.https.cyphers.excluded.add=TLS_DHE.*,TLS_EDH.*
# web.https.renegotiation.allowed=true
# web.https.secure.random.algorithm=
# web.https.key.factory.algorithm=SunX509
# web.https.trust.factory.algorithm=SunX509
# web.https.max.cert.path=
# web.https.cert.alias=
# web.https.enable.crldp=true
# web.https.crl.path=
# web.https.enable.ocsp=true
# web.https.ocsp.responder.url=
# web.https.session.caching=true
# web.https.session.cache.size=
# web.https.session.timeout=

### additional http header-related properties ###
### (in order to disable one setting, uncomment it and set it empty) ###
# web.x_frame_options=SAMEORIGIN
# web.x_xss_protection=1
# web.x_content_type_options=nosniff
# web.strict_transport_security=max-age=63072000; includeSubDomains; preload
# web.expect_ct=
# web.referrer_policy=strict-origin-when-cross-origin

# Optional configuration that will enable a Content-Security-Policy or Content-Security-Policy-Report-Only response headers
# see https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP
# web.content.security.policy=default-src 'self' example.com *.example.com
# web.content.security.policy.report.only=default-src 'self' example.com *.example.com

# Enable PCA Proxy rewriter to route requests coming from proxyfied applications
web.pca.proxy.rewrite.enabled=true

# PCA Proxy cache size to store referer information
web.pca.proxy.rewrite.referer.cache.size=10000

# Paths that will be excluded from rewrite rules in the PCA proxy, this is to protect ProActive portals from
# being redirected by the rules, which would make them unreachable.
web.pca.proxy.rewrite.excluded.paths=/automation-dashboard/,/studio/,/scheduler/,/rm/
web.pca.proxy.rewrite.excluded.paths.exact=/automation-dashboard,/studio,/scheduler,/rm

# Uncomment and set the following settings if resource downloading must pass through a proxy
#resource.downloader.proxy=127.0.0.1
#resource.downloader.proxy.port=8080
#resource.downloader.proxy.scheme=http

### REST API configuration ###

# will be set by JettyStarter, you will need to set it if you run REST server in standalone mode
#scheduler.url=rmi://localhost:1099

# scheduler user that is used as cache
scheduler.cache.login=watcher
scheduler.cache.password=w_pwd
#scheduler.cache.credential=

# cache refresh rate in ms
rm.cache.refreshrate=3500

# will be set by JettyStarter, you will need to set it if you run REST server in standalone mode
#rm.url=rmi://localhost:1099

# rm user that is used as cache
rm.cache.login=watcher
rm.cache.password=w_pwd
rm.cache.credential=

scheduler.logforwardingservice.provider=org.ow2.proactive.scheduler.common.util.logforwarder.providers.SocketBasedForwardingProvider

#### noVNC integration ####

# enable or disable websocket proxy (true or false)
novnc.enabled=false
# port used by websocket proxy (integer)
novnc.port=5900
# security configuration SSL (ON or OFF or REQUIRED)
novnc.secured=ON
# security keystore for SSL
# to create one for development: keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048
novnc.keystore=config/web/keystore
# security keystore password
novnc.password=activeeon
# security keystore key password
novnc.keypassword=activeeon

#  Url of the NoVNC proxy, created automatically when the NoBNC proxy is started.
# the property can be defined manually if the ProActive server is behind a reverse proxy
# novnc.url=

studio.workflows.user.dir=data/defaultuser/

#### Job Planner REST URL
jp.url=http://localhost:8080/job-planner/planned_jobs

# path to the jetty log file, disabled by default as retention is broken in the version of jetty we are using
#jetty.log.file=./logs/jetty-yyyy_mm_dd.request.log

# retention period (days) for jetty logs
jetty.log.retain.days=5

# session cleaning period in seconds, default to 5 minutes
session.cleaning.period=300

# session timeout in seconds, default to one hour
session.timeout=3600</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_catalog_properties"><a class="anchor" href="ProActiveAdminGuide.html#_catalog_properties"></a><a class="link" href="ProActiveAdminGuide.html#_catalog_properties">21.5. Catalog Properties</a></h3>
<div class="paragraph">
<p>Catalog Properties are read from its WAR file.</p>
</div>
<div class="paragraph">
<p>The default configuration file is located at <em>WEB-INF/classes/application.properties</em>.
It can be extended with additional <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html">Spring properties</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs"># Configure logging level
logging.level.org.hibernate=warn
logging.level.org.hibernate.SQL=off
logging.level.org.ow2.proactive.catalog=info
logging.level.org.springframework.web=info
# warning, some loggers levels can only be changed in the log4j2.xml configuration


# Embedded server configuration
server.compression.enabled=true
server.contextPath=/

######################
#    HIKARI &amp; JPA    #
######################

# Hibernate ddl auto (create, create-drop, update)
spring.jpa.hibernate.ddl-auto=update

spring.jmx.unique-names=true
spring.datasource.pool-name=catalog
spring.jmx.default-domain=catalog

spring.datasource.type=com.zaxxer.hikari.HikariDataSource
# The classname of a custom org.hibernate.connection.ConnectionProvider which provides JDBC connections to Hibernate
spring.jpa.hibernate.connection.provider_class=org.hibernate.hikaricp.internal.HikariCPConnectionProvider
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# JDBC connection pool configuration
# https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby
spring.datasource.connection-timeout=120000
spring.datasource.maximum-pool-size=40
spring.datasource.transaction-isolation=TRANSACTION_READ_COMMITTED
spring.datasource.leak-detection-threshold=600000
spring.datasource.validation-timeout=20000

# Enable Hibernate's automatic session context management
spring.jpa.properties.hibernate.current_session_context_class=thread

# Prevent warning about deprecated naming strategy
# https://github.com/spring-projects/spring-boot/issues/2763
# Should be changed once Spring Boot 1.4 is used
spring.jpa.properties.hibernate.implicit_naming_strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyJpaCompliantImpl
spring.jpa.properties.hibernate.ejb.naming_strategy_delegator=
spring.jpa.properties.hibernate.id.new_generator_mappings=false

# Show or not log for each sql query
spring.jpa.show-sql=false

##############
# DATASOURCE #
##############

# The default settings are using hsqldb
######################## HSQL DB #######################################################
spring.datasource.driverClassName=org.hsqldb.jdbc.JDBCDriver
spring.datasource.url=jdbc:hsqldb:hsql://localhost:9001/catalog
spring.jpa.database-platform=org.hibernate.dialect.HSQLDialect

spring.datasource.username=catalog
# Use tools/encrypt to create an encrypted password
spring.datasource.password=

######################## MYSQL DB ########################################################
#spring.datasource.driverClassName=com.mysql.jdbc.Driver
#spring.datasource.url=jdbc:mysql://localhost:8008/catalog
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect

#spring.datasource.username=user
#spring.datasource.password=user

######################## ORACLE DB  version=12.1.0.2 #####################################
#spring.datasource.driverClassName=oracle.jdbc.driver.OracleDriver
#spring.datasource.url=jdbc:oracle:thin:@localhost:8000:xe
#spring.jpa.database-platform=org.hibernate.dialect.Oracle12cDialect

#spring.datasource.username=system
#spring.datasource.password=oracle

######################### PostgreSQL #####################################################
#spring.datasource.driverClassName=org.postgresql.Driver
#spring.datasource.url=jdbc:postgresql://localhost:5000/catalog
#spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

#spring.datasource.username=admin
#spring.datasource.password=admin

######################### SqlServer #####################################################
#spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver
#spring.datasource.url=jdbc:sqlserver://sqlserver-proactive.database.windows.net:1433;database=catalog;
#spring.jpa.database-platform=org.hibernate.dialect.SQLServer2012Dialect

#spring.datasource.username=activeeon@sqlserver-proactive
#spring.datasource.password=xxxxxxx

##########################################################################################

# Disable Spring banner
spring.main.banner_mode=off


pa.scheduler.url=http://localhost:8080
# Used to perform authentication since identity service is not yet available
pa.scheduler.rest.url=${pa.scheduler.url}/rest

# Used to perform filtering based on job-planner associations status
pa.job-planner.rest.url=${pa.scheduler.url}/job-planner

pa.job-planner.planned_objects.path=/planned_jobs/buckets
pa.job-planner.planned_object.status.path=/planned_jobs/buckets/{bucketName}/{objectName}

# duration of job-planner association cache in seconds
pa.job-planner.cache.timeout=60

# Separator used in kind string, like workflow/pca
kind.separator=/

# Optional catalog security features
pa.catalog.security.required.sessionid=true

# Optional ttf fonts absolute paths to use when generating the pdf report. This is required when catalog objects contains Asian characters
pa.catalog.pdf.report.ttf.font.path=
pa.catalog.pdf.report.ttf.font.bold.path=
pa.catalog.pdf.report.ttf.font.italic.path=
pa.catalog.pdf.report.ttf.font.bold.italic.path=

# Session id cache timeout value in minutes
pa.catalog.sessionId.timeout.minutes = 1

# the maximum number of items that can be used in a SQL IN expression (default to Oracle limit)
pa.catalog.db.items.max.size=1000</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduler_portal_properties"><a class="anchor" href="ProActiveAdminGuide.html#_scheduler_portal_properties"></a><a class="link" href="ProActiveAdminGuide.html#_scheduler_portal_properties">21.6. Scheduler Portal Properties</a></h3>
<div class="paragraph">
<p>Scheduler Portal Properties are read when Portal main page is loaded.</p>
</div>
<div class="paragraph">
<p>The Configuration file named <code>scheduler-portal-display.conf</code> is located in the folder <code>$PROACTIVE_HOME/config/portal/</code>.</p>
</div>
<div class="sect3">
<h4 id="_the_list_of_columns_property"><a class="anchor" href="ProActiveAdminGuide.html#_the_list_of_columns_property"></a><a class="link" href="ProActiveAdminGuide.html#_the_list_of_columns_property">21.6.1. The list of Columns property</a></h4>
<div class="paragraph">
<p>It is possible to specify a list of Variables or Generic Information to display in new columns of the Execution List table (Job Centric View). The defined columns will be added after the default columns of the view, following the order given in the configuration file. The list of columns is defined as a JSON array, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">execution-list-extra-columns: [{ \
	"title": "start at", \
	"information": { \
		"type": "generic-information", \
		"key": "START_AT"}, \
	"hide": false }, \
	{ \
	"title": "My var", \
	"information": { \
		"type": "variable", \
		"key": "MY_VAR"}, \
	"hide": false }]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The property <code>execution-list-extra-columns</code> contains the JSON array. If the array is written on several lines, each line except the last one should end with the caracter <code>\</code>. Each element of the array should contain the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>title</code>: the header of the column containing the value of the Variable or Generic Information</p>
</li>
<li>
<p><code>information</code>: the information about the value displayed in the column. This field contains 2 fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>type</code>: the type, either <em>variable</em> or <em>generic-information</em></p>
</li>
<li>
<p><code>key</code>: the key of the value in the Variable or Generic Information map</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>hide</code>: whether the column should be hidden by default</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_manager_command_line"><a class="anchor" href="ProActiveAdminGuide.html#_resource_manager_command_line"></a><a class="link" href="ProActiveAdminGuide.html#_resource_manager_command_line">21.7. Command Line</a></h3>
<div class="paragraph">
<p>The ProActive client allows to interact with the <a href="ProActiveAdminGuide.html#_glossary_scheduler"><strong>Scheduler</strong></a> and <a href="ProActiveAdminGuide.html#_glossary_resource_manager"><strong>Resource Manager</strong></a>.
The client has an interactive mode started if you do not provide any command.</p>
</div>
<div class="paragraph">
<p>The client usage is also available using the <code>-h</code> parameter as shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ PROACTIVE_HOME/bin/proactive-client -h</pre>
</div>
</div>
<div class="sect3">
<h4 id="_command_line_examples"><a class="anchor" href="ProActiveAdminGuide.html#_command_line_examples"></a><a class="link" href="ProActiveAdminGuide.html#_command_line_examples">21.7.1. Command Line Examples</a></h4>
<div class="sect4">
<h5 id="_cli"><a class="anchor" href="ProActiveAdminGuide.html#_cli"></a><a class="link" href="ProActiveAdminGuide.html#_cli">Deploy ProActive Nodes</a></h5>
<div class="sect5">
<h6 id="_in_non_interactive_mode"><a class="anchor" href="ProActiveAdminGuide.html#_in_non_interactive_mode"></a><a class="link" href="ProActiveAdminGuide.html#_in_non_interactive_mode">In non-interactive mode</a></h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -cn 'moreLocalNodes' -infrastructure 'org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure' './config/authentication/rm.cred' 4 60000 '' -policy org.ow2.proactive.resourcemanager.nodesource.policy.StaticPolicy 'ALL' 'ALL'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_in_interactive_mode"><a class="anchor" href="ProActiveAdminGuide.html#_in_interactive_mode"></a><a class="link" href="ProActiveAdminGuide.html#_in_interactive_mode">In interactive mode</a></h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client
&gt; createns( 'moreLocalNodes', ['org.ow2.proactive.resourcemanager.nodesource.infrastructure.LocalInfrastructure', './config/authentication/rm.cred', 4, 60000, ''], ['org.ow2.proactive.resourcemanager.nodesource.policy.StaticPolicy', 'ALL', 'ALL'])</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_install_proactive_packages"><a class="anchor" href="ProActiveAdminGuide.html#_install_proactive_packages"></a><a class="link" href="ProActiveAdminGuide.html#_install_proactive_packages">Install ProActive packages</a></h5>
<div class="paragraph">
<p>To install a ProActive package, you can use the ProActive CLI by providing a path to your package.
It can be a local directory, a ZIP file or can be a URL to a web directory, a direct-download ZIP file, a GitHub repository or ZIP or a directory inside a GitHub repository.
Please note that URL forwarding is supported.</p>
</div>
<div class="sect5">
<h6 id="_in_non_interactive_mode_2"><a class="anchor" href="ProActiveAdminGuide.html#_in_non_interactive_mode_2"></a><a class="link" href="ProActiveAdminGuide.html#_in_non_interactive_mode_2">In non-interactive mode</a></h6>
<div class="ulist">
<ul>
<li>
<p>To install a package located in a local directory or ZIP</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -pkg /Path/To/Local/Package/Directory/Or/Zip</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To install a package located in a web folder (Supports only Apache Tomcat directory listing)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -pkg http://example.com/installablePackageDirectory/</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To install a package with a direct download ZIP URL:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -pkg https://s3.eu-west-2.amazonaws.com/activeeon-public/proactive-packages/package-example.zip</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To install a package located in a GitHub repository (either in the repository root or in a sub-folder within a repository):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client -pkg https://github.com/ow2-proactive/hub-packages/tree/master/package-example</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_in_interactive_mode_2"><a class="anchor" href="ProActiveAdminGuide.html#_in_interactive_mode_2"></a><a class="link" href="ProActiveAdminGuide.html#_in_interactive_mode_2">In interactive mode</a></h6>
<div class="ulist">
<ul>
<li>
<p>To install a package located in any of the aforementioned possible locations</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">$ PROACTIVE_HOME/bin/proactive-client
&gt; installpackage(PackagePathOrURL)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cloud_infrastructure_startup_script"><a class="anchor" href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script"></a><a class="link" href="ProActiveAdminGuide.html#_cloud_infrastructure_startup_script">21.8. Cloud Node Source Infrastructure Startup Script</a></h3>
<div class="paragraph">
<p>Most cloud node source infrastructures allows the user to customize the VM startup script.
To run the ProActive nodes, this script is also expected to download and install the Java Runtime Environment, then download and and execute ProActive node.jar, if they are not already provided by the VM image.
The script can use the following arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>%nodeJarUrl%</code>: the value of the infrastructure parameter <code>nodeJarURL</code>, it specifies the full URL path for downloading <em>node.jar</em> file.</p>
</li>
<li>
<p><code>%protocol%</code>: the network protocol (pnp or pamr) to be used by the ProActive Node for incoming communications.</p>
</li>
<li>
<p><code>%jythonPath%</code>: the path of jython library on the AWS instances. Its default value is <code>/tmp/node/lib/jython-standalone-2.7.0.jar/Lib</code>.</p>
</li>
<li>
<p><code>%rmHostname%</code>: the value of the infrastructure parameter <code>rmHostname</code>, it specifies the hostname or refers an IP address of the Resource Manager which is accessible from deployed nodes.</p>
</li>
<li>
<p><code>%instanceIdNodeProperty%</code>: it specifies the infrastructure use which property to identify the instance. It could be <code>instanceId</code> or <code>instanceTag</code>.</p>
</li>
<li>
<p><code>%instanceId%</code>: the instance identification value corresponding <code>%instanceIdNodeProperty%</code>.</p>
</li>
<li>
<p><code>%rmUrl%</code>: the URL to access the Resource Manager from the nodes.</p>
</li>
<li>
<p><code>%nodeSourceName%</code>: the name of the node source.</p>
</li>
<li>
<p><code>%nodeNamingOption%</code>: the Java command option specifying the node naming provided by the infrastructure. It&#8217;s expected to be added in the Java command of starting node.jar.</p>
</li>
<li>
<p><code>%credentials%</code>: the credential of the Proactive Node required for Resource Manager authentication.</p>
</li>
<li>
<p><code>%numberOfNodesPerInstance%</code>: the value of the infrastructure parameter <code>numberOfNodesPerInstance</code>, it specifies how much nodes should be run on each instance.</p>
</li>
<li>
<p><code>%additionalProperties%</code>: the value of the infrastructure parameter <code>additionalProperties</code>, it&#8217;s supposed to be added in the Java command of starting node.jar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These arguments will be interpreted by cloud node source Infrastructure later to replace these arguments by its effective value before the script execution.</p>
</div>
<div class="paragraph">
<p>Here is an example startup script for Linux OS images which installed wget (e.g., Debian, Ubuntu):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then wget -nv -N https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz; tar -xf jre-8u382b05-linux-x64.tar.gz; mv jre1.8.0_382b05/ jre; fi
wget -nv %nodeJarUrl%
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>An example startup script for Linux OS images which installed curl instead of wget (e.g., CentOS, RHEL):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mkdir -p /tmp/node &amp;&amp; cd /tmp/node
if ! type -p jre/bin/java; then curl -sL https://s3.amazonaws.com/ci-materials/Latest_jre/jre-8u382b05-linux-x64.tar.gz --output jre.tar.gz; tar -xf jre.tar.gz; mv jre1.8.0_382b05/ jre; fi
curl -sL %nodeJarUrl% --output node.jar
nohup jre/bin/java -jar node.jar -Dproactive.communication.protocol=%protocol% -Dpython.path=%jythonPath% -Dproactive.pamr.router.address=%rmHostname% -D%instanceIdNodeProperty%=%instanceId% -r %rmUrl% -s %nodeSourceName% %nodeNamingOption% -v %credentials% -w %numberOfNodesPerInstance% %additionalProperties% &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>An example startup script for Windows OS images:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$download=New-Object System.Net.WebClient;
$download.DownloadFile('http://javadl.oracle.com/webapps/download/AutoDL?BundleId=238729_478a62b7d4e34b78b671c754eaaf38ab', 'c:\jreInstall.exe');
$procInstall=Start-Process -FilePath 'c:\jreInstall.exe' -ArgumentList '/s REBOOT=ReallySuppress INSTALLDIR=c:\jre' -Wait -PassThru;
$procInstall.waitForExit();
$download.DownloadFile('%nodeJarUrl%', 'c:\node.jar');
Start-Process -NoNewWindow 'c:\jre\bin\java' -ArgumentList '-jar', 'c:\node.jar', '-Dproactive.communication.protocol=%protocol%', '-Dproactive.pamr.router.address=%rmHostname%', '-D%instanceIdNodeProperty%=%instanceId%', '-r', '%rmUrl%', '-s', '%nodeSourceName%', '-v', '%credentials%', '-w', '%numberOfNodesPerInstance%', '%additionalProperties%'</pre>
</div>
</div>
<h2 id="_legal_notice" class="discrete">Legal notice</h2>
<div class="paragraph">
<p>Activeeon SAS, © 2007-<span id="currentYear">2019</span>. All Rights Reserved.</p>
</div>
<div class="paragraph">
<p>For more information, please contact <a href="mailto:contact@activeeon.com">contact@activeeon.com</a>.</p>
</div>
<script>
    document.getElementById('currentYear').innerHTML = new Date().getFullYear();
</script>
<script>
if(window.location.hostname.includes("doc.activeeon.com")){
    document.querySelectorAll('.studioUrl').forEach(function(element){
        element.href="https://try.activeeon.com/studio";
    });
    document.querySelectorAll('.schedulerUrl').forEach(function(element){
        element.href="https://try.activeeon.com/scheduler";
    });
    document.querySelectorAll('.rmUrl').forEach(function(element){
        element.href="https://try.activeeon.com/rm";
    });
    document.querySelectorAll('.automationDashboardUrl').forEach(function(element){
        element.href="https://try.activeeon.com/automation-dashboard/#/portal/service-automation";
    });
    document.querySelectorAll('.restUrl').forEach(function(element){
        element.href="https://try.activeeon.com/rest";
    });
    document.querySelectorAll('.schedulerGraphQLUrl').forEach(function(element){
        element.href="https://try.activeeon.com/scheduling-api/v1/graphiql";
    });
    document.querySelectorAll('.catalogRestUrl').forEach(function(element){
        element.href="https://try.activeeon.com/catalog";
    });
    document.querySelectorAll('.catalogGraphQLUrl').forEach(function(element){
        element.href="https://try.activeeon.com/catalog/graphiql";
    });
}
</script>
<style>
  #tocbot a.toc-link.node-name--H1{ font-style: italic }
  @media screen{
    #tocbot > ul.toc-list{ margin-bottom: 0.5em; margin-left: 0.125em }
    #tocbot ul.sectlevel0, #tocbot a.toc-link.node-name--H1 + ul{
      padding-left: 0 }
    #tocbot a.toc-link{ height:100% }
    .is-collapsible{ max-height:3000px; overflow:hidden; }
    .is-collapsed{ max-height:0 }
    .is-active-link{ font-weight:700 }
  }
  @media print{
    #tocbot a.toc-link.node-name--H4{ display:none }
  }
</style>
<script src="https://trydev2.activeeon.com/doc/tocbot/tocbot.js"></script>
<script>
    /* Tocbot dynamic TOC, works with tocbot 3.0.2+ */
    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    /* explanation of parameters
      orderedList : false to avoid extra numbers added in the toc
      includeHtml : true to allow direct links (redirect between documentations in the all-documentation-link section)
      hasInnerContainers : true (scrolling between chapters is not accurate otherwise)
      collapseDepth : 3 (always collapse 3 levels)
    */
    tocbot.init({ tocSelector: '.js-toc', contentSelector: '.js-toc-content',
        headingSelector: 'h1, h2, h3, h4, h5', collapseDepth: 3,
        smoothScroll: true, orderedList: false, includeHtml: true, hasInnerContainers: true });
    //tocbot.refresh();
    var handleTocOnResize = function() {
        var width = window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ tocSelector: '.js-toc', contentSelector: '.js-toc-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 3,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                orderedList: false,
                smoothScroll: true, includeHtml: true, hasInnerContainers: true });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4, h5',
                orderedList: false, collapseDepth: 3,
                smoothScroll: true, includeHtml: true, hasInnerContainers: true });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    handleTocOnResize();
</script>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version unspecified<br>
Last updated 2024-03-11 02:57:26 UTC
</div>
</div>
<script src="https://trydev2.activeeon.com/doc/highlight/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>